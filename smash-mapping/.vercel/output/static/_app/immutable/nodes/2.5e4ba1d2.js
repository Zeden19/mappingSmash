import{S as jn,i as Ln,s as Mn,k as g,l as y,m as k,h as b,n as _,p as We,b as De,J as Jn,o as Mi,K as Hr,q as C,a as Z,r as D,c as X,L as Dt,E as h,M as pn,N as Ut,O as Ke,P as Ui,Q as Qn,R as es,T as js,U as us,D as tt,g as ge,v as Kt,d as Ue,f as Yt,V as Zn,W as ut,e as Xn,X as co,u as On,w as ot,Y as at,y as ts,Z as uo,z as ns,A as ss,_ as lt,B as rs}from"../chunks/index.f2f7f558.js";import{_ as is}from"../chunks/preload-helper.41c905a7.js";function ho(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var po=function s(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!s(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!s(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Jr=Fi(po),Kr=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],hs=1,wn=8;class Ls{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(r!==hs)throw new Error(`Got v${r} data when expected v${hs}.`);const i=Kr[n&15];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new Ls(l,o,i,e)}constructor(e,t=64,n=Float64Array,r){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Kr.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-l%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,wn,e),this.coords=new this.ArrayType(this.data,wn+l+a,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(wn+o+l+a),this.ids=new this.IndexArrayType(this.data,wn,e),this.coords=new this.ArrayType(this.data,wn+l+a,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(hs<<4)+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return ks(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:l}=this,a=[0,i.length-1,0],u=[];for(;a.length;){const c=a.pop()||0,d=a.pop()||0,f=a.pop()||0;if(d-f<=l){for(let E=f;E<=d;E++){const O=o[2*E],T=o[2*E+1];O>=e&&O<=n&&T>=t&&T<=r&&u.push(i[E])}continue}const m=f+d>>1,p=o[2*m],v=o[2*m+1];p>=e&&p<=n&&v>=t&&v<=r&&u.push(i[m]),(c===0?e<=p:t<=v)&&(a.push(f),a.push(m-1),a.push(1-c)),(c===0?n>=p:r>=v)&&(a.push(m+1),a.push(d),a.push(1-c))}return u}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,l=[0,r.length-1,0],a=[],u=n*n;for(;l.length;){const c=l.pop()||0,d=l.pop()||0,f=l.pop()||0;if(d-f<=o){for(let E=f;E<=d;E++)Yr(i[2*E],i[2*E+1],e,t)<=u&&a.push(r[E]);continue}const m=f+d>>1,p=i[2*m],v=i[2*m+1];Yr(p,v,e,t)<=u&&a.push(r[m]),(c===0?e-n<=p:t-n<=v)&&(l.push(f),l.push(m-1),l.push(1-c)),(c===0?e+n>=p:t+n>=v)&&(l.push(m+1),l.push(d),l.push(1-c))}return a}}function ks(s,e,t,n,r,i){if(r-n<=t)return;const o=n+r>>1;$i(s,e,o,n,r,i),ks(s,e,t,n,o-1,1-i),ks(s,e,t,o+1,r,1-i)}function $i(s,e,t,n,r,i){for(;r>n;){if(r-n>600){const u=r-n+1,c=t-n+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(n,Math.floor(t-c*f/u+m)),v=Math.min(r,Math.floor(t+(u-c)*f/u+m));$i(s,e,t,p,v,i)}const o=e[2*t+i];let l=n,a=r;for(En(s,e,n,t),e[2*r+i]>o&&En(s,e,n,r);l<a;){for(En(s,e,l,a),l++,a--;e[2*l+i]<o;)l++;for(;e[2*a+i]>o;)a--}e[2*n+i]===o?En(s,e,n,a):(a++,En(s,e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function En(s,e,t,n){ds(s,t,n),ds(e,2*t,2*n),ds(e,2*t+1,2*n+1)}function ds(s,e,t){const n=s[e];s[e]=s[t],s[t]=n}function Yr(s,e,t,n){const r=s-t,i=e-n;return r*r+i*i}const mo={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:s=>s},Wr=Math.fround||(s=>e=>(s[0]=+e,s[0]))(new Float32Array(1)),qt=2,Ft=3,fs=4,Mt=5,Bi=6;class vo{constructor(e){this.options=Object.assign(Object.create(mo),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let a=0;a<e.length;a++){const u=e[a];if(!u.geometry)continue;const[c,d]=u.geometry.coordinates,f=Wr(Fn(c)),m=Wr($n(d));o.push(f,m,1/0,a,-1,1),this.options.reduce&&o.push(0)}let l=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const u=+Date.now();l=this.trees[a]=this._createTree(this._cluster(l,a)),t&&console.log("z%d: %d clusters in %dms",a,l.numItems,+Date.now()-u)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const d=this.getClusters([n,r,180,o],t),f=this.getClusters([-180,r,i,o],t);return d.concat(f)}const l=this.trees[this._limitZoom(t)],a=l.range(Fn(n),$n(o),Fn(i),$n(r)),u=l.data,c=[];for(const d of a){const f=this.stride*d;c.push(u[f+Mt]>1?Zr(u,f,this.clusterProps):this.points[u[f+Ft]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[t*this.stride],u=o[t*this.stride+1],c=i.within(a,u,l),d=[];for(const f of c){const m=f*this.stride;o[m+fs]===e&&d.push(o[m+Mt]>1?Zr(o,m,this.clusterProps):this.points[o[m+Ft]])}if(d.length===0)throw new Error(r);return d}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:l}=this.options,a=l/o,u=(n-a)/i,c=(n+1+a)/i,d={features:[]};return this._addTileFeatures(r.range((t-a)/i,u,(t+1+a)/i,c),r.data,t,n,i,d),t===0&&this._addTileFeatures(r.range(1-a/i,u,1,c),r.data,i,n,i,d),t===i-1&&this._addTileFeatures(r.range(0,u,a/i,c),r.data,-1,n,i,d),d.features.length?d:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,n.length!==1)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const l of o){const a=l.properties;if(a&&a.cluster?i+a.point_count<=r?i+=a.point_count:i=this._appendLeaves(e,a.cluster_id,n,r,i):i<r?i++:e.push(l),e.length===n)break}return i}_createTree(e){const t=new Ls(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,o){for(const l of e){const a=l*this.stride,u=t[a+Mt]>1;let c,d,f;if(u)c=Vi(t,a,this.clusterProps),d=t[a],f=t[a+1];else{const v=this.points[t[a+Ft]];c=v.properties;const[E,O]=v.geometry.coordinates;d=Fn(E),f=$n(O)}const m={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(f*i-r))]],tags:c};let p;u||this.options.generateId?p=t[a+Ft]:p=this.points[t[a+Ft]].id,p!==void 0&&(m.id=p),o.features.push(m)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,l=n/(r*Math.pow(2,t)),a=e.data,u=[],c=this.stride;for(let d=0;d<a.length;d+=c){if(a[d+qt]<=t)continue;a[d+qt]=t;const f=a[d],m=a[d+1],p=e.within(a[d],a[d+1],l),v=a[d+Mt];let E=v;for(const O of p){const T=O*c;a[T+qt]>t&&(E+=a[T+Mt])}if(E>v&&E>=o){let O=f*v,T=m*v,N,R=-1;const M=((d/c|0)<<5)+(t+1)+this.points.length;for(const ee of p){const L=ee*c;if(a[L+qt]<=t)continue;a[L+qt]=t;const x=a[L+Mt];O+=a[L]*x,T+=a[L+1]*x,a[L+fs]=M,i&&(N||(N=this._map(a,d,!0),R=this.clusterProps.length,this.clusterProps.push(N)),i(N,this._map(a,L)))}a[d+fs]=M,u.push(O/E,T/E,1/0,M,-1,E),i&&u.push(R)}else{for(let O=0;O<c;O++)u.push(a[d+O]);if(E>1)for(const O of p){const T=O*c;if(!(a[T+qt]<=t)){a[T+qt]=t;for(let N=0;N<c;N++)u.push(a[T+N])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+Mt]>1){const o=this.clusterProps[e[t+Bi]];return n?Object.assign({},o):o}const r=this.points[e[t+Ft]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function Zr(s,e,t){return{type:"Feature",id:s[e+Ft],properties:Vi(s,e,t),geometry:{type:"Point",coordinates:[_o(s[e]),go(s[e+1])]}}}function Vi(s,e,t){const n=s[e+Mt],r=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,i=s[e+Bi],o=i===-1?{}:Object.assign({},t[i]);return Object.assign(o,{cluster:!0,cluster_id:s[e+Ft],point_count:n,point_count_abbreviated:r})}function Fn(s){return s/360+.5}function $n(s){const e=Math.sin(s*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function _o(s){return(s-.5)*360}function go(s){const e=(180-s*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function yo(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}class At{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class As{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(At.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>At.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(At.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class bo{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return wo(e)}}const wo=s=>s.map(t=>new As({position:At.getPosition(t),markers:[t]}));class Eo extends bo{constructor(e){var{maxZoom:t,radius:n=60}=e,r=yo(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new vo(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!Jr(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const r=this.markers.map(i=>{const o=At.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng(),o.lat()]},properties:{marker:i}}});this.superCluster.load(r)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!Jr(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(t=>this.transformCluster(t))}transformCluster({geometry:{coordinates:[e,t]},properties:n}){if(n.cluster)return new As({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const r=n.marker;return new As({markers:[r],position:At.getPosition(r)})}}class To{constructor(e,t){this.markers={sum:e.length};const n=t.map(i=>i.count),r=n.reduce((i,o)=>i+o,0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class Oo{render({count:e,position:t},n,r){const o=`<svg fill="${e>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,l=`Cluster of ${e} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+e;if(At.isAdvancedMarkerAvailable(r)){const c=document.createElement("div");c.innerHTML=o;const d=c.firstElementChild;d.setAttribute("transform","translate(0 25)");const f={map:r,position:t,zIndex:a,title:l,content:d};return new google.maps.marker.AdvancedMarkerElement(f)}const u={position:t,zIndex:a,title:l,icon:{url:`data:image/svg+xml;base64,${btoa(o)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}function ko(s,e){for(let t in e.prototype)s.prototype[t]=e.prototype[t]}class Ms{constructor(){ko(Ms,google.maps.OverlayView)}}var In;(function(s){s.CLUSTERING_BEGIN="clusteringbegin",s.CLUSTERING_END="clusteringend",s.CLUSTER_CLICK="click"})(In||(In={}));const Ao=(s,e,t)=>{t.fitBounds(e.bounds)};class Io extends Ms{constructor({map:e,markers:t=[],algorithmOptions:n={},algorithm:r=new Eo(n),renderer:i=new Oo,onClusterClick:o=Ao}){super(),this.markers=[...t],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(n=>{this.addMarker(n,!0)}),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return n===-1?!1:(At.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach(r=>{n=this.removeMarker(r,!0)||n}),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,In.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,In.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>At.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new To(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),this.onClusterClick&&n.marker.addListener("click",r=>{google.maps.event.trigger(this,In.CLUSTER_CLICK,n),this.onClusterClick(r,n,t)})),At.setMap(n.marker,t)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function So(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})}var No=function s(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!s(e[r],t[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){var o=i[r];if(!s(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Xr="__googleMapsScriptId";var mn;(function(s){s[s.INITIALIZED=0]="INITIALIZED",s[s.LOADING=1]="LOADING",s[s.SUCCESS=2]="SUCCESS",s[s.FAILURE=3]="FAILURE"})(mn||(mn={}));class Bt{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:r,id:i=Xr,language:o,libraries:l=[],mapIds:a,nonce:u,region:c,retries:d=3,url:f="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=r,this.id=i||Xr,this.language=o,this.libraries=l,this.mapIds=a,this.nonce=u,this.region=c,this.retries=d,this.url=f,this.version=m,Bt.instance){if(!No(this.options,Bt.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Bt.instance.options)}`);return Bt.instance}Bt.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?mn.FAILURE:this.done?mn.SUCCESS:this.loading?mn.LOADING:mn.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(n=>{n?t(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(i=>{let o,l,a,u="The Google Maps JavaScript API",c="google",d="importLibrary",f="__ib__",m=document,p=window;p=p[c]||(p[c]={});const v=p.maps||(p.maps={}),E=new Set,O=new URLSearchParams,T=()=>o||(o=new Promise((N,R)=>So(this,void 0,void 0,function*(){var M;yield l=m.createElement("script"),l.id=this.id,O.set("libraries",[...E]+"");for(a in i)O.set(a.replace(/[A-Z]/g,ee=>"_"+ee[0].toLowerCase()),i[a]);O.set("callback",c+".maps."+f),l.src=this.url+"?"+O,v[f]=N,l.onerror=()=>o=R(Error(u+" could not load.")),l.nonce=this.nonce||((M=m.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",m.head.append(l)})));v[d]?console.warn(u+" only loads once. Ignoring:",i):v[d]=(N,...R)=>E.add(N)&&T().then(()=>v[d](N,...R))})(n);const r=this.libraries.map(i=>this.importLibrary(i));r.length||r.push(this.importLibrary("core")),Promise.all(r).then(()=>this.callback(),i=>{const o=new ErrorEvent("error",{error:i});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function Co(s){let e;return{c(){e=g("div"),this.h()},l(t){e=y(t,"DIV",{id:!0,style:!0,class:!0});var n=k(e);n.forEach(b),this.h()},h(){_(e,"id","map"),We(e,"height","100%"),We(e,"width","100%"),_(e,"class","svelte-1jw0l0w")},m(t,n){De(t,e,n)},p:Jn,i:Jn,o:Jn,d(t){t&&b(e)}}}function Do(s,e,t){let{data:n}=e,{map:r}=e,i=[],o,l=[],a,u,{mapResult:c}=e;const d=new Bt({apiKey:n.GOOGLE_MAPS_API_KEY,version:"weekly"});Mi(async()=>{d.load().then(async()=>{await google.maps.importLibrary("maps");let p={lat:43.73758865859436,lng:-79.50304080536894};u=new google.maps.InfoWindow,t(0,r=new google.maps.Map(document.getElementById("map"),{center:p,zoom:8,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"simplified"},{saturation:"-100"},{lightness:"30"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{gamma:"0.00"},{lightness:"74"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:"3"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]})),r.setOptions({minZoom:3,maxZoom:18,zoomControl:!0}),a=new Io({map:r,markers:i,algorithmOptions:{maxZoom:7}})})});function f(){for(let p=0;p<i.length;p++)i[p].setMap(null);i.length=0}function m(p){f(),a.clearMarkers(),i=[],l=[];for(const v of p){o=new google.maps.Marker({position:new google.maps.LatLng(v.lat,v.lng),map:r,icon:"markers/red-marker.png"}),l.includes(o.position.toString())&&(o.setIcon("markers/yellow-marker.png"),o.setPosition(new google.maps.LatLng(p.lat+1e-4,p.lng+1e-4))),v.numAttendees>50&&o.setIcon("markers/green-marker.png"),v.numAttendees>100&&o.setIcon("markers/blue-marker.png"),v.numAttendees>500&&o.setIcon("markers/purple-marker.png"),v.state===3&&o.setIcon("markers/grey-marker.png"),i.push(o),l.push(o.getPosition().toString());const E=v.primaryContact.includes("@")?'<a href="mailto:'+v.primaryContact+'" target="_blank">'+v.primaryContact+"</a>":'<a href="'+v.primaryContact+'" target="_blank">'+v.primaryContact+"</a>";google.maps.event.addListener(o,"click",function(O,T){return function(){var N=`<div style="display: block;
        text-align: left"><h2>`+T.name+"</h2><p><strong>Address: </strong><a target='_blank' href='https://www.google.com/maps/place/"+T.venueAddress.replace(" ","+")+"'>"+T.venueAddress+"</a></p><p><strong>Date: </strong>"+T.startAt+"</p><p><strong>Attendees: </strong>"+T.numAttendees+"</p><p><strong>Contact Info: </strong>"+E+"</p><p><strong>Start.gg site: </strong><a target='_blank' href='"+T.url+"'>"+T.url+"</a></p></div>";u.setContent(N),u.open(r,O),google.maps.event.addListener(r,"click",function(R){u.close()}),google.maps.event.addListener(r,"drag",function(R){u.close()}),google.maps.event.addListener(a,"click",function(R){u.close()})}}(o,v))}a.addMarkers(i)}return s.$$set=p=>{"data"in p&&t(1,n=p.data),"map"in p&&t(0,r=p.map),"mapResult"in p&&t(2,c=p.mapResult)},s.$$.update=()=>{s.$$.dirty&4&&c&&m(c)},[r,n,c]}let xo=class extends jn{constructor(e){super(),Ln(this,e,Do,Co,Mn,{data:1,map:0,mapResult:2})}};function Po(s){return--s*s*((1.70158+1)*s+1.70158)+1}function qi(s){const e=s-1;return e*e*e+1}function Qr(s,{delay:e=0,duration:t=400,easing:n=qi,x:r=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(s),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[d,f]=Hr(r),[m,p]=Hr(i);return{delay:e,duration:t,easing:n,css:(v,E)=>`
			transform: ${u} translate(${(1-v)*d}${f}, ${(1-v)*m}${p});
			opacity: ${a-c*E}`}}function It(s,{delay:e=0,duration:t=400,easing:n=qi,axis:r="y"}={}){const i=getComputedStyle(s),o=+i.opacity,l=r==="y"?"height":"width",a=parseFloat(i[l]),u=r==="y"?["top","bottom"]:["left","right"],c=u.map(O=>`${O[0].toUpperCase()}${O.slice(1)}`),d=parseFloat(i[`padding${c[0]}`]),f=parseFloat(i[`padding${c[1]}`]),m=parseFloat(i[`margin${c[0]}`]),p=parseFloat(i[`margin${c[1]}`]),v=parseFloat(i[`border${c[0]}Width`]),E=parseFloat(i[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:O=>`overflow: hidden;opacity: ${Math.min(O*20,1)*o};${l}: ${O*a}px;padding-${u[0]}: ${O*d}px;padding-${u[1]}: ${O*f}px;margin-${u[0]}: ${O*m}px;margin-${u[1]}: ${O*p}px;border-${u[0]}-width: ${O*v}px;border-${u[1]}-width: ${O*E}px;`}}const Us=JSON,Ro=s=>s.toUpperCase(),jo=s=>{const e={};return s.forEach((t,n)=>{e[n]=t}),e},Lo=(s,e,t)=>s.document?s:{document:s,variables:e,requestHeaders:t,signal:void 0},Mo=(s,e,t)=>s.query?s:{query:s,variables:e,requestHeaders:t,signal:void 0},Uo=(s,e)=>s.documents?s:{documents:s,requestHeaders:e,signal:void 0};function Kn(s,e){if(!!!s)throw new Error(e)}function Fo(s){return typeof s=="object"&&s!==null}function $o(s,e){if(!!!s)throw new Error(e??"Unexpected invariant triggered.")}const Bo=/\r\n|[\n\r]/g;function Is(s,e){let t=0,n=1;for(const r of s.body.matchAll(Bo)){if(typeof r.index=="number"||$o(!1),r.index>=e)break;t=r.index+r[0].length,n+=1}return{line:n,column:e+1-t}}function Vo(s){return Gi(s.source,Is(s.source,s.start))}function Gi(s,e){const t=s.locationOffset.column-1,n="".padStart(t)+s.body,r=e.line-1,i=s.locationOffset.line-1,o=e.line+i,l=e.line===1?t:0,a=e.column+l,u=`${s.name}:${o}:${a}
`,c=n.split(/\r\n|[\n\r]/g),d=c[r];if(d.length>120){const f=Math.floor(a/80),m=a%80,p=[];for(let v=0;v<d.length;v+=80)p.push(d.slice(v,v+80));return u+ei([[`${o} |`,p[0]],...p.slice(1,f+1).map(v=>["|",v]),["|","^".padStart(m)],["|",p[f+1]]])}return u+ei([[`${o-1} |`,c[r-1]],[`${o} |`,d],["|","^".padStart(a)],[`${o+1} |`,c[r+1]]])}function ei(s){const e=s.filter(([n,r])=>r!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,r])=>n.padStart(t)+(r?" "+r:"")).join(`
`)}function qo(s){const e=s[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:s[1],positions:s[2],path:s[3],originalError:s[4],extensions:s[5]}:e}class Fs extends Error{constructor(e,...t){var n,r,i;const{nodes:o,source:l,positions:a,path:u,originalError:c,extensions:d}=qo(t);super(e),this.name="GraphQLError",this.path=u??void 0,this.originalError=c??void 0,this.nodes=ti(Array.isArray(o)?o:o?[o]:void 0);const f=ti((n=this.nodes)===null||n===void 0?void 0:n.map(p=>p.loc).filter(p=>p!=null));this.source=l??(f==null||(r=f[0])===null||r===void 0?void 0:r.source),this.positions=a??(f==null?void 0:f.map(p=>p.start)),this.locations=a&&l?a.map(p=>Is(l,p)):f==null?void 0:f.map(p=>Is(p.source,p.start));const m=Fo(c==null?void 0:c.extensions)?c==null?void 0:c.extensions:void 0;this.extensions=(i=d??m)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Fs):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+Vo(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Gi(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function ti(s){return s===void 0||s.length===0?void 0:s}function Fe(s,e,t){return new Fs(`Syntax Error: ${t}`,{source:s,positions:[e]})}class Go{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class zi{constructor(e,t,n,r,i,o){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Hi={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},zo=new Set(Object.keys(Hi));function ni(s){const e=s==null?void 0:s.kind;return typeof e=="string"&&zo.has(e)}var vn;(function(s){s.QUERY="query",s.MUTATION="mutation",s.SUBSCRIPTION="subscription"})(vn||(vn={}));var Ss;(function(s){s.QUERY="QUERY",s.MUTATION="MUTATION",s.SUBSCRIPTION="SUBSCRIPTION",s.FIELD="FIELD",s.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",s.FRAGMENT_SPREAD="FRAGMENT_SPREAD",s.INLINE_FRAGMENT="INLINE_FRAGMENT",s.VARIABLE_DEFINITION="VARIABLE_DEFINITION",s.SCHEMA="SCHEMA",s.SCALAR="SCALAR",s.OBJECT="OBJECT",s.FIELD_DEFINITION="FIELD_DEFINITION",s.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",s.INTERFACE="INTERFACE",s.UNION="UNION",s.ENUM="ENUM",s.ENUM_VALUE="ENUM_VALUE",s.INPUT_OBJECT="INPUT_OBJECT",s.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Ss||(Ss={}));var J;(function(s){s.NAME="Name",s.DOCUMENT="Document",s.OPERATION_DEFINITION="OperationDefinition",s.VARIABLE_DEFINITION="VariableDefinition",s.SELECTION_SET="SelectionSet",s.FIELD="Field",s.ARGUMENT="Argument",s.FRAGMENT_SPREAD="FragmentSpread",s.INLINE_FRAGMENT="InlineFragment",s.FRAGMENT_DEFINITION="FragmentDefinition",s.VARIABLE="Variable",s.INT="IntValue",s.FLOAT="FloatValue",s.STRING="StringValue",s.BOOLEAN="BooleanValue",s.NULL="NullValue",s.ENUM="EnumValue",s.LIST="ListValue",s.OBJECT="ObjectValue",s.OBJECT_FIELD="ObjectField",s.DIRECTIVE="Directive",s.NAMED_TYPE="NamedType",s.LIST_TYPE="ListType",s.NON_NULL_TYPE="NonNullType",s.SCHEMA_DEFINITION="SchemaDefinition",s.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",s.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",s.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",s.FIELD_DEFINITION="FieldDefinition",s.INPUT_VALUE_DEFINITION="InputValueDefinition",s.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",s.UNION_TYPE_DEFINITION="UnionTypeDefinition",s.ENUM_TYPE_DEFINITION="EnumTypeDefinition",s.ENUM_VALUE_DEFINITION="EnumValueDefinition",s.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",s.DIRECTIVE_DEFINITION="DirectiveDefinition",s.SCHEMA_EXTENSION="SchemaExtension",s.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",s.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",s.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",s.UNION_TYPE_EXTENSION="UnionTypeExtension",s.ENUM_TYPE_EXTENSION="EnumTypeExtension",s.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(J||(J={}));function Ns(s){return s===9||s===32}function Dn(s){return s>=48&&s<=57}function Ji(s){return s>=97&&s<=122||s>=65&&s<=90}function Ki(s){return Ji(s)||s===95}function Ho(s){return Ji(s)||Dn(s)||s===95}function Jo(s){var e;let t=Number.MAX_SAFE_INTEGER,n=null,r=-1;for(let o=0;o<s.length;++o){var i;const l=s[o],a=Ko(l);a!==l.length&&(n=(i=n)!==null&&i!==void 0?i:o,r=o,o!==0&&a<t&&(t=a))}return s.map((o,l)=>l===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,r+1)}function Ko(s){let e=0;for(;e<s.length&&Ns(s.charCodeAt(e));)++e;return e}function Yo(s,e){const t=s.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),r=n.length===1,i=n.length>1&&n.slice(1).every(m=>m.length===0||Ns(m.charCodeAt(0))),o=t.endsWith('\\"""'),l=s.endsWith('"')&&!o,a=s.endsWith("\\"),u=l||a,c=!(e!=null&&e.minimize)&&(!r||s.length>70||u||i||o);let d="";const f=r&&Ns(s.charCodeAt(0));return(c&&!f||i)&&(d+=`
`),d+=t,(c||u)&&(d+=`
`),'"""'+d+'"""'}var S;(function(s){s.SOF="<SOF>",s.EOF="<EOF>",s.BANG="!",s.DOLLAR="$",s.AMP="&",s.PAREN_L="(",s.PAREN_R=")",s.SPREAD="...",s.COLON=":",s.EQUALS="=",s.AT="@",s.BRACKET_L="[",s.BRACKET_R="]",s.BRACE_L="{",s.PIPE="|",s.BRACE_R="}",s.NAME="Name",s.INT="Int",s.FLOAT="Float",s.STRING="String",s.BLOCK_STRING="BlockString",s.COMMENT="Comment"})(S||(S={}));class Wo{constructor(e){const t=new zi(S.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==S.EOF)do if(e.next)e=e.next;else{const t=Xo(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===S.COMMENT);return e}}function Zo(s){return s===S.BANG||s===S.DOLLAR||s===S.AMP||s===S.PAREN_L||s===S.PAREN_R||s===S.SPREAD||s===S.COLON||s===S.EQUALS||s===S.AT||s===S.BRACKET_L||s===S.BRACKET_R||s===S.BRACE_L||s===S.PIPE||s===S.BRACE_R}function gn(s){return s>=0&&s<=55295||s>=57344&&s<=1114111}function os(s,e){return Yi(s.charCodeAt(e))&&Wi(s.charCodeAt(e+1))}function Yi(s){return s>=55296&&s<=56319}function Wi(s){return s>=56320&&s<=57343}function Wt(s,e){const t=s.source.body.codePointAt(e);if(t===void 0)return S.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Ce(s,e,t,n,r){const i=s.line,o=1+t-s.lineStart;return new zi(e,t,n,i,o,r)}function Xo(s,e){const t=s.source.body,n=t.length;let r=e;for(;r<n;){const i=t.charCodeAt(r);switch(i){case 65279:case 9:case 32:case 44:++r;continue;case 10:++r,++s.line,s.lineStart=r;continue;case 13:t.charCodeAt(r+1)===10?r+=2:++r,++s.line,s.lineStart=r;continue;case 35:return Qo(s,r);case 33:return Ce(s,S.BANG,r,r+1);case 36:return Ce(s,S.DOLLAR,r,r+1);case 38:return Ce(s,S.AMP,r,r+1);case 40:return Ce(s,S.PAREN_L,r,r+1);case 41:return Ce(s,S.PAREN_R,r,r+1);case 46:if(t.charCodeAt(r+1)===46&&t.charCodeAt(r+2)===46)return Ce(s,S.SPREAD,r,r+3);break;case 58:return Ce(s,S.COLON,r,r+1);case 61:return Ce(s,S.EQUALS,r,r+1);case 64:return Ce(s,S.AT,r,r+1);case 91:return Ce(s,S.BRACKET_L,r,r+1);case 93:return Ce(s,S.BRACKET_R,r,r+1);case 123:return Ce(s,S.BRACE_L,r,r+1);case 124:return Ce(s,S.PIPE,r,r+1);case 125:return Ce(s,S.BRACE_R,r,r+1);case 34:return t.charCodeAt(r+1)===34&&t.charCodeAt(r+2)===34?ia(s,r):ta(s,r)}if(Dn(i)||i===45)return ea(s,r,i);if(Ki(i))return oa(s,r);throw Fe(s.source,r,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:gn(i)||os(t,r)?`Unexpected character: ${Wt(s,r)}.`:`Invalid character: ${Wt(s,r)}.`)}return Ce(s,S.EOF,n,n)}function Qo(s,e){const t=s.source.body,n=t.length;let r=e+1;for(;r<n;){const i=t.charCodeAt(r);if(i===10||i===13)break;if(gn(i))++r;else if(os(t,r))r+=2;else break}return Ce(s,S.COMMENT,e,r,t.slice(e+1,r))}function ea(s,e,t){const n=s.source.body;let r=e,i=t,o=!1;if(i===45&&(i=n.charCodeAt(++r)),i===48){if(i=n.charCodeAt(++r),Dn(i))throw Fe(s.source,r,`Invalid number, unexpected digit after 0: ${Wt(s,r)}.`)}else r=ps(s,r,i),i=n.charCodeAt(r);if(i===46&&(o=!0,i=n.charCodeAt(++r),r=ps(s,r,i),i=n.charCodeAt(r)),(i===69||i===101)&&(o=!0,i=n.charCodeAt(++r),(i===43||i===45)&&(i=n.charCodeAt(++r)),r=ps(s,r,i),i=n.charCodeAt(r)),i===46||Ki(i))throw Fe(s.source,r,`Invalid number, expected digit but got: ${Wt(s,r)}.`);return Ce(s,o?S.FLOAT:S.INT,e,r,n.slice(e,r))}function ps(s,e,t){if(!Dn(t))throw Fe(s.source,e,`Invalid number, expected digit but got: ${Wt(s,e)}.`);const n=s.source.body;let r=e+1;for(;Dn(n.charCodeAt(r));)++r;return r}function ta(s,e){const t=s.source.body,n=t.length;let r=e+1,i=r,o="";for(;r<n;){const l=t.charCodeAt(r);if(l===34)return o+=t.slice(i,r),Ce(s,S.STRING,e,r+1,o);if(l===92){o+=t.slice(i,r);const a=t.charCodeAt(r+1)===117?t.charCodeAt(r+2)===123?na(s,r):sa(s,r):ra(s,r);o+=a.value,r+=a.size,i=r;continue}if(l===10||l===13)break;if(gn(l))++r;else if(os(t,r))r+=2;else throw Fe(s.source,r,`Invalid character within String: ${Wt(s,r)}.`)}throw Fe(s.source,r,"Unterminated string.")}function na(s,e){const t=s.source.body;let n=0,r=3;for(;r<12;){const i=t.charCodeAt(e+r++);if(i===125){if(r<5||!gn(n))break;return{value:String.fromCodePoint(n),size:r}}if(n=n<<4|kn(i),n<0)break}throw Fe(s.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+r)}".`)}function sa(s,e){const t=s.source.body,n=si(t,e+2);if(gn(n))return{value:String.fromCodePoint(n),size:6};if(Yi(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const r=si(t,e+8);if(Wi(r))return{value:String.fromCodePoint(n,r),size:12}}throw Fe(s.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function si(s,e){return kn(s.charCodeAt(e))<<12|kn(s.charCodeAt(e+1))<<8|kn(s.charCodeAt(e+2))<<4|kn(s.charCodeAt(e+3))}function kn(s){return s>=48&&s<=57?s-48:s>=65&&s<=70?s-55:s>=97&&s<=102?s-87:-1}function ra(s,e){const t=s.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Fe(s.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function ia(s,e){const t=s.source.body,n=t.length;let r=s.lineStart,i=e+3,o=i,l="";const a=[];for(;i<n;){const u=t.charCodeAt(i);if(u===34&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34){l+=t.slice(o,i),a.push(l);const c=Ce(s,S.BLOCK_STRING,e,i+3,Jo(a).join(`
`));return s.line+=a.length-1,s.lineStart=r,c}if(u===92&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34&&t.charCodeAt(i+3)===34){l+=t.slice(o,i),o=i+1,i+=4;continue}if(u===10||u===13){l+=t.slice(o,i),a.push(l),u===13&&t.charCodeAt(i+1)===10?i+=2:++i,l="",o=i,r=i;continue}if(gn(u))++i;else if(os(t,i))i+=2;else throw Fe(s.source,i,`Invalid character within String: ${Wt(s,i)}.`)}throw Fe(s.source,i,"Unterminated string.")}function oa(s,e){const t=s.source.body,n=t.length;let r=e+1;for(;r<n;){const i=t.charCodeAt(r);if(Ho(i))++r;else break}return Ce(s,S.NAME,e,r,t.slice(e,r))}const aa=10,Zi=2;function $s(s){return as(s,[])}function as(s,e){switch(typeof s){case"string":return JSON.stringify(s);case"function":return s.name?`[function ${s.name}]`:"[function]";case"object":return la(s,e);default:return String(s)}}function la(s,e){if(s===null)return"null";if(e.includes(s))return"[Circular]";const t=[...e,s];if(ca(s)){const n=s.toJSON();if(n!==s)return typeof n=="string"?n:as(n,t)}else if(Array.isArray(s))return ha(s,t);return ua(s,t)}function ca(s){return typeof s.toJSON=="function"}function ua(s,e){const t=Object.entries(s);return t.length===0?"{}":e.length>Zi?"["+da(s)+"]":"{ "+t.map(([r,i])=>r+": "+as(i,e)).join(", ")+" }"}function ha(s,e){if(s.length===0)return"[]";if(e.length>Zi)return"[Array]";const t=Math.min(aa,s.length),n=s.length-t,r=[];for(let i=0;i<t;++i)r.push(as(s[i],e));return n===1?r.push("... 1 more item"):n>1&&r.push(`... ${n} more items`),"["+r.join(", ")+"]"}function da(s){const e=Object.prototype.toString.call(s).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof s.constructor=="function"){const t=s.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const fa=globalThis.process?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var n;const r=t.prototype[Symbol.toStringTag],i=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(r===i){const o=$s(e);throw new Error(`Cannot use ${r} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Xi{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Kn(!1,`Body must be a string. Received: ${$s(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Kn(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Kn(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function pa(s){return fa(s,Xi)}function ma(s,e){return new va(s,e).parseDocument()}class va{constructor(e,t={}){const n=pa(e)?e:new Xi(e);this._lexer=new Wo(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(S.NAME);return this.node(e,{kind:J.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:J.DOCUMENT,definitions:this.many(S.SOF,this.parseDefinition,S.EOF)})}parseDefinition(){if(this.peek(S.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===S.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Fe(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(S.BRACE_L))return this.node(e,{kind:J.OPERATION_DEFINITION,operation:vn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(S.NAME)&&(n=this.parseName()),this.node(e,{kind:J.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(S.NAME);switch(e.value){case"query":return vn.QUERY;case"mutation":return vn.MUTATION;case"subscription":return vn.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(S.PAREN_L,this.parseVariableDefinition,S.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:J.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(S.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(S.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(S.DOLLAR),this.node(e,{kind:J.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:J.SELECTION_SET,selections:this.many(S.BRACE_L,this.parseSelection,S.BRACE_R)})}parseSelection(){return this.peek(S.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,r;return this.expectOptionalToken(S.COLON)?(n=t,r=this.parseName()):r=t,this.node(e,{kind:J.FIELD,alias:n,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(S.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(S.PAREN_L,t,S.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(S.COLON),this.node(t,{kind:J.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(S.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(S.NAME)?this.node(e,{kind:J.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:J.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case S.BRACKET_L:return this.parseList(e);case S.BRACE_L:return this.parseObject(e);case S.INT:return this.advanceLexer(),this.node(t,{kind:J.INT,value:t.value});case S.FLOAT:return this.advanceLexer(),this.node(t,{kind:J.FLOAT,value:t.value});case S.STRING:case S.BLOCK_STRING:return this.parseStringLiteral();case S.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:J.BOOLEAN,value:!0});case"false":return this.node(t,{kind:J.BOOLEAN,value:!1});case"null":return this.node(t,{kind:J.NULL});default:return this.node(t,{kind:J.ENUM,value:t.value})}case S.DOLLAR:if(e)if(this.expectToken(S.DOLLAR),this._lexer.token.kind===S.NAME){const n=this._lexer.token.value;throw Fe(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:J.STRING,value:e.value,block:e.kind===S.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:J.LIST,values:this.any(S.BRACKET_L,t,S.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:J.OBJECT,fields:this.any(S.BRACE_L,t,S.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(S.COLON),this.node(t,{kind:J.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(S.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(S.AT),this.node(t,{kind:J.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(S.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(S.BRACKET_R),t=this.node(e,{kind:J.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(S.BANG)?this.node(e,{kind:J.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:J.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(S.STRING)||this.peek(S.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),r=this.many(S.BRACE_L,this.parseOperationTypeDefinition,S.BRACE_R);return this.node(e,{kind:J.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(S.COLON);const n=this.parseNamedType();return this.node(e,{kind:J.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),r=this.parseConstDirectives();return this.node(e,{kind:J.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:J.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(S.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(S.BRACE_L,this.parseFieldDefinition,S.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(S.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:J.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(S.PAREN_L,this.parseInputValueDef,S.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(S.COLON);const r=this.parseTypeReference();let i;this.expectOptionalToken(S.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:J.INPUT_VALUE_DEFINITION,description:t,name:n,type:r,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:J.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:J.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(S.EQUALS)?this.delimitedMany(S.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:J.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i})}parseEnumValuesDefinition(){return this.optionalMany(S.BRACE_L,this.parseEnumValueDefinition,S.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),r=this.parseConstDirectives();return this.node(e,{kind:J.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Fe(this._lexer.source,this._lexer.token.start,`${Bn(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:J.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(S.BRACE_L,this.parseInputValueDef,S.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===S.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(S.BRACE_L,this.parseOperationTypeDefinition,S.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:J.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:J.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(n.length===0&&r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:J.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(n.length===0&&r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:J.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseUnionMemberTypes();if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:J.UNION_TYPE_EXTENSION,name:t,directives:n,types:r})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseEnumValuesDefinition();if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:J.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),r=this.parseInputFieldsDefinition();if(n.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:J.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(S.AT);const n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:J.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(S.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Ss,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new Go(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Fe(this._lexer.source,t.start,`Expected ${Qi(e)}, found ${Bn(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===S.NAME&&t.value===e)this.advanceLexer();else throw Fe(this._lexer.source,t.start,`Expected "${e}", found ${Bn(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===S.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return Fe(this._lexer.source,t.start,`Unexpected ${Bn(t)}.`)}any(e,t,n){this.expectToken(e);const r=[];for(;!this.expectOptionalToken(n);)r.push(t.call(this));return r}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]}many(e,t,n){this.expectToken(e);const r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==S.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw Fe(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Bn(s){const e=s.value;return Qi(s.kind)+(e!=null?` "${e}"`:"")}function Qi(s){return Zo(s)?`"${s}"`:s}function _a(s){return`"${s.replace(ga,ya)}"`}const ga=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function ya(s){return ba[s.charCodeAt(0)]}const ba=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],wa=Object.freeze({});function Ea(s,e,t=Hi){const n=new Map;for(const O of Object.values(J))n.set(O,Ta(e,O));let r,i=Array.isArray(s),o=[s],l=-1,a=[],u=s,c,d;const f=[],m=[];do{l++;const O=l===o.length,T=O&&a.length!==0;if(O){if(c=m.length===0?void 0:f[f.length-1],u=d,d=m.pop(),T)if(i){u=u.slice();let R=0;for(const[M,ee]of a){const L=M-R;ee===null?(u.splice(L,1),R++):u[L]=ee}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(const[R,M]of a)u[R]=M}l=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else if(d){if(c=i?l:o[l],u=d[c],u==null)continue;f.push(c)}let N;if(!Array.isArray(u)){var p,v;ni(u)||Kn(!1,`Invalid AST Node: ${$s(u)}.`);const R=O?(p=n.get(u.kind))===null||p===void 0?void 0:p.leave:(v=n.get(u.kind))===null||v===void 0?void 0:v.enter;if(N=R==null?void 0:R.call(e,u,c,d,f,m),N===wa)break;if(N===!1){if(!O){f.pop();continue}}else if(N!==void 0&&(a.push([c,N]),!O))if(ni(N))u=N;else{f.pop();continue}}if(N===void 0&&T&&a.push([c,u]),O)f.pop();else{var E;r={inArray:i,index:l,keys:o,edits:a,prev:r},i=Array.isArray(u),o=i?u:(E=t[u.kind])!==null&&E!==void 0?E:[],l=-1,a=[],d&&m.push(d),d=u}}while(r!==void 0);return a.length!==0?a[a.length-1][1]:s}function Ta(s,e){const t=s[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:s.enter,leave:s.leave}}function Oa(s){return Ea(s,Aa)}const ka=80,Aa={Name:{leave:s=>s.value},Variable:{leave:s=>"$"+s.name},Document:{leave:s=>U(s.definitions,`

`)},OperationDefinition:{leave(s){const e=ie("(",U(s.variableDefinitions,", "),")"),t=U([s.operation,U([s.name,e]),U(s.directives," ")]," ");return(t==="query"?"":t+" ")+s.selectionSet}},VariableDefinition:{leave:({variable:s,type:e,defaultValue:t,directives:n})=>s+": "+e+ie(" = ",t)+ie(" ",U(n," "))},SelectionSet:{leave:({selections:s})=>Et(s)},Field:{leave({alias:s,name:e,arguments:t,directives:n,selectionSet:r}){const i=ie("",s,": ")+e;let o=i+ie("(",U(t,", "),")");return o.length>ka&&(o=i+ie(`(
`,Yn(U(t,`
`)),`
)`)),U([o,U(n," "),r]," ")}},Argument:{leave:({name:s,value:e})=>s+": "+e},FragmentSpread:{leave:({name:s,directives:e})=>"..."+s+ie(" ",U(e," "))},InlineFragment:{leave:({typeCondition:s,directives:e,selectionSet:t})=>U(["...",ie("on ",s),U(e," "),t]," ")},FragmentDefinition:{leave:({name:s,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:r})=>`fragment ${s}${ie("(",U(t,", "),")")} on ${e} ${ie("",U(n," ")," ")}`+r},IntValue:{leave:({value:s})=>s},FloatValue:{leave:({value:s})=>s},StringValue:{leave:({value:s,block:e})=>e?Yo(s):_a(s)},BooleanValue:{leave:({value:s})=>s?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:s})=>s},ListValue:{leave:({values:s})=>"["+U(s,", ")+"]"},ObjectValue:{leave:({fields:s})=>"{"+U(s,", ")+"}"},ObjectField:{leave:({name:s,value:e})=>s+": "+e},Directive:{leave:({name:s,arguments:e})=>"@"+s+ie("(",U(e,", "),")")},NamedType:{leave:({name:s})=>s},ListType:{leave:({type:s})=>"["+s+"]"},NonNullType:{leave:({type:s})=>s+"!"},SchemaDefinition:{leave:({description:s,directives:e,operationTypes:t})=>ie("",s,`
`)+U(["schema",U(e," "),Et(t)]," ")},OperationTypeDefinition:{leave:({operation:s,type:e})=>s+": "+e},ScalarTypeDefinition:{leave:({description:s,name:e,directives:t})=>ie("",s,`
`)+U(["scalar",e,U(t," ")]," ")},ObjectTypeDefinition:{leave:({description:s,name:e,interfaces:t,directives:n,fields:r})=>ie("",s,`
`)+U(["type",e,ie("implements ",U(t," & ")),U(n," "),Et(r)]," ")},FieldDefinition:{leave:({description:s,name:e,arguments:t,type:n,directives:r})=>ie("",s,`
`)+e+(ri(t)?ie(`(
`,Yn(U(t,`
`)),`
)`):ie("(",U(t,", "),")"))+": "+n+ie(" ",U(r," "))},InputValueDefinition:{leave:({description:s,name:e,type:t,defaultValue:n,directives:r})=>ie("",s,`
`)+U([e+": "+t,ie("= ",n),U(r," ")]," ")},InterfaceTypeDefinition:{leave:({description:s,name:e,interfaces:t,directives:n,fields:r})=>ie("",s,`
`)+U(["interface",e,ie("implements ",U(t," & ")),U(n," "),Et(r)]," ")},UnionTypeDefinition:{leave:({description:s,name:e,directives:t,types:n})=>ie("",s,`
`)+U(["union",e,U(t," "),ie("= ",U(n," | "))]," ")},EnumTypeDefinition:{leave:({description:s,name:e,directives:t,values:n})=>ie("",s,`
`)+U(["enum",e,U(t," "),Et(n)]," ")},EnumValueDefinition:{leave:({description:s,name:e,directives:t})=>ie("",s,`
`)+U([e,U(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:s,name:e,directives:t,fields:n})=>ie("",s,`
`)+U(["input",e,U(t," "),Et(n)]," ")},DirectiveDefinition:{leave:({description:s,name:e,arguments:t,repeatable:n,locations:r})=>ie("",s,`
`)+"directive @"+e+(ri(t)?ie(`(
`,Yn(U(t,`
`)),`
)`):ie("(",U(t,", "),")"))+(n?" repeatable":"")+" on "+U(r," | ")},SchemaExtension:{leave:({directives:s,operationTypes:e})=>U(["extend schema",U(s," "),Et(e)]," ")},ScalarTypeExtension:{leave:({name:s,directives:e})=>U(["extend scalar",s,U(e," ")]," ")},ObjectTypeExtension:{leave:({name:s,interfaces:e,directives:t,fields:n})=>U(["extend type",s,ie("implements ",U(e," & ")),U(t," "),Et(n)]," ")},InterfaceTypeExtension:{leave:({name:s,interfaces:e,directives:t,fields:n})=>U(["extend interface",s,ie("implements ",U(e," & ")),U(t," "),Et(n)]," ")},UnionTypeExtension:{leave:({name:s,directives:e,types:t})=>U(["extend union",s,U(e," "),ie("= ",U(t," | "))]," ")},EnumTypeExtension:{leave:({name:s,directives:e,values:t})=>U(["extend enum",s,U(e," "),Et(t)]," ")},InputObjectTypeExtension:{leave:({name:s,directives:e,fields:t})=>U(["extend input",s,U(e," "),Et(t)]," ")}};function U(s,e=""){var t;return(t=s==null?void 0:s.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function Et(s){return ie(`{
`,Yn(U(s,`
`)),`
}`)}function ie(s,e,t=""){return e!=null&&e!==""?s+e+t:""}function Yn(s){return ie("  ",s.replace(/\n/g,`
  `))}function ri(s){var e;return(e=s==null?void 0:s.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const ii=s=>{var n,r;let e;const t=s.definitions.filter(i=>i.kind==="OperationDefinition");return t.length===1&&(e=(r=(n=t[0])==null?void 0:n.name)==null?void 0:r.value),e},ms=s=>{if(typeof s=="string"){let t;try{const n=ma(s);t=ii(n)}catch{}return{query:s,operationName:t}}const e=ii(s);return{query:Oa(s),operationName:e}};class Sn extends Error{constructor(e,t){const n=`${Sn.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`;super(n),Object.setPrototypeOf(this,Sn.prototype),this.response=e,this.request=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Sn)}static extractMessage(e){var t,n;return((n=(t=e.errors)==null?void 0:t[0])==null?void 0:n.message)??`GraphQL Error (Code: ${e.status})`}}var Cs={exports:{}};(function(s,e){var t=typeof self<"u"?self:fo,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function a(w){return w&&DataView.prototype.isPrototypeOf(w)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(w){return w&&u.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function f(w){return typeof w!="string"&&(w=String(w)),w}function m(w){var A={next:function(){var P=w.shift();return{done:P===void 0,value:P}}};return l.iterable&&(A[Symbol.iterator]=function(){return A}),A}function p(w){this.map={},w instanceof p?w.forEach(function(A,P){this.append(P,A)},this):Array.isArray(w)?w.forEach(function(A){this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}p.prototype.append=function(w,A){w=d(w),A=f(A);var P=this.map[w];this.map[w]=P?P+", "+A:A},p.prototype.delete=function(w){delete this.map[d(w)]},p.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},p.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},p.prototype.set=function(w,A){this.map[d(w)]=f(A)},p.prototype.forEach=function(w,A){for(var P in this.map)this.map.hasOwnProperty(P)&&w.call(A,this.map[P],P,this)},p.prototype.keys=function(){var w=[];return this.forEach(function(A,P){w.push(P)}),m(w)},p.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),m(w)},p.prototype.entries=function(){var w=[];return this.forEach(function(A,P){w.push([P,A])}),m(w)},l.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function v(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function E(w){return new Promise(function(A,P){w.onload=function(){A(w.result)},w.onerror=function(){P(w.error)}})}function O(w){var A=new FileReader,P=E(A);return A.readAsArrayBuffer(w),P}function T(w){var A=new FileReader,P=E(A);return A.readAsText(w),P}function N(w){for(var A=new Uint8Array(w),P=new Array(A.length),$=0;$<A.length;$++)P[$]=String.fromCharCode(A[$]);return P.join("")}function R(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function M(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:l.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:l.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():l.arrayBuffer&&l.blob&&a(w)?(this._bodyArrayBuffer=R(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||c(w))?this._bodyArrayBuffer=R(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var ee=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function L(w){var A=w.toUpperCase();return ee.indexOf(A)>-1?A:w}function x(w,A){A=A||{};var P=A.body;if(w instanceof x){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new p(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!P&&w._bodyInit!=null&&(P=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new p(A.headers)),this.method=L(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(P)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function z(w){var A=new FormData;return w.trim().split("&").forEach(function(P){if(P){var $=P.split("="),q=$.shift().replace(/\+/g," "),I=$.join("=").replace(/\+/g," ");A.append(decodeURIComponent(q),decodeURIComponent(I))}}),A}function Q(w){var A=new p,P=w.replace(/\r?\n[\t ]+/g," ");return P.split(/\r?\n/).forEach(function($){var q=$.split(":"),I=q.shift().trim();if(I){var B=q.join(":").trim();A.append(I,B)}}),A}M.call(x.prototype);function se(w,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new p(A.headers),this.url=A.url||"",this._initBody(w)}M.call(se.prototype),se.prototype.clone=function(){return new se(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},se.error=function(){var w=new se(null,{status:0,statusText:""});return w.type="error",w};var re=[301,302,303,307,308];se.redirect=function(w,A){if(re.indexOf(A)===-1)throw new RangeError("Invalid status code");return new se(null,{status:A,headers:{location:w}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,P){this.message=A,this.name=P;var $=Error(A);this.stack=$.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function te(w,A){return new Promise(function(P,$){var q=new x(w,A);if(q.signal&&q.signal.aborted)return $(new o.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function B(){I.abort()}I.onload=function(){var F={status:I.status,statusText:I.statusText,headers:Q(I.getAllResponseHeaders()||"")};F.url="responseURL"in I?I.responseURL:F.headers.get("X-Request-URL");var j="response"in I?I.response:I.responseText;P(new se(j,F))},I.onerror=function(){$(new TypeError("Network request failed"))},I.ontimeout=function(){$(new TypeError("Network request failed"))},I.onabort=function(){$(new o.DOMException("Aborted","AbortError"))},I.open(q.method,q.url,!0),q.credentials==="include"?I.withCredentials=!0:q.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&l.blob&&(I.responseType="blob"),q.headers.forEach(function(F,j){I.setRequestHeader(j,F)}),q.signal&&(q.signal.addEventListener("abort",B),I.onreadystatechange=function(){I.readyState===4&&q.signal.removeEventListener("abort",B)}),I.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return te.polyfill=!0,i.fetch||(i.fetch=te,i.Headers=p,i.Request=x,i.Response=se),o.Headers=p,o.Request=x,o.Response=se,o.fetch=te,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,s.exports=e})(Cs,Cs.exports);var xn=Cs.exports;const _n=Fi(xn),Un=ho({__proto__:null,default:_n},[xn]),un=s=>{let e={};return s&&(typeof Headers<"u"&&s instanceof Headers||Un&&xn.Headers&&s instanceof xn.Headers?e=jo(s):Array.isArray(s)?s.forEach(([t,n])=>{t&&n!==void 0&&(e[t]=n)}):e=s),e},oi=s=>s.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),Ia=s=>{if(!Array.isArray(s.query)){const n=s,r=[`query=${encodeURIComponent(oi(n.query))}`];return s.variables&&r.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&r.push(`operationName=${encodeURIComponent(n.operationName)}`),r.join("&")}if(typeof s.variables<"u"&&!Array.isArray(s.variables))throw new Error("Cannot create query with given variable type, array expected");const e=s,t=s.query.reduce((n,r,i)=>(n.push({query:oi(r),variables:e.variables?e.jsonSerializer.stringify(e.variables[i]):void 0}),n),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},Sa=s=>async e=>{const{url:t,query:n,variables:r,operationName:i,fetch:o,fetchOptions:l,middleware:a}=e,u={...e.headers};let c="",d;s==="POST"?(d=Ca(n,r,i,l.jsonSerializer),typeof d=="string"&&(u["Content-Type"]="application/json")):c=Ia({query:n,variables:r,operationName:i,jsonSerializer:l.jsonSerializer??Us});const f={method:s,headers:u,body:d,...l};let m=t,p=f;if(a){const v=await Promise.resolve(a({...f,url:t,operationName:i,variables:r})),{url:E,...O}=v;m=E,p=O}return c&&(m=`${m}?${c}`),await o(m,p)};class Na{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=async(...n)=>{const[r,i,o]=n,l=Mo(r,i,o),{headers:a,fetch:u=_n,method:c="POST",requestMiddleware:d,responseMiddleware:f,...m}=this.requestConfig,{url:p}=this;l.signal!==void 0&&(m.signal=l.signal);const{operationName:v}=ms(l.query);return vs({url:p,query:l.query,variables:l.variables,headers:{...un(_s(a)),...un(l.requestHeaders)},operationName:v,fetch:u,method:c,fetchOptions:m,middleware:d}).then(E=>(f&&f(E),E)).catch(E=>{throw f&&f(E),E})}}async request(e,...t){const[n,r]=t,i=Lo(e,n,r),{headers:o,fetch:l=_n,method:a="POST",requestMiddleware:u,responseMiddleware:c,...d}=this.requestConfig,{url:f}=this;i.signal!==void 0&&(d.signal=i.signal);const{query:m,operationName:p}=ms(i.document);return vs({url:f,query:m,variables:i.variables,headers:{...un(_s(o)),...un(i.requestHeaders)},operationName:p,fetch:l,method:a,fetchOptions:d,middleware:u}).then(v=>(c&&c(v),v.data)).catch(v=>{throw c&&c(v),v})}batchRequests(e,t){const n=Uo(e,t),{headers:r,...i}=this.requestConfig;n.signal!==void 0&&(i.signal=n.signal);const o=n.documents.map(({document:a})=>ms(a).query),l=n.documents.map(({variables:a})=>a);return vs({url:this.url,query:o,variables:l,headers:{...un(_s(r)),...un(n.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??_n,method:this.requestConfig.method||"POST",fetchOptions:i,middleware:this.requestConfig.requestMiddleware}).then(a=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a.data)).catch(a=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:n}=this.requestConfig;return n?n[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const vs=async s=>{const{query:e,variables:t,fetchOptions:n}=s,r=Sa(Ro(s.method??"post")),i=Array.isArray(s.query),o=await r(s),l=await Da(o,n.jsonSerializer??Us),a=Array.isArray(l)?!l.some(({data:c})=>!c):!!l.data,u=Array.isArray(l)||!l.errors||Array.isArray(l.errors)&&!l.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(o.ok&&u&&a){const{errors:c,...d}=(Array.isArray(l),l),f=n.errorPolicy==="ignore"?d:l;return{...i?{data:f}:f,headers:o.headers,status:o.status}}else{const c=typeof l=="string"?{error:l}:l;throw new Sn({...c,status:o.status,headers:o.headers},{query:e,variables:t})}},Ca=(s,e,t,n)=>{const r=n??Us;if(!Array.isArray(s))return r.stringify({query:s,variables:e,operationName:t});if(typeof e<"u"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");const i=s.reduce((o,l,a)=>(o.push({query:l,variables:e?e[a]:void 0}),o),[]);return r.stringify(i)},Da=async(s,e)=>{let t;return s.headers.forEach((n,r)=>{r.toLowerCase()==="content-type"&&(t=n)}),t&&(t.toLowerCase().startsWith("application/json")||t.toLowerCase().startsWith("application/graphql+json")||t.toLowerCase().startsWith("application/graphql-response+json"))?e.parse(await s.text()):s.text()},_s=s=>typeof s=="function"?s():s;var xa=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Pa=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>xa(void 0,void 0,void 0,function*(){return yield(yield is(()=>Promise.resolve().then(()=>Un),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Bs extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Ra extends Bs{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ja extends Bs{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class La extends Bs{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ma=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};class Ua{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=Pa(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Ma(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let l={},a;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",a=o):typeof o=="string"?(l["Content-Type"]="text/plain",a=o):typeof FormData<"u"&&o instanceof FormData?a=o:(l["Content-Type"]="application/json",a=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:a}).catch(m=>{throw new Ra(m)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new ja(u);if(!u.ok)throw new La(u);let d=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(r){return{data:null,error:r}}})}}class Fa{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_n:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let u=null,c=null,d=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const O=await i.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=O:c=JSON.parse(O))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,m="OK")}catch{i.status===404&&v===""?(f=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("Results contain 0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}}class $a extends Fa{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const r=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${a}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class fn extends $a{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class Ba{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new fn({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new fn({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new fn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new fn({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new fn({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Va="1.7.1",qa={"X-Client-Info":`postgrest-js/${Va}`};class Ga{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},qa),t),this.schema=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Ba(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:r}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let l;n?(i="HEAD",Object.entries(t).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(i="POST",l=t);const a=Object.assign({},this.headers);return r&&(a.Prefer=`count=${r}`),new fn({method:i,url:o,headers:a,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}}var gs,ai;function za(){if(ai)return gs;ai=1;var s=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return gs=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}(),gs}const Ha="websocket",Ja="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Ka=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ya="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Wa=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Za="1.0.34",Xa={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Qa="https://github.com/theturtle32/WebSocket-Node",el={node:">=4.0.0"},tl={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},nl={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},sl={verbose:!1},rl={test:"tape test/unit/*.js",gulp:"gulp"},il="index",ol={lib:"./lib"},al="lib/browser.js",ll="Apache-2.0",cl={name:Ha,description:Ja,keywords:Ka,author:Ya,contributors:Wa,version:Za,repository:Xa,homepage:Qa,engines:el,dependencies:tl,devDependencies:nl,config:sl,scripts:rl,main:il,directories:ol,browser:al,license:ll};var ul=cl.version,zt;if(typeof globalThis=="object")zt=globalThis;else try{zt=za()}catch{}finally{if(!zt&&typeof window<"u"&&(zt=window),!zt)throw new Error("Could not determine global this")}var Pn=zt.WebSocket||zt.MozWebSocket,hl=ul;function eo(s,e){var t;return e?t=new Pn(s,e):t=new Pn(s),t}Pn&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(s){Object.defineProperty(eo,s,{get:function(){return Pn[s]}})});var dl={w3cwebsocket:Pn?eo:null,version:hl};const fl="2.7.3",pl={"X-Client-Info":`realtime-js/${fl}`},ml="1.0.0",to=1e4,vl=1e3;var Nn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Nn||(Nn={}));var it;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(it||(it={}));var Tt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Tt||(Tt={}));var Ds;(function(s){s.websocket="websocket"})(Ds||(Ds={}));var Ht;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Ht||(Ht={}));class no{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class _l{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const a=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class ys{constructor(e,t,n={},r=to){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var li;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(li||(li={}));class Cn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cn.syncState(this.state,r,i,o),this.pendingDiffs.forEach(a=>{this.state=Cn.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Cn.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(E=>E.presence_ref),m=d.map(E=>E.presence_ref),p=c.filter(E=>m.indexOf(E.presence_ref)<0),v=d.filter(E=>f.indexOf(E.presence_ref)<0);p.length>0&&(l[u]=p),v.length>0&&(a[u]=v)}else l[u]=c}),this.syncDiff(i,{joins:l,leaves:a},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const d=e[l].map(m=>m.presence_ref),f=c.filter(m=>d.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[l]=u,r(l,u,a),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _e;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(_e||(_e={}));const ci=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=gl(o,s,e,r),i),{})},gl=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?so(i,o):xs(o)},so=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return El(e,t)}switch(s){case _e.bool:return yl(e);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return bl(e);case _e.json:case _e.jsonb:return wl(e);case _e.timestamp:return Tl(e);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return xs(e);default:return xs(e)}},xs=s=>s,yl=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},bl=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},wl=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},El=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>so(e,l))}return s},Tl=s=>typeof s=="string"?s.replace(" ","T"):s;var ui=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},hi;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(hi||(hi={}));var di;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes"})(di||(di={}));var fi;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class Vs{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new ys(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new no(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Cn(this)}subscribe(e,t=this.timeout){var n,r;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,f=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,m=[];for(let p=0;p<f;p++){const v=d[p],{filter:{event:E,schema:O,table:T,filter:N}}=v,R=u&&u[p];if(R&&R.event===E&&R.schema===O&&R.table===T&&R.filter===N)m.push(Object.assign(Object.assign({},v),{id:R.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return ui(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return ui(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this._on(e,t,n)}send(e,t={}){return new Promise(n=>{var r,i,o;const l=this._push(e.type,e,t.timeout||this.timeout);l.rateLimited&&n("rate limited"),e.type==="broadcast"&&!(!((o=(i=(r=this.params)===null||r===void 0?void 0:r.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.ack)&&n("ok"),l.receive("ok",()=>n("ok")),l.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=it.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new ys(this,Tt.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ys(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=Tt;if(n&&[l,a,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,v,E;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(v=m.filter)===null||v===void 0?void 0:v.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,E,O,T,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const R=m.id,M=(p=m.filter)===null||p===void 0?void 0:p.event;return R&&((v=t.ids)===null||v===void 0?void 0:v.includes(R))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const R=(T=(O=m==null?void 0:m.filter)===null||O===void 0?void 0:O.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return R==="*"||R===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:E,commit_timestamp:O,type:T,errors:N}=p;f=Object.assign(Object.assign({},{schema:v,table:E,commit_timestamp:O,eventType:T,new:{},old:{},errors:N}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Vs.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ci(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ci(e.columns,e.old_record)),t}}var bs=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Ol=()=>{};class kl{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=pl,this.params={},this.timeout=to,this.transport=dl.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Ol,this.conn=null,this.sendBuffer=[],this.serializer=new _l,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Ds.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.eventsPerSecond;r&&(this.eventsPerSecondLimitMs=Math.floor(1e3/r)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new no(()=>bs(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return bs(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return bs(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Nn.connecting:return Ht.Connecting;case Nn.open:return Ht.Open;case Nn.closing:return Ht.Closing;default:return Ht.Closed}}isConnected(){return this.connectionState()===Ht.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new Vs(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e;let o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};if(this.log("push",`${t} ${n} (${i})`,r),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Tt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ml}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||r===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(vl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class qs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Je(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Al extends qs{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pi extends qs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ro=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const io=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>ro(void 0,void 0,void 0,function*(){return yield(yield is(()=>Promise.resolve().then(()=>Un),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Il=()=>ro(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield is(()=>Promise.resolve().then(()=>Un),void 0,import.meta.url)).Response:Response});var yn=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const ws=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Sl=(s,e)=>yn(void 0,void 0,void 0,function*(){const t=yield Il();s instanceof t?s.json().then(n=>{e(new Al(ws(n),s.status||500))}).catch(n=>{e(new pi(ws(n),n))}):e(new pi(ws(s),s))}),Nl=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};function ls(s,e,t,n,r,i){return yn(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,Nl(e,n,r,i)).then(a=>{if(!a.ok)throw a;return n!=null&&n.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Sl(a,l))})})}function Ps(s,e,t,n){return yn(this,void 0,void 0,function*(){return ls(s,"GET",e,t,n)})}function $t(s,e,t,n,r){return yn(this,void 0,void 0,function*(){return ls(s,"POST",e,n,r,t)})}function Cl(s,e,t,n,r){return yn(this,void 0,void 0,function*(){return ls(s,"PUT",e,n,r,t)})}function oo(s,e,t,n,r){return yn(this,void 0,void 0,function*(){return ls(s,"DELETE",e,n,r,t)})}var ct=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const Dl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xl{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=io(r)}uploadOrUpdate(e,t,n,r){return ct(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},mi),r),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl)):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return c.ok?{data:{path:a},error:null}:{data:null,error:yield c.json()}}catch(i){if(Je(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return ct(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const u=Object.assign({upsert:mi.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",u.cacheControl)):(a=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:c});return d.ok?{data:{path:i},error:null}:{data:null,error:yield d.json()}}catch(a){if(Je(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return ct(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const n=yield $t(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),r=new URL(this.url+n.url),i=r.searchParams.get("token");if(!i)throw new qs("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}update(e,t,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return ct(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}copy(e,t){return ct(this,void 0,void 0,function*(){try{return{data:{path:(yield $t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return ct(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield $t(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return ct(this,void 0,void 0,function*(){try{const r=yield $t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}download(e,t){return ct(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ps(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Je(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&r.push(a);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return ct(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}list(e,t,n){return ct(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Dl),t),{prefix:e||""});return{data:yield $t(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Pl="2.5.1",Rl={"X-Client-Info":`storage-js/${Pl}`};var hn=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};class jl{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Rl),t),this.fetch=io(n)}listBuckets(){return hn(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Je(e))return{data:null,error:e};throw e}})}getBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield Ps(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return hn(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return hn(this,void 0,void 0,function*(){try{return{data:yield Cl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}emptyBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}deleteBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield oo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}}class Ll extends jl{constructor(e,t={},n){super(e,t,n)}from(e){return new xl(this.url,this.headers,e,this.fetch)}}const Ml="2.26.0",Ul={"X-Client-Info":`supabase-js/${Ml}`};var Fl=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const $l=s=>{let e;return s?e=s:typeof fetch>"u"?e=_n:e=fetch,(...t)=>e(...t)},Bl=()=>typeof Headers>"u"?xn.Headers:Headers,Vl=(s,e,t)=>{const n=$l(t),r=Bl();return(i,o)=>Fl(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:s;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};function ql(s){return s.replace(/\/$/,"")}function Gl(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:o,auth:l,realtime:a,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},a),r),global:Object.assign(Object.assign({},u),i)}}var Zt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};function zl(s){return Math.round(Date.now()/1e3)+s}function Hl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Ct=()=>typeof document<"u",Gt={tested:!1,writable:!1},Wn=()=>{if(!Ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gt.tested)return Gt.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Gt.tested=!0,Gt.writable=!0}catch{Gt.tested=!0,Gt.writable=!1}return Gt.writable};function et(s,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),s=s.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+s+"(=([^&#]*)|&|#|$)"),r=n.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const ao=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Zt(void 0,void 0,void 0,function*(){return yield(yield is(()=>Promise.resolve().then(()=>Un),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Jl=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Tn=(s,e,t)=>Zt(void 0,void 0,void 0,function*(){yield s.setItem(e,JSON.stringify(t))}),Vn=(s,e)=>Zt(void 0,void 0,void 0,function*(){const t=yield s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Es=(s,e)=>Zt(void 0,void 0,void 0,function*(){yield s.removeItem(e)});function Kl(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,o,l,a,u,c=0;for(s=s.replace("-","+").replace("_","/");c<s.length;)o=e.indexOf(s.charAt(c++)),l=e.indexOf(s.charAt(c++)),a=e.indexOf(s.charAt(c++)),u=e.indexOf(s.charAt(c++)),n=o<<2|l>>4,r=(l&15)<<4|a>>2,i=(a&3)<<6|u,t=t+String.fromCharCode(n),a!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class cs{constructor(){this.promise=new cs.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cs.promiseConstructor=Promise;function vi(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(Kl(n))}function Yl(s){return new Promise(e=>{setTimeout(()=>e(null),s)})}function Wl(s,e){return new Promise((n,r)=>{Zt(this,void 0,void 0,function*(){for(let i=0;i<1/0;i++)try{const o=yield s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})})}function Zl(s){return("0"+s.toString(16)).substr(-2)}function qn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Zl).join("")}function Xl(s){return Zt(this,void 0,void 0,function*(){const t=new TextEncoder().encode(s),n=yield crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")})}function Ql(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Gn(s){return Zt(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=yield Xl(s);return Ql(e)})}class Gs extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function ce(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class ec extends Gs{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function tc(s){return ce(s)&&s.name==="AuthApiError"}class lo extends Gs{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bn extends Gs{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dn extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ts extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class zn extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Nt extends bn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Os extends bn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Rs extends bn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function _i(s){return ce(s)&&s.name==="AuthRetryableFetchError"}var zs=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},nc=globalThis&&globalThis.__rest||function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const An=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),sc=[502,503,504];function gi(s){return zs(this,void 0,void 0,function*(){if(!Jl(s))throw new Rs(An(s),0);if(sc.includes(s.status))throw new Rs(An(s),s.status);let e;try{e=yield s.json()}catch(t){throw new lo(An(t),t)}throw new ec(An(e),s.status||500)})}const rc=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};function he(s,e,t,n){var r;return zs(this,void 0,void 0,function*(){const i=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=yield ic(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(a):{data:Object.assign({},a),error:null}})}function ic(s,e,t,n,r,i){return zs(this,void 0,void 0,function*(){const o=rc(e,n,r,i);let l;try{l=yield s(t,o)}catch(a){throw console.error(a),new Rs(An(a),0)}if(l.ok||(yield gi(l)),n!=null&&n.noResolveJson)return l;try{return yield l.json()}catch(a){yield gi(a)}})}function Lt(s){var e;let t=null;cc(s)&&(t=Object.assign({},s),t.expires_at=zl(s.expires_in));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function Jt(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function oc(s){return{data:s,error:null}}function ac(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=nc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function lc(s){return s}function cc(s){return s.access_token&&s.refresh_token&&s.expires_in}var kt=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})},uc=globalThis&&globalThis.__rest||function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class hc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=ao(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return kt(this,void 0,void 0,function*(){try{const{options:t}=e,n=uc(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),yield he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ac,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ce(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,n,r,i,o,l,a;return kt(this,void 0,void 0,function*(){try{const u={nextPage:null,lastPage:0,total:0},c=yield he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:lc});if(c.error)throw c.error;const d=yield c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ce(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}deleteUser(e,t=!1){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}_listFactors(e){return kt(this,void 0,void 0,function*(){try{const{data:t,error:n}=yield he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return kt(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}}const dc="2.37.0",fc="http://localhost:9999",pc="supabase.auth.token",mc={"X-Client-Info":`gotrue-js/${dc}`},yi=10,bi={getItem:s=>Wn()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{Wn()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{Wn()&&globalThis.localStorage.removeItem(s)}};function vc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Y=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};vc();const _c={url:fc,storageKey:pc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mc,flowType:"implicit",debug:!1},Hn=30*1e3,wi=3;class Rn{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Rn.nextInstanceID,Rn.nextInstanceID+=1,this.instanceID>0&&Ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},_c),e);if(this.logDebugMessages=n.debug,this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||bi,this.admin=new hc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=ao(n.fetch),this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===bi&&!Wn()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),Ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",r=>Y(this,void 0,void 0,function*(){this._debug("received broadcast notification from other tab or client",r),yield this._notifyAllSubscribers(r.data.event,r.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return Y(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=Ct()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=yield this._getSessionFromUrl(e);if(n)return this._debug("#_initialize()","error detecting session from URL",n),yield this._removeSession(),{error:n};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),yield this._saveSession(r),setTimeout(()=>Y(this,void 0,void 0,function*(){i==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",r):yield this._notifyAllSubscribers("SIGNED_IN",r)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return ce(e)?{error:e}:{error:new lo("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signUp(e){var t,n,r;return Y(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:c,password:d,options:f}=e;let m=null,p=null;if(this.flowType==="pkce"){const v=qn();yield Tn(this.storage,`${this.storageKey}-code-verifier`,v),m=yield Gn(v),p=v===m?"plain":"s256"}i=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:Lt})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Lt})}else throw new zn("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){return Y(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lt})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lt})}else throw new zn("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ts}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:r})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,n,r,i;return Y(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(e){return Y(this,void 0,void 0,function*(){const t=yield Vn(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:r}=yield he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Lt});return yield Es(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ts}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:r})})}signInWithIdToken(e){return Y(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,l=yield he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Lt}),{data:a,error:u}=l;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Ts}:(a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,n,r,i,o;return Y(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:l,options:a}=e;let u=null,c=null;if(this.flowType==="pkce"){const f=qn();yield Tn(this.storage,`${this.storageKey}-code-verifier`,f),u=yield Gn(f),c=f===u?"plain":"s256"}const{error:d}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(n=a==null?void 0:a.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=a==null?void 0:a.data)!==null&&r!==void 0?r:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new zn("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){var t,n;return Y(this,void 0,void 0,function*(){try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());const{data:r,error:i}=yield he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,xform:Lt});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,l=r.user;return o!=null&&o.access_token&&(yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(ce(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithSSO(e){var t,n,r;return Y(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:oc})}catch(i){if(ce(i))return{data:null,error:i};throw i}})}reauthenticate(){return Y(this,void 0,void 0,function*(){try{const{data:{session:e},error:t}=yield this.getSession();if(t)throw t;if(!e)throw new dn;const{error:n}=yield he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return Y(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=yield he(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=yield he(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new zn("You must provide either an email or phone number and a type")}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return Y(this,void 0,void 0,function*(){yield this.initializePromise,this._debug("#getSession()","begin");try{let e=null;if(this.persistSession){const i=yield Vn(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#getSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:n,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:n},error:null}}finally{this._debug("#getSession()","end")}})}getUser(e){var t,n;return Y(this,void 0,void 0,function*(){try{if(!e){const{data:r,error:i}=yield this.getSession();if(i)throw i;e=(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0}return yield he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}})}updateUser(e,t={}){return Y(this,void 0,void 0,function*(){try{const{data:n,error:r}=yield this.getSession();if(r)throw r;if(!n.session)throw new dn;const i=n.session,{data:o,error:l}=yield he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:i.access_token,xform:Jt});if(l)throw l;return i.user=o.user,yield this._saveSession(i),yield this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}_decodeJWT(e){return vi(e)}setSession(e){return Y(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new dn;const t=Date.now()/1e3;let n=t,r=!0,i=null;const o=vi(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:l,error:a}=yield this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=yield this.getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ce(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return Y(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:o}=yield this.getSession();if(o)throw o;e=(t=i.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new dn;const{session:n,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromUrl(e){return Y(this,void 0,void 0,function*(){try{if(!Ct())throw new Nt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Nt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Os("Not a valid PKCE flow url.");if(e){const E=et("code");if(!E)throw new Os("No code detected.");const{data:O,error:T}=yield this.exchangeCodeForSession(E);if(T)throw T;if(!O.session)throw new Os("No session detected.");let N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:O.session,redirectType:null},error:null}}const t=et("error_description");if(t){const E=et("error_code");if(!E)throw new Nt("No error_code detected.");const O=et("error");throw O?new Nt(t,{error:O,code:E}):new Nt("No error detected.")}const n=et("provider_token"),r=et("provider_refresh_token"),i=et("access_token");if(!i)throw new Nt("No access_token detected.");const o=et("expires_in");if(!o)throw new Nt("No expires_in detected.");const l=et("refresh_token");if(!l)throw new Nt("No refresh_token detected.");const a=et("token_type");if(!a)throw new Nt("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(o),{data:d,error:f}=yield this.getUser(i);if(f)throw f;const m=d.user,p={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:parseInt(o),expires_at:c,refresh_token:l,token_type:a,user:m},v=et("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:p,redirectType:v},error:null}}catch(t){if(ce(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return Ct()&&(!!et("access_token")||!!et("error_description"))}_isPKCEFlow(){return Y(this,void 0,void 0,function*(){const e=yield Vn(this.storage,`${this.storageKey}-code-verifier`);return!!et("code")&&!!e})}signOut(){var e;return Y(this,void 0,void 0,function*(){const{data:t,error:n}=yield this.getSession();if(n)return{error:n};const r=(e=t.session)===null||e===void 0?void 0:e.access_token;if(r){const{error:i}=yield this.admin.signOut(r);if(i&&!(tc(i)&&(i.status===404||i.status===401)))return{error:i}}return yield this._removeSession(),yield Es(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Hl(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),this._emitInitialSession(t),{data:{subscription:n}}}_emitInitialSession(e){var t,n;return Y(this,void 0,void 0,function*(){try{const{data:{session:r},error:i}=yield this.getSession();if(i)throw i;yield(t=this.stateChangeEmitters.get(e))===null||t===void 0?void 0:t.callback("INITIAL_SESSION",r),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}resetPasswordForEmail(e,t={}){return Y(this,void 0,void 0,function*(){let n=null,r=null;if(this.flowType==="pkce"){const i=qn();yield Tn(this.storage,`${this.storageKey}-code-verifier`,i),n=yield Gn(i),r=i===n?"plain":"s256"}try{return yield he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return Y(this,void 0,void 0,function*(){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return yield Wl(r=>Y(this,void 0,void 0,function*(){return yield Yl(r*200),this._debug(t,"refreshing attempt",r),yield he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lt})}),(r,i,o)=>o&&o.error&&_i(o.error)&&Date.now()+(r+1)*200-n<Hn)}catch(n){if(this._debug(t,"error",n),ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return Y(this,void 0,void 0,function*(){const n=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Ct()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){var e;return Y(this,void 0,void 0,function*(){const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=yield Vn(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<r+yi;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${yi}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=yield this._callRefreshToken(n.refresh_token);o&&(console.error(o),_i(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}})}_callRefreshToken(e){var t,n;return Y(this,void 0,void 0,function*(){if(!e)throw new dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new cs;const{data:i,error:o}=yield this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new dn;yield this._saveSession(i.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ce(i)){const o={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}})}_notifyAllSubscribers(e,t,n=!0){return Y(this,void 0,void 0,function*(){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(l=>Y(this,void 0,void 0,function*(){try{yield l.callback(e,t)}catch(a){i.push(a)}}));if(yield Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}})}_saveSession(e){return Y(this,void 0,void 0,function*(){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return this._debug("#_persistSession()",e),Tn(this.storage,this.storageKey,e)}_removeSession(){return Y(this,void 0,void 0,function*(){this._debug("#_removeSession()"),this.persistSession?yield Es(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ct()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return Y(this,void 0,void 0,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Hn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return Y(this,void 0,void 0,function*(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return Y(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return Y(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return Y(this,void 0,void 0,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((t.expires_at*1e3-e)/Hn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Hn}ms, refresh threshold is ${wi} ticks`),n<=wi&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}_handleVisibilityChange(){return Y(this,void 0,void 0,function*(){if(this._debug("#_handleVisibilityChange()"),!Ct()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>Y(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return Y(this,void 0,void 0,function*(){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return Y(this,void 0,void 0,function*(){const n=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const r=qn();yield Tn(this.storage,`${this.storageKey}-code-verifier`,r);const i=yield Gn(r),o=r===i?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",i,"method",o);const l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(t!=null&&t.queryParams){const r=new URLSearchParams(t.queryParams);n.push(r.toString())}return`${this.url}/authorize?${n.join("&")}`})}_unenroll(e){var t;return Y(this,void 0,void 0,function*(){try{const{data:n,error:r}=yield this.getSession();return r?{data:null,error:r}:yield he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_enroll(e){var t,n;return Y(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:o,error:l}=yield he(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return l?{data:null,error:l}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(r){if(ce(r))return{data:null,error:r};throw r}})}_verify(e){var t;return Y(this,void 0,void 0,function*(){try{const{data:n,error:r}=yield this.getSession();if(r)return{data:null,error:r};const{data:i,error:o}=yield he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_challenge(e){var t;return Y(this,void 0,void 0,function*(){try{const{data:n,error:r}=yield this.getSession();return r?{data:null,error:r}:yield he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_challengeAndVerify(e){return Y(this,void 0,void 0,function*(){const{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return Y(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:n,totp:r},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return Y(this,void 0,void 0,function*(){const{data:{session:n},error:r}=yield this.getSession();if(r)return{data:null,error:r};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}})}}Rn.nextInstanceID=0;class gc extends Rn{constructor(e){super(e)}}var yc=globalThis&&globalThis.__awaiter||function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):r(c.value).then(l,a)}u((n=n.apply(s,e||[])).next())})};const bc={headers:Ul},wc={schema:"public"},Ec={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tc={};class Oc{constructor(e,t,n){var r,i,o,l,a,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=ql(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:wc,realtime:Tc,auth:Object.assign(Object.assign({},Ec),{storageKey:m}),global:bc},v=Gl(n??{},p);this.storageKey=(i=(r=v.auth)===null||r===void 0?void 0:r.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,(u=v.global)===null||u===void 0?void 0:u.fetch),this.fetch=Vl(t,this._getAccessToken.bind(this),(c=v.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Ga(`${f}/rest/v1`,{headers:this.headers,schema:(d=v.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Ua(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ll(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yc(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o},l,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gc({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,fetch:a})}_initRealtimeClient(e){return new kl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kc=(s,e,t)=>new Oc(s,e,t),Ei=kc("https://mifvquxknwmbszdrqwio.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZnZxdXhrbndtYnN6ZHJxd2lvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcyMjMxNTQsImV4cCI6MjAwMjc5OTE1NH0.mukAyCyXroPUWSkPx8lAiLwDBHvtMBoW334LPwsbCsg");function Ti(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,x,z,Q,se,re,te,w,A,P,$,q,I,B,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,xe,ae,le,oe,St,Ze,Le,$e,G,K,Be,Ne,Ye,ze,ht,He,Me,Ae,Ot,Xe,ke,fe,Ie,we,Pe,Ee,Qe,W,xt,dt,Pt,ft,Xt,pt,Rt,mt,Ve,vt,Qt,_t,en,gt,tn,yt,nn,bt,sn,wt,rn,nt,on,st,an,rt,ln,cn,Hs;return{c(){e=g("div"),t=g("label"),n=C("State:"),r=Z(),i=g("select"),o=g("option"),l=C("Alabama"),a=g("option"),u=C("Alaska"),c=g("option"),d=C("Arizona"),f=g("option"),m=C("Arkansas"),p=g("option"),v=C("California"),E=g("option"),O=C("Colorado"),T=g("option"),N=C("Connecticut"),R=g("option"),M=C("Delaware"),ee=g("option"),L=C("District Of Columbia"),x=g("option"),z=C("Florida"),Q=g("option"),se=C("Georgia"),re=g("option"),te=C("Hawaii"),w=g("option"),A=C("Idaho"),P=g("option"),$=C("Illinois"),q=g("option"),I=C("Indiana"),B=g("option"),F=C("Iowa"),j=g("option"),ue=C("Kansas"),ne=g("option"),me=C("Kentucky"),Te=g("option"),ve=C("Louisiana"),ye=g("option"),Oe=C("Maine"),H=g("option"),be=C("Maryland"),de=g("option"),pe=C("Massachusetts"),qe=g("option"),Se=C("Michigan"),Re=g("option"),je=C("Minnesota"),Ge=g("option"),xe=C("Mississippi"),ae=g("option"),le=C("Missouri"),oe=g("option"),St=C("Montana"),Ze=g("option"),Le=C("Nebraska"),$e=g("option"),G=C("Nevada"),K=g("option"),Be=C("New Hampshire"),Ne=g("option"),Ye=C("New Jersey"),ze=g("option"),ht=C("New Mexico"),He=g("option"),Me=C("New York"),Ae=g("option"),Ot=C("North Carolina"),Xe=g("option"),ke=C("North Dakota"),fe=g("option"),Ie=C("Ohio"),we=g("option"),Pe=C("Oklahoma"),Ee=g("option"),Qe=C("Oregon"),W=g("option"),xt=C("Pennsylvania"),dt=g("option"),Pt=C("Rhode Island"),ft=g("option"),Xt=C("South Carolina"),pt=g("option"),Rt=C("South Dakota"),mt=g("option"),Ve=C("Tennessee"),vt=g("option"),Qt=C("Texas"),_t=g("option"),en=C("Utah"),gt=g("option"),tn=C("Vermont"),yt=g("option"),nn=C("Virginia"),bt=g("option"),sn=C("Washington"),wt=g("option"),rn=C("West Virginia"),nt=g("option"),on=C("Wisconsin"),st=g("option"),an=C("Wyoming"),rt=g("option"),ln=C("All"),this.h()},l(Vt){e=y(Vt,"DIV",{class:!0});var jt=k(e);t=y(jt,"LABEL",{});var Js=k(t);n=D(Js,"State:"),Js.forEach(b),r=X(jt),i=y(jt,"SELECT",{name:!0,class:!0});var V=k(i);o=y(V,"OPTION",{});var Ks=k(o);l=D(Ks,"Alabama"),Ks.forEach(b),a=y(V,"OPTION",{});var Ys=k(a);u=D(Ys,"Alaska"),Ys.forEach(b),c=y(V,"OPTION",{});var Ws=k(c);d=D(Ws,"Arizona"),Ws.forEach(b),f=y(V,"OPTION",{});var Zs=k(f);m=D(Zs,"Arkansas"),Zs.forEach(b),p=y(V,"OPTION",{});var Xs=k(p);v=D(Xs,"California"),Xs.forEach(b),E=y(V,"OPTION",{});var Qs=k(E);O=D(Qs,"Colorado"),Qs.forEach(b),T=y(V,"OPTION",{});var er=k(T);N=D(er,"Connecticut"),er.forEach(b),R=y(V,"OPTION",{});var tr=k(R);M=D(tr,"Delaware"),tr.forEach(b),ee=y(V,"OPTION",{});var nr=k(ee);L=D(nr,"District Of Columbia"),nr.forEach(b),x=y(V,"OPTION",{});var sr=k(x);z=D(sr,"Florida"),sr.forEach(b),Q=y(V,"OPTION",{});var rr=k(Q);se=D(rr,"Georgia"),rr.forEach(b),re=y(V,"OPTION",{});var ir=k(re);te=D(ir,"Hawaii"),ir.forEach(b),w=y(V,"OPTION",{});var or=k(w);A=D(or,"Idaho"),or.forEach(b),P=y(V,"OPTION",{});var ar=k(P);$=D(ar,"Illinois"),ar.forEach(b),q=y(V,"OPTION",{});var lr=k(q);I=D(lr,"Indiana"),lr.forEach(b),B=y(V,"OPTION",{});var cr=k(B);F=D(cr,"Iowa"),cr.forEach(b),j=y(V,"OPTION",{});var ur=k(j);ue=D(ur,"Kansas"),ur.forEach(b),ne=y(V,"OPTION",{});var hr=k(ne);me=D(hr,"Kentucky"),hr.forEach(b),Te=y(V,"OPTION",{});var dr=k(Te);ve=D(dr,"Louisiana"),dr.forEach(b),ye=y(V,"OPTION",{});var fr=k(ye);Oe=D(fr,"Maine"),fr.forEach(b),H=y(V,"OPTION",{});var pr=k(H);be=D(pr,"Maryland"),pr.forEach(b),de=y(V,"OPTION",{});var mr=k(de);pe=D(mr,"Massachusetts"),mr.forEach(b),qe=y(V,"OPTION",{});var vr=k(qe);Se=D(vr,"Michigan"),vr.forEach(b),Re=y(V,"OPTION",{});var _r=k(Re);je=D(_r,"Minnesota"),_r.forEach(b),Ge=y(V,"OPTION",{});var gr=k(Ge);xe=D(gr,"Mississippi"),gr.forEach(b),ae=y(V,"OPTION",{});var yr=k(ae);le=D(yr,"Missouri"),yr.forEach(b),oe=y(V,"OPTION",{});var br=k(oe);St=D(br,"Montana"),br.forEach(b),Ze=y(V,"OPTION",{});var wr=k(Ze);Le=D(wr,"Nebraska"),wr.forEach(b),$e=y(V,"OPTION",{});var Er=k($e);G=D(Er,"Nevada"),Er.forEach(b),K=y(V,"OPTION",{});var Tr=k(K);Be=D(Tr,"New Hampshire"),Tr.forEach(b),Ne=y(V,"OPTION",{});var Or=k(Ne);Ye=D(Or,"New Jersey"),Or.forEach(b),ze=y(V,"OPTION",{});var kr=k(ze);ht=D(kr,"New Mexico"),kr.forEach(b),He=y(V,"OPTION",{});var Ar=k(He);Me=D(Ar,"New York"),Ar.forEach(b),Ae=y(V,"OPTION",{});var Ir=k(Ae);Ot=D(Ir,"North Carolina"),Ir.forEach(b),Xe=y(V,"OPTION",{});var Sr=k(Xe);ke=D(Sr,"North Dakota"),Sr.forEach(b),fe=y(V,"OPTION",{});var Nr=k(fe);Ie=D(Nr,"Ohio"),Nr.forEach(b),we=y(V,"OPTION",{});var Cr=k(we);Pe=D(Cr,"Oklahoma"),Cr.forEach(b),Ee=y(V,"OPTION",{});var Dr=k(Ee);Qe=D(Dr,"Oregon"),Dr.forEach(b),W=y(V,"OPTION",{});var xr=k(W);xt=D(xr,"Pennsylvania"),xr.forEach(b),dt=y(V,"OPTION",{});var Pr=k(dt);Pt=D(Pr,"Rhode Island"),Pr.forEach(b),ft=y(V,"OPTION",{});var Rr=k(ft);Xt=D(Rr,"South Carolina"),Rr.forEach(b),pt=y(V,"OPTION",{});var jr=k(pt);Rt=D(jr,"South Dakota"),jr.forEach(b),mt=y(V,"OPTION",{});var Lr=k(mt);Ve=D(Lr,"Tennessee"),Lr.forEach(b),vt=y(V,"OPTION",{});var Mr=k(vt);Qt=D(Mr,"Texas"),Mr.forEach(b),_t=y(V,"OPTION",{});var Ur=k(_t);en=D(Ur,"Utah"),Ur.forEach(b),gt=y(V,"OPTION",{});var Fr=k(gt);tn=D(Fr,"Vermont"),Fr.forEach(b),yt=y(V,"OPTION",{});var $r=k(yt);nn=D($r,"Virginia"),$r.forEach(b),bt=y(V,"OPTION",{});var Br=k(bt);sn=D(Br,"Washington"),Br.forEach(b),wt=y(V,"OPTION",{});var Vr=k(wt);rn=D(Vr,"West Virginia"),Vr.forEach(b),nt=y(V,"OPTION",{});var qr=k(nt);on=D(qr,"Wisconsin"),qr.forEach(b),st=y(V,"OPTION",{});var Gr=k(st);an=D(Gr,"Wyoming"),Gr.forEach(b),rt=y(V,"OPTION",{});var zr=k(rt);ln=D(zr,"All"),zr.forEach(b),V.forEach(b),jt.forEach(b),this.h()},h(){o.__value="AL",o.value=o.__value,a.__value="AK",a.value=a.__value,c.__value="AZ",c.value=c.__value,f.__value="AR",f.value=f.__value,p.__value="CA",p.value=p.__value,E.__value="CO",E.value=E.__value,T.__value="CT",T.value=T.__value,R.__value="DE",R.value=R.__value,ee.__value="DC",ee.value=ee.__value,x.__value="FL",x.value=x.__value,Q.__value="GA",Q.value=Q.__value,re.__value="HI",re.value=re.__value,w.__value="ID",w.value=w.__value,P.__value="IL",P.value=P.__value,q.__value="IN",q.value=q.__value,B.__value="IA",B.value=B.__value,j.__value="KS",j.value=j.__value,ne.__value="KY",ne.value=ne.__value,Te.__value="LA",Te.value=Te.__value,ye.__value="ME",ye.value=ye.__value,H.__value="MD",H.value=H.__value,de.__value="MA",de.value=de.__value,qe.__value="MI",qe.value=qe.__value,Re.__value="MN",Re.value=Re.__value,Ge.__value="MS",Ge.value=Ge.__value,ae.__value="MO",ae.value=ae.__value,oe.__value="MT",oe.value=oe.__value,Ze.__value="NE",Ze.value=Ze.__value,$e.__value="NV",$e.value=$e.__value,K.__value="NH",K.value=K.__value,Ne.__value="NJ",Ne.value=Ne.__value,ze.__value="NM",ze.value=ze.__value,He.__value="NY",He.value=He.__value,Ae.__value="NC",Ae.value=Ae.__value,Xe.__value="ND",Xe.value=Xe.__value,fe.__value="OH",fe.value=fe.__value,we.__value="OK",we.value=we.__value,Ee.__value="OR",Ee.value=Ee.__value,W.__value="PA",W.value=W.__value,dt.__value="RI",dt.value=dt.__value,ft.__value="SC",ft.value=ft.__value,pt.__value="SD",pt.value=pt.__value,mt.__value="TN",mt.value=mt.__value,vt.__value="TX",vt.value=vt.__value,_t.__value="UT",_t.value=_t.__value,gt.__value="VT",gt.value=gt.__value,yt.__value="VA",yt.value=yt.__value,bt.__value="WA",bt.value=bt.__value,wt.__value="WV",wt.value=wt.__value,nt.__value="WI",nt.value=nt.__value,st.__value="WY",st.value=st.__value,rt.__value="all",rt.value=rt.__value,i.required=!0,_(i,"name","state"),_(i,"class","svelte-wl73y9"),s[4]===void 0&&Dt(()=>s[21].call(i)),_(e,"class","filter-item svelte-wl73y9")},m(Vt,jt){De(Vt,e,jt),h(e,t),h(t,n),h(e,r),h(e,i),h(i,o),h(o,l),h(i,a),h(a,u),h(i,c),h(c,d),h(i,f),h(f,m),h(i,p),h(p,v),h(i,E),h(E,O),h(i,T),h(T,N),h(i,R),h(R,M),h(i,ee),h(ee,L),h(i,x),h(x,z),h(i,Q),h(Q,se),h(i,re),h(re,te),h(i,w),h(w,A),h(i,P),h(P,$),h(i,q),h(q,I),h(i,B),h(B,F),h(i,j),h(j,ue),h(i,ne),h(ne,me),h(i,Te),h(Te,ve),h(i,ye),h(ye,Oe),h(i,H),h(H,be),h(i,de),h(de,pe),h(i,qe),h(qe,Se),h(i,Re),h(Re,je),h(i,Ge),h(Ge,xe),h(i,ae),h(ae,le),h(i,oe),h(oe,St),h(i,Ze),h(Ze,Le),h(i,$e),h($e,G),h(i,K),h(K,Be),h(i,Ne),h(Ne,Ye),h(i,ze),h(ze,ht),h(i,He),h(He,Me),h(i,Ae),h(Ae,Ot),h(i,Xe),h(Xe,ke),h(i,fe),h(fe,Ie),h(i,we),h(we,Pe),h(i,Ee),h(Ee,Qe),h(i,W),h(W,xt),h(i,dt),h(dt,Pt),h(i,ft),h(ft,Xt),h(i,pt),h(pt,Rt),h(i,mt),h(mt,Ve),h(i,vt),h(vt,Qt),h(i,_t),h(_t,en),h(i,gt),h(gt,tn),h(i,yt),h(yt,nn),h(i,bt),h(bt,sn),h(i,wt),h(wt,rn),h(i,nt),h(nt,on),h(i,st),h(st,an),h(i,rt),h(rt,ln),pn(i,s[4],!0),cn||(Hs=Ke(i,"change",s[21]),cn=!0)},p(Vt,jt){jt[0]&16&&pn(i,Vt[4])},d(Vt){Vt&&b(e),cn=!1,Hs()}}}function Oi(s){let e,t,n,r,i,o,l;return{c(){e=g("button"),t=C("Cancel"),n=Z(),r=g("p"),i=C("Loading..."),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var u=k(e);t=D(u,"Cancel"),u.forEach(b),n=X(a),r=y(a,"P",{});var c=k(r);i=D(c,"Loading..."),c.forEach(b),this.h()},h(){_(e,"class","svelte-wl73y9")},m(a,u){De(a,e,u),h(e,t),De(a,n,u),De(a,r,u),h(r,i),o||(l=Ke(e,"click",s[26]),o=!0)},p:Jn,d(a){a&&b(e),a&&b(n),a&&b(r),o=!1,l()}}}function ki(s){let e,t;return{c(){e=g("p"),t=C("There was an error loading the map"),this.h()},l(n){e=y(n,"P",{class:!0});var r=k(e);t=D(r,"There was an error loading the map"),r.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,r){De(n,e,r),h(e,t)},d(n){n&&b(e)}}}function Ai(s){let e,t;return{c(){e=g("p"),t=C("No tournaments found"),this.h()},l(n){e=y(n,"P",{class:!0});var r=k(e);t=D(r,"No tournaments found"),r.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,r){De(n,e,r),h(e,t)},d(n){n&&b(e)}}}function Ii(s){let e,t;return{c(){e=g("p"),t=C("You cannot search for more than 150 tournaments."),this.h()},l(n){e=y(n,"P",{class:!0});var r=k(e);t=D(r,"You cannot search for more than 150 tournaments."),r.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,r){De(n,e,r),h(e,t)},d(n){n&&b(e)}}}function Si(s){let e,t;return{c(){e=g("p"),t=C("Request cancelled"),this.h()},l(n){e=y(n,"P",{class:!0});var r=k(e);t=D(r,"Request cancelled"),r.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,r){De(n,e,r),h(e,t)},d(n){n&&b(e)}}}function Ac(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,x,z,Q,se,re,te,w,A,P,$,q,I,B,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,xe,ae,le,oe,St,Ze,Le,$e,G,K,Be,Ne,Ye,ze,ht,He,Me,Ae,Ot,Xe,ke=s[2]==="US"&&Ti(s),fe=s[9]&&Oi(s),Ie=s[10]&&ki(),we=s[11]&&Ai(),Pe=s[8]&&Ii(),Ee=s[12]&&Si();return{c(){e=g("aside"),t=g("div"),n=g("label"),r=C("Game:"),i=Z(),o=g("select"),l=g("option"),a=C("Ultimate"),u=g("option"),c=C("Melee"),d=g("option"),f=C("Both"),m=Z(),p=g("div"),v=g("label"),E=C("Country:"),O=Z(),T=g("select"),N=g("option"),R=C("Canada"),M=g("option"),ee=C("USA"),L=g("option"),x=C("Mexico"),z=g("option"),Q=C("Japan"),se=g("option"),re=C("France"),te=g("option"),w=C("United Kingdom"),A=g("option"),P=C("Germany"),$=g("option"),q=C("Italy"),I=g("option"),B=C("Spain"),F=g("option"),j=C("Switzerland"),ue=g("option"),ne=C("Netherlands"),me=g("option"),Te=C("Australia"),ve=Z(),ke&&ke.c(),ye=Z(),Oe=g("div"),H=g("label"),be=C("From:"),de=Z(),pe=g("input"),qe=Z(),Se=g("div"),Re=g("label"),je=C("To:"),Ge=Z(),xe=g("input"),ae=Z(),le=g("div"),oe=g("label"),St=C("Attendees:"),Ze=Z(),Le=g("input"),$e=Z(),G=g("button"),K=C("Search"),Be=Z(),fe&&fe.c(),Ne=Z(),Ie&&Ie.c(),Ye=Z(),we&&we.c(),ze=Z(),Pe&&Pe.c(),ht=Z(),Ee&&Ee.c(),this.h()},l(Qe){e=y(Qe,"ASIDE",{class:!0});var W=k(e);t=y(W,"DIV",{class:!0});var xt=k(t);n=y(xt,"LABEL",{});var dt=k(n);r=D(dt,"Game:"),dt.forEach(b),i=X(xt),o=y(xt,"SELECT",{name:!0,class:!0});var Pt=k(o);l=y(Pt,"OPTION",{});var ft=k(l);a=D(ft,"Ultimate"),ft.forEach(b),u=y(Pt,"OPTION",{});var Xt=k(u);c=D(Xt,"Melee"),Xt.forEach(b),d=y(Pt,"OPTION",{});var pt=k(d);f=D(pt,"Both"),pt.forEach(b),Pt.forEach(b),xt.forEach(b),m=X(W),p=y(W,"DIV",{class:!0});var Rt=k(p);v=y(Rt,"LABEL",{});var mt=k(v);E=D(mt,"Country:"),mt.forEach(b),O=X(Rt),T=y(Rt,"SELECT",{name:!0,class:!0});var Ve=k(T);N=y(Ve,"OPTION",{});var vt=k(N);R=D(vt,"Canada"),vt.forEach(b),M=y(Ve,"OPTION",{});var Qt=k(M);ee=D(Qt,"USA"),Qt.forEach(b),L=y(Ve,"OPTION",{});var _t=k(L);x=D(_t,"Mexico"),_t.forEach(b),z=y(Ve,"OPTION",{});var en=k(z);Q=D(en,"Japan"),en.forEach(b),se=y(Ve,"OPTION",{});var gt=k(se);re=D(gt,"France"),gt.forEach(b),te=y(Ve,"OPTION",{});var tn=k(te);w=D(tn,"United Kingdom"),tn.forEach(b),A=y(Ve,"OPTION",{});var yt=k(A);P=D(yt,"Germany"),yt.forEach(b),$=y(Ve,"OPTION",{});var nn=k($);q=D(nn,"Italy"),nn.forEach(b),I=y(Ve,"OPTION",{});var bt=k(I);B=D(bt,"Spain"),bt.forEach(b),F=y(Ve,"OPTION",{});var sn=k(F);j=D(sn,"Switzerland"),sn.forEach(b),ue=y(Ve,"OPTION",{});var wt=k(ue);ne=D(wt,"Netherlands"),wt.forEach(b),me=y(Ve,"OPTION",{});var rn=k(me);Te=D(rn,"Australia"),rn.forEach(b),Ve.forEach(b),Rt.forEach(b),ve=X(W),ke&&ke.l(W),ye=X(W),Oe=y(W,"DIV",{class:!0});var nt=k(Oe);H=y(nt,"LABEL",{});var on=k(H);be=D(on,"From:"),on.forEach(b),de=X(nt),pe=y(nt,"INPUT",{name:!0,min:!0,type:!0,class:!0}),nt.forEach(b),qe=X(W),Se=y(W,"DIV",{class:!0});var st=k(Se);Re=y(st,"LABEL",{});var an=k(Re);je=D(an,"To:"),an.forEach(b),Ge=X(st),xe=y(st,"INPUT",{name:!0,min:!0,type:!0,class:!0}),st.forEach(b),ae=X(W),le=y(W,"DIV",{class:!0});var rt=k(le);oe=y(rt,"LABEL",{});var ln=k(oe);St=D(ln,"Attendees:"),ln.forEach(b),Ze=X(rt),Le=y(rt,"INPUT",{name:!0,type:!0,min:!0,class:!0}),rt.forEach(b),$e=X(W),G=y(W,"BUTTON",{class:!0});var cn=k(G);K=D(cn,"Search"),cn.forEach(b),Be=X(W),fe&&fe.l(W),Ne=X(W),Ie&&Ie.l(W),Ye=X(W),we&&we.l(W),ze=X(W),Pe&&Pe.l(W),ht=X(W),Ee&&Ee.l(W),W.forEach(b),this.h()},h(){l.__value="1386",l.value=l.__value,u.__value="1",u.value=u.__value,d.__value="1 1386",d.value=d.__value,o.required=!0,_(o,"name","game"),_(o,"class","svelte-wl73y9"),s[5]===void 0&&Dt(()=>s[19].call(o)),_(t,"class","filter-item svelte-wl73y9"),N.__value="CA",N.value=N.__value,M.__value="US",M.value=M.__value,L.__value="MX",L.value=L.__value,z.__value="JP",z.value=z.__value,se.__value="FR",se.value=se.__value,te.__value="GB",te.value=te.__value,A.__value="DE",A.value=A.__value,$.__value="IT",$.value=$.__value,I.__value="ES",I.value=I.__value,F.__value="CH",F.value=F.__value,ue.__value="NL",ue.value=ue.__value,me.__value="AU",me.value=me.__value,T.required=!0,_(T,"name","country"),_(T,"class","svelte-wl73y9"),s[2]===void 0&&Dt(()=>s[20].call(T)),_(p,"class","filter-item svelte-wl73y9"),pe.required=!0,_(pe,"name","startDate"),_(pe,"min",s[7]),_(pe,"type","date"),_(pe,"class","svelte-wl73y9"),_(Oe,"class","filter-item svelte-wl73y9"),xe.required=!0,_(xe,"name","endDate"),_(xe,"min",s[0]),_(xe,"type","date"),_(xe,"class","svelte-wl73y9"),_(Se,"class","filter-item svelte-wl73y9"),Le.required=!0,_(Le,"name","attendees"),_(Le,"type","number"),_(Le,"min","0"),_(Le,"class","svelte-wl73y9"),_(le,"class","filter-item svelte-wl73y9"),G.disabled=s[9],_(G,"class","svelte-wl73y9"),_(e,"class","svelte-wl73y9")},m(Qe,W){De(Qe,e,W),h(e,t),h(t,n),h(n,r),h(t,i),h(t,o),h(o,l),h(l,a),h(o,u),h(u,c),h(o,d),h(d,f),pn(o,s[5],!0),h(e,m),h(e,p),h(p,v),h(v,E),h(p,O),h(p,T),h(T,N),h(N,R),h(T,M),h(M,ee),h(T,L),h(L,x),h(T,z),h(z,Q),h(T,se),h(se,re),h(T,te),h(te,w),h(T,A),h(A,P),h(T,$),h($,q),h(T,I),h(I,B),h(T,F),h(F,j),h(T,ue),h(ue,ne),h(T,me),h(me,Te),pn(T,s[2],!0),h(e,ve),ke&&ke.m(e,null),h(e,ye),h(e,Oe),h(Oe,H),h(H,be),h(Oe,de),h(Oe,pe),Ut(pe,s[0]),h(e,qe),h(e,Se),h(Se,Re),h(Re,je),h(Se,Ge),h(Se,xe),Ut(xe,s[1]),h(e,ae),h(e,le),h(le,oe),h(oe,St),h(le,Ze),h(le,Le),Ut(Le,s[3]),h(e,$e),h(e,G),h(G,K),h(e,Be),fe&&fe.m(e,null),h(e,Ne),Ie&&Ie.m(e,null),h(e,Ye),we&&we.m(e,null),h(e,ze),Pe&&Pe.m(e,null),h(e,ht),Ee&&Ee.m(e,null),Ae=!0,Ot||(Xe=[Ke(o,"change",s[19]),Ke(T,"change",s[20]),Ke(pe,"input",s[22]),Ke(xe,"input",s[23]),Ke(Le,"input",s[24]),Ke(G,"click",s[25])],Ot=!0)},p(Qe,W){s=Qe,W[0]&32&&pn(o,s[5]),W[0]&4&&pn(T,s[2]),s[2]==="US"?ke?ke.p(s,W):(ke=Ti(s),ke.c(),ke.m(e,ye)):ke&&(ke.d(1),ke=null),(!Ae||W[0]&128)&&_(pe,"min",s[7]),W[0]&1&&Ut(pe,s[0]),(!Ae||W[0]&1)&&_(xe,"min",s[0]),W[0]&2&&Ut(xe,s[1]),W[0]&8&&Ui(Le.value)!==s[3]&&Ut(Le,s[3]),(!Ae||W[0]&512)&&(G.disabled=s[9]),s[9]?fe?fe.p(s,W):(fe=Oi(s),fe.c(),fe.m(e,Ne)):fe&&(fe.d(1),fe=null),s[10]?Ie||(Ie=ki(),Ie.c(),Ie.m(e,Ye)):Ie&&(Ie.d(1),Ie=null),s[11]?we||(we=Ai(),we.c(),we.m(e,ze)):we&&(we.d(1),we=null),s[8]?Pe||(Pe=Ii(),Pe.c(),Pe.m(e,ht)):Pe&&(Pe.d(1),Pe=null),s[12]?Ee||(Ee=Si(),Ee.c(),Ee.m(e,null)):Ee&&(Ee.d(1),Ee=null)},i(Qe){Ae||(Dt(()=>{Ae&&(Me&&Me.end(1),He=Qn(e,It,{delay:450,duration:350,axis:"x",easing:Po}),He.start())}),Ae=!0)},o(Qe){He&&He.invalidate(),Me=es(e,It,{duration:350,axis:"x"}),Ae=!1},d(Qe){Qe&&b(e),ke&&ke.d(),fe&&fe.d(),Ie&&Ie.d(),we&&we.d(),Pe&&Pe.d(),Ee&&Ee.d(),Qe&&Me&&Me.end(),Ot=!1,js(Xe)}}}function Ic(s,e,t){let n=new Date;n.setDate(n.getDate()-14),n=n.toISOString().split("T")[0];let{startDate:r=new Date().toISOString().split("T")[0]}=e,{data:i}=e,{tournaments:o}=e,l=o.map(({venue_address:I})=>I),{endDate:a}=e,{country:u}=e,{minAttendees:c=0}=e,{state:d}=e,{game:f}=e,{geolocated:m}=e,{mapResult:p}=e,{showShareDialog:v=!1}=e,E=!1,O=!1,T=!1,N=!1,R=!1,M=!1,{delay:ee}=e,L;const x=new Bt({apiKey:i.GOOGLE_MAPS_API_KEY,version:"weekly"});Mi(async()=>{x.load().then(async()=>{L=new google.maps.Geocoder})});async function z(I){if(l.includes(I.venueAddress)){let B=o.find(({venue_address:F})=>F===I.venueAddress);return console.log("Found tournament in list"),{lat:B.lat,lng:B.lng}}else try{console.log("Geocoding address");let F=(await L.geocode({address:I.venueAddress})).results[0].geometry.location;const{error:j}=await Ei.from("tournaments").insert({name:I.name,lat:F.lat(),lng:F.lng(),start_at:I.startAt,primary_contact:I.primaryContact,url:I.url,num_attendees:I.numAttendees,state:I.state,venue_address:I.venueAddress});return j&&console.log("Error inserting into database:",j),{lat:F.lat(),lng:F.lng()}}catch(B){console.log("Error geocoding address:",B);return}}async function Q(){if(r>a){alert("Start date must be before end date");return}if(a===void 0){alert("Please enter an end date");return}try{t(8,O=!1),t(10,N=!1),t(9,T=!0),t(11,R=!1),t(12,M=!1),E=!1;let I,B=new Date(r.replace(/-/g,"/").replace("T"," ")),F=new Date(a.replace(/-/g,"/").replace("T"," "));F.setHours(23,59,59),B=Math.floor(B.getTime()/1e3),F=Math.floor(F.getTime()/1e3);let j=f.split(" ");const ne="https://api.start.gg/gql/"+"alpha",me=new Na(ne,{headers:{Authorization:"Bearer "+i.SMASH_GG_API_KEY}});let Te=`
            query TournamentsByCountry($cCode: String!, $perPage: Int!, $after: Timestamp!, $before: Timestamp, $state: String
            $game: [ID]) {
              tournaments(query: {
                perPage: $perPage
                filter: {
                  countryCode: $cCode
                  afterDate: $after
                  beforeDate: $before
                  videogameIds: $game
                  addrState: $state
                }
              }) {
                nodes {
                  name
                  venueAddress
                  startAt
                  primaryContact
                  url
                  numAttendees
                  state
                }
              }
            }`;const ve={cCode:u,perPage:151,after:B,before:F,state:d,game:j};(d==="all"||u!=="US")&&(delete ve.state,Te=Te.replace(/addrState: \$state,?/,"").replace(", $state: String",""));let ye=await me.request(Te,ve),Oe=[];I=ye.tournaments.nodes;for(let H of ye.tournaments.nodes){const be=H.startAt,de=new Date(be*1e3);H.startAt=de.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}if(I=I.filter(function(H){return c<=H.numAttendees}),I.length===0){t(9,T=!1),t(11,R=!0);return}if(I.length>150){t(9,T=!1),t(8,O=!0);return}c!==0?I=I.filter(H=>H.numAttendees!==null&&H.numAttendees!==void 0):I=I.map(H=>((H.numAttendees===null||H.numAttendees===void 0)&&(H.numAttendees="unknown"),H));for(let H of I){let be;if(M){t(9,T=!1);return}try{be=await z(H)}catch(pe){console.log(pe);continue}let de="https://start.gg"+H.url;be!==void 0&&Oe.push({name:H.name,lat:be.lat,lng:be.lng,primaryContact:H.primaryContact,venueAddress:H.venueAddress,url:de,startAt:H.startAt,numAttendees:H.numAttendees,state:H.state})}await Ei.from("tournaments").select().then(H=>{t(13,o=H.data),l=H.data.map(({venue_address:be})=>be)}).catch(H=>{console.log(H)}),t(14,p=Oe),console.log(p)}catch(I){t(10,N=!0),t(9,T=!1),console.error("Error:",I)}t(9,T=!1)}function se(){f=us(this),t(5,f)}function re(){u=us(this),t(2,u)}function te(){d=us(this),t(4,d)}function w(){r=this.value,t(0,r)}function A(){a=this.value,t(1,a)}function P(){c=Ui(this.value),t(3,c)}const $=async()=>await Q(),q=()=>t(12,M=!0);return s.$$set=I=>{"startDate"in I&&t(0,r=I.startDate),"data"in I&&t(15,i=I.data),"tournaments"in I&&t(13,o=I.tournaments),"endDate"in I&&t(1,a=I.endDate),"country"in I&&t(2,u=I.country),"minAttendees"in I&&t(3,c=I.minAttendees),"state"in I&&t(4,d=I.state),"game"in I&&t(5,f=I.game),"geolocated"in I&&t(16,m=I.geolocated),"mapResult"in I&&t(14,p=I.mapResult),"showShareDialog"in I&&t(17,v=I.showShareDialog),"delay"in I&&t(18,ee=I.delay)},[r,a,u,c,d,f,Q,n,O,T,N,R,M,o,p,i,m,v,ee,se,re,te,w,A,P,$,q]}class Sc extends jn{constructor(e){super(),Ln(this,e,Ic,Ac,Mn,{startDate:0,data:15,tournaments:13,endDate:1,country:2,minAttendees:3,state:4,game:5,geolocated:16,mapResult:14,showShareDialog:17,delay:18,updateMap:6},null,[-1,-1])}get updateMap(){return this.$$.ctx[6]}}function Ni(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E;return{c(){e=g("p"),t=C("To use, click the filter icon on the sidebar to the left. "),n=g("br"),r=g("br"),i=C(`

            Select a start and end date, and any other filters
            and click "search". All the tournaments will be shown on the map. `),o=g("br"),l=g("br"),a=C(`

            Clicking on a marker will show all the tournament information. Additonally, clicking on the tournmanet
            icon on the sidebar will show you a list view of the tournaments. You can click on the tournament to pan
            the camera to that tournament.`),u=g("br"),c=g("br"),d=C(`


            Found a bug? `),f=g("a"),m=C("Contact"),p=C(" me"),this.h()},l(O){e=y(O,"P",{class:!0});var T=k(e);t=D(T,"To use, click the filter icon on the sidebar to the left. "),n=y(T,"BR",{}),r=y(T,"BR",{}),i=D(T,`

            Select a start and end date, and any other filters
            and click "search". All the tournaments will be shown on the map. `),o=y(T,"BR",{}),l=y(T,"BR",{}),a=D(T,`

            Clicking on a marker will show all the tournament information. Additonally, clicking on the tournmanet
            icon on the sidebar will show you a list view of the tournaments. You can click on the tournament to pan
            the camera to that tournament.`),u=y(T,"BR",{}),c=y(T,"BR",{}),d=D(T,`


            Found a bug? `),f=y(T,"A",{style:!0,href:!0});var N=k(f);m=D(N,"Contact"),N.forEach(b),p=D(T," me"),T.forEach(b),this.h()},h(){We(f,"cursor","pointer"),_(f,"href","/contact"),_(e,"class","content svelte-vz1jks")},m(O,T){De(O,e,T),h(e,t),h(e,n),h(e,r),h(e,i),h(e,o),h(e,l),h(e,a),h(e,u),h(e,c),h(e,d),h(e,f),h(f,m),h(e,p),E=!0},i(O){E||(Dt(()=>{E&&(v||(v=Zn(e,It,{y:200,duration:500},!0)),v.run(1))}),E=!0)},o(O){v||(v=Zn(e,It,{y:200,duration:500},!1)),v.run(0),E=!1},d(O){O&&b(e),O&&v&&v.end()}}}function Ci(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,x,z,Q,se,re,te,w,A,P,$,q,I,B,F,j;return{c(){e=g("aside"),t=g("p"),n=C("In Smash Mapping, marker colours mean different things."),r=Z(),i=g("p"),o=C("The markers and their meanings are:"),l=Z(),a=g("div"),u=g("img"),d=C(` Below 50
                attendees`),f=Z(),m=g("div"),p=g("img"),E=C(` Between 51
                and
                100 attendees`),O=Z(),T=g("div"),N=g("img"),M=C(` Between 101
                and
                500 attendees`),ee=Z(),L=g("div"),x=g("img"),Q=C(` Over 500
                attendees`),se=Z(),re=g("div"),te=g("img"),A=C(`
                 Another marker is on top of this one`),P=Z(),$=g("div"),q=g("img"),B=C(" Tournament has ended"),this.h()},l(ue){e=y(ue,"ASIDE",{class:!0});var ne=k(e);t=y(ne,"P",{class:!0});var me=k(t);n=D(me,"In Smash Mapping, marker colours mean different things."),me.forEach(b),r=X(ne),i=y(ne,"P",{class:!0});var Te=k(i);o=D(Te,"The markers and their meanings are:"),Te.forEach(b),l=X(ne),a=y(ne,"DIV",{class:!0});var ve=k(a);u=y(ve,"IMG",{src:!0,alt:!0,class:!0}),d=D(ve,` Below 50
                attendees`),ve.forEach(b),f=X(ne),m=y(ne,"DIV",{class:!0});var ye=k(m);p=y(ye,"IMG",{src:!0,alt:!0,class:!0}),E=D(ye,` Between 51
                and
                100 attendees`),ye.forEach(b),O=X(ne),T=y(ne,"DIV",{class:!0});var Oe=k(T);N=y(Oe,"IMG",{src:!0,alt:!0,class:!0}),M=D(Oe,` Between 101
                and
                500 attendees`),Oe.forEach(b),ee=X(ne),L=y(ne,"DIV",{class:!0});var H=k(L);x=y(H,"IMG",{src:!0,alt:!0,class:!0}),Q=D(H,` Over 500
                attendees`),H.forEach(b),se=X(ne),re=y(ne,"DIV",{class:!0});var be=k(re);te=y(be,"IMG",{src:!0,alt:!0,class:!0}),A=D(be,`
                 Another marker is on top of this one`),be.forEach(b),P=X(ne),$=y(ne,"DIV",{class:!0});var de=k($);q=y(de,"IMG",{src:!0,alt:!0,class:!0}),B=D(de," Tournament has ended"),de.forEach(b),ne.forEach(b),this.h()},h(){_(t,"class","svelte-vz1jks"),_(i,"class","svelte-vz1jks"),ut(u.src,c="markers/red-marker.png")||_(u,"src",c),_(u,"alt","red-pointer"),_(u,"class","svelte-vz1jks"),_(a,"class","marker svelte-vz1jks"),ut(p.src,v="markers/green-marker.png")||_(p,"src",v),_(p,"alt","green-pointer"),_(p,"class","svelte-vz1jks"),_(m,"class","marker svelte-vz1jks"),ut(N.src,R="markers/blue-marker.png")||_(N,"src",R),_(N,"alt","blue-pointer"),_(N,"class","svelte-vz1jks"),_(T,"class","marker svelte-vz1jks"),ut(x.src,z="markers/purple-marker.png")||_(x,"src",z),_(x,"alt","purple-pointer"),_(x,"class","svelte-vz1jks"),_(L,"class","marker svelte-vz1jks"),ut(te.src,w="markers/yellow-marker.png")||_(te,"src",w),_(te,"alt","yellow-pointer"),_(te,"class","svelte-vz1jks"),_(re,"class","marker svelte-vz1jks"),ut(q.src,I="markers/grey-marker.png")||_(q,"src",I),_(q,"alt","grey-pointer"),_(q,"class","svelte-vz1jks"),_($,"class","marker svelte-vz1jks"),_(e,"class","content svelte-vz1jks")},m(ue,ne){De(ue,e,ne),h(e,t),h(t,n),h(e,r),h(e,i),h(i,o),h(e,l),h(e,a),h(a,u),h(a,d),h(e,f),h(e,m),h(m,p),h(m,E),h(e,O),h(e,T),h(T,N),h(T,M),h(e,ee),h(e,L),h(L,x),h(L,Q),h(e,se),h(e,re),h(re,te),h(re,A),h(e,P),h(e,$),h($,q),h($,B),j=!0},i(ue){j||(Dt(()=>{j&&(F||(F=Zn(e,It,{y:200,duration:500},!0)),F.run(1))}),j=!0)},o(ue){F||(F=Zn(e,It,{y:200,duration:500},!1)),F.run(0),j=!1},d(ue){ue&&b(e),ue&&F&&F.end()}}}function Nc(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E=s[0]&&Ni(),O=s[1]&&Ci();return{c(){e=g("div"),t=g("div"),n=g("div"),r=C(`
        Guide`),i=Z(),E&&E.c(),o=Z(),l=g("div"),a=g("div"),u=C(`
        Legend`),c=Z(),O&&O.c(),this.h()},l(T){e=y(T,"DIV",{class:!0});var N=k(e);t=y(N,"DIV",{class:!0});var R=k(t);n=y(R,"DIV",{class:!0}),k(n).forEach(b),r=D(R,`
        Guide`),R.forEach(b),i=X(N),E&&E.l(N),o=X(N),l=y(N,"DIV",{class:!0});var M=k(l);a=y(M,"DIV",{class:!0}),k(a).forEach(b),u=D(M,`
        Legend`),M.forEach(b),c=X(N),O&&O.l(N),N.forEach(b),this.h()},h(){_(n,"class","arrow-right svelte-vz1jks"),tt(n,"guideOpen",s[0]),_(t,"class","title svelte-vz1jks"),_(a,"class","arrow-right svelte-vz1jks"),tt(a,"legendOpen",s[1]),_(l,"class","title svelte-vz1jks"),_(e,"class","svelte-vz1jks")},m(T,N){De(T,e,N),h(e,t),h(t,n),h(t,r),h(e,i),E&&E.m(e,null),h(e,o),h(e,l),h(l,a),h(l,u),h(e,c),O&&O.m(e,null),m=!0,p||(v=[Ke(t,"click",s[3]),Ke(l,"click",s[4])],p=!0)},p(T,[N]){(!m||N&1)&&tt(n,"guideOpen",T[0]),T[0]?E?N&1&&ge(E,1):(E=Ni(),E.c(),ge(E,1),E.m(e,o)):E&&(Kt(),Ue(E,1,1,()=>{E=null}),Yt()),(!m||N&2)&&tt(a,"legendOpen",T[1]),T[1]?O?N&2&&ge(O,1):(O=Ci(),O.c(),ge(O,1),O.m(e,null)):O&&(Kt(),Ue(O,1,1,()=>{O=null}),Yt())},i(T){m||(ge(E),ge(O),Dt(()=>{m&&(f&&f.end(1),d=Qn(e,Qr,{y:150,duration:400,delay:400}),d.start())}),m=!0)},o(T){Ue(E),Ue(O),d&&d.invalidate(),f=es(e,Qr,{y:100,duration:400}),m=!1},d(T){T&&b(e),E&&E.d(),O&&O.d(),T&&f&&f.end(),p=!1,js(v)}}}function Cc(s,e,t){let n=!1,r=!1,{delay:i}=e;const o=()=>t(0,n=!n),l=()=>t(1,r=!r);return s.$$set=a=>{"delay"in a&&t(2,i=a.delay)},[n,r,i,o,l]}class Dc extends jn{constructor(e){super(),Ln(this,e,Cc,Nc,Mn,{delay:2})}}function Di(s,e,t){const n=s.slice();return n[7]=e[t],n}function xi(s){let e,t,n,r,i,o,l,a,u,c=s[0].filter(s[5]),d=[];for(let m=0;m<c.length;m+=1)d[m]=Pi(Di(s,c,m));const f=m=>Ue(d[m],1,1,()=>{d[m]=null});return{c(){e=g("div"),t=g("input"),i=Z();for(let m=0;m<d.length;m+=1)d[m].c();o=Xn(),this.h()},l(m){e=y(m,"DIV",{class:!0});var p=k(e);t=y(p,"INPUT",{type:!0,placeholder:!0}),p.forEach(b),i=X(m);for(let v=0;v<d.length;v+=1)d[v].l(m);o=Xn(),this.h()},h(){_(t,"type","text"),_(t,"placeholder","Search tournament"),_(e,"class","search svelte-j6mz0c")},m(m,p){De(m,e,p),h(e,t),Ut(t,s[1]),De(m,i,p);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(m,p);De(m,o,p),l=!0,a||(u=Ke(t,"input",s[4]),a=!0)},p(m,p){if(p&2&&t.value!==m[1]&&Ut(t,m[1]),p&7){c=m[0].filter(m[5]);let v;for(v=0;v<c.length;v+=1){const E=Di(m,c,v);d[v]?(d[v].p(E,p),ge(d[v],1)):(d[v]=Pi(E),d[v].c(),ge(d[v],1),d[v].m(o.parentNode,o))}for(Kt(),v=c.length;v<d.length;v+=1)f(v);Yt()}},i(m){if(!l){Dt(()=>{l&&(r&&r.end(1),n=Qn(e,It,{y:200,duration:700}),n.start())});for(let p=0;p<c.length;p+=1)ge(d[p]);l=!0}},o(m){n&&n.invalidate(),r=es(e,It,{y:200,duration:500}),d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)Ue(d[p]);l=!1},d(m){m&&b(e),m&&r&&r.end(),m&&b(i),co(d,m),m&&b(o),a=!1,u()}}}function Pi(s){let e,t,n=s[7].name+"",r,i,o,l,a,u,c,d=s[7].venueAddress+"",f,m,p,v,E,O,T,N=s[7].numAttendees+"",R,M,ee,L,x,z,Q=s[7].startAt+"",se,re,te,w,A,P,$;function q(){return s[6](s[7])}return{c(){e=g("div"),t=g("a"),r=C(n),o=Z(),l=g("p"),a=g("img"),c=Z(),f=C(d),m=Z(),p=g("div"),v=g("p"),E=g("img"),T=Z(),R=C(N),M=Z(),ee=g("p"),L=g("img"),z=Z(),se=C(Q),re=Z(),this.h()},l(I){e=y(I,"DIV",{class:!0});var B=k(e);t=y(B,"A",{href:!0,target:!0,class:!0});var F=k(t);r=D(F,n),F.forEach(b),o=X(B),l=y(B,"P",{class:!0});var j=k(l);a=y(j,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),c=X(j),f=D(j,d),j.forEach(b),m=X(B),p=y(B,"DIV",{class:!0});var ue=k(p);v=y(ue,"P",{class:!0});var ne=k(v);E=y(ne,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),T=X(ne),R=D(ne,N),ne.forEach(b),M=X(ue),ee=y(ue,"P",{class:!0});var me=k(ee);L=y(me,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),z=X(me),se=D(me,Q),me.forEach(b),ue.forEach(b),re=X(B),B.forEach(b),this.h()},h(){_(t,"href",i=s[7].url),_(t,"target","_blank"),_(t,"class","svelte-j6mz0c"),_(a,"width","30px"),_(a,"height","30px"),ut(a.src,u="tournament-card-icons/map-marker.png")||_(a,"src",u),_(a,"alt","map-marker"),_(a,"class","svelte-j6mz0c"),_(l,"class","address svelte-j6mz0c"),_(E,"width","30px"),_(E,"height","30px"),ut(E.src,O="tournament-card-icons/people.png")||_(E,"src",O),_(E,"alt","people"),_(E,"class","svelte-j6mz0c"),_(v,"class","attendees svelte-j6mz0c"),_(L,"width","30px"),_(L,"height","30px"),ut(L.src,x="tournament-card-icons/clock.png")||_(L,"src",x),_(L,"alt","clock"),_(L,"class","svelte-j6mz0c"),_(ee,"class","clock svelte-j6mz0c"),_(p,"class","attendees-clock svelte-j6mz0c"),_(e,"class","tournament svelte-j6mz0c")},m(I,B){De(I,e,B),h(e,t),h(t,r),h(e,o),h(e,l),h(l,a),h(l,c),h(l,f),h(e,m),h(e,p),h(p,v),h(v,E),h(v,T),h(v,R),h(p,M),h(p,ee),h(ee,L),h(ee,z),h(ee,se),h(e,re),A=!0,P||($=Ke(e,"click",q),P=!0)},p(I,B){s=I,(!A||B&3)&&n!==(n=s[7].name+"")&&On(r,n),(!A||B&3&&i!==(i=s[7].url))&&_(t,"href",i),(!A||B&3)&&d!==(d=s[7].venueAddress+"")&&On(f,d),(!A||B&3)&&N!==(N=s[7].numAttendees+"")&&On(R,N),(!A||B&3)&&Q!==(Q=s[7].startAt+"")&&On(se,Q)},i(I){A||(Dt(()=>{A&&(w&&w.end(1),te=Qn(e,It,{y:200,duration:700}),te.start())}),A=!0)},o(I){te&&te.invalidate(),w=es(e,It,{y:200,duration:500}),A=!1},d(I){I&&b(e),I&&w&&w.end(),P=!1,$()}}}function xc(s){let e,t,n=s[0]!==void 0&&xi(s);return{c(){n&&n.c(),e=Xn()},l(r){n&&n.l(r),e=Xn()},m(r,i){n&&n.m(r,i),De(r,e,i),t=!0},p(r,[i]){r[0]!==void 0?n?(n.p(r,i),i&1&&ge(n,1)):(n=xi(r),n.c(),ge(n,1),n.m(e.parentNode,e)):n&&(Kt(),Ue(n,1,1,()=>{n=null}),Yt())},i(r){t||(ge(n),t=!0)},o(r){Ue(n),t=!1},d(r){n&&n.d(r),r&&b(e)}}}function Pc(s,e,t){let{mapResult:n}=e,{map:r}=e,i="";function o(c,d){r.panTo({lat:c,lng:d}),r.setZoom(10)}function l(){i=this.value,t(1,i)}const a=c=>c.name.toLowerCase().includes(i.trimStart().toLowerCase())||c.venueAddress.toLowerCase().includes(i.trimStart().toLowerCase()),u=c=>o(c.lat,c.lng);return s.$$set=c=>{"mapResult"in c&&t(0,n=c.mapResult),"map"in c&&t(3,r=c.map)},[n,i,o,r,l,a,u]}class Rc extends jn{constructor(e){super(),Ln(this,e,Pc,xc,Mn,{mapResult:0,map:3})}}function Ri(s){let e,t;return e=new Rc({props:{mapResult:s[1],map:s[15]}}),{c(){ts(e.$$.fragment)},l(n){ns(e.$$.fragment,n)},m(n,r){ss(e,n,r),t=!0},p(n,r){const i={};r[0]&2&&(i.mapResult=n[1]),r[0]&32768&&(i.map=n[15]),e.$set(i)},i(n){t||(ge(e.$$.fragment,n),t=!0)},o(n){Ue(e.$$.fragment,n),t=!1},d(n){rs(e,n)}}}function ji(s){let e,t,n,r,i,o,l,a,u,c,d,f;function m(x){s[22](x)}function p(x){s[23](x)}function v(x){s[24](x)}function E(x){s[25](x)}function O(x){s[26](x)}function T(x){s[27](x)}function N(x){s[28](x)}function R(x){s[29](x)}function M(x){s[30](x)}function ee(x){s[31](x)}let L={delay:s[14]};return s[6]!==void 0&&(L.state=s[6]),s[16]!==void 0&&(L.tournaments=s[16]),s[0]!==void 0&&(L.data=s[0]),s[8]!==void 0&&(L.geolocated=s[8]),s[1]!==void 0&&(L.mapResult=s[1]),s[2]!==void 0&&(L.startDate=s[2]),s[3]!==void 0&&(L.endDate=s[3]),s[4]!==void 0&&(L.country=s[4]),s[5]!==void 0&&(L.minAttendees=s[5]),s[7]!==void 0&&(L.showShareDialog=s[7]),e=new Sc({props:L}),ot.push(()=>at(e,"state",m)),ot.push(()=>at(e,"tournaments",p)),ot.push(()=>at(e,"data",v)),ot.push(()=>at(e,"geolocated",E)),ot.push(()=>at(e,"mapResult",O)),ot.push(()=>at(e,"startDate",T)),ot.push(()=>at(e,"endDate",N)),ot.push(()=>at(e,"country",R)),ot.push(()=>at(e,"minAttendees",M)),ot.push(()=>at(e,"showShareDialog",ee)),{c(){ts(e.$$.fragment)},l(x){ns(e.$$.fragment,x)},m(x,z){ss(e,x,z),f=!0},p(x,z){const Q={};z[0]&16384&&(Q.delay=x[14]),!t&&z[0]&64&&(t=!0,Q.state=x[6],lt(()=>t=!1)),!n&&z[0]&65536&&(n=!0,Q.tournaments=x[16],lt(()=>n=!1)),!r&&z[0]&1&&(r=!0,Q.data=x[0],lt(()=>r=!1)),!i&&z[0]&256&&(i=!0,Q.geolocated=x[8],lt(()=>i=!1)),!o&&z[0]&2&&(o=!0,Q.mapResult=x[1],lt(()=>o=!1)),!l&&z[0]&4&&(l=!0,Q.startDate=x[2],lt(()=>l=!1)),!a&&z[0]&8&&(a=!0,Q.endDate=x[3],lt(()=>a=!1)),!u&&z[0]&16&&(u=!0,Q.country=x[4],lt(()=>u=!1)),!c&&z[0]&32&&(c=!0,Q.minAttendees=x[5],lt(()=>c=!1)),!d&&z[0]&128&&(d=!0,Q.showShareDialog=x[7],lt(()=>d=!1)),e.$set(Q)},i(x){f||(ge(e.$$.fragment,x),f=!0)},o(x){Ue(e.$$.fragment,x),f=!1},d(x){rs(e,x)}}}function Li(s){let e,t;return e=new Dc({props:{delay:s[14]}}),{c(){ts(e.$$.fragment)},l(n){ns(e.$$.fragment,n)},m(n,r){ss(e,n,r),t=!0},p(n,r){const i={};r[0]&16384&&(i.delay=n[14]),e.$set(i)},i(n){t||(ge(e.$$.fragment,n),t=!0)},o(n){Ue(e.$$.fragment,n),t=!1},d(n){rs(e,n)}}}function jc(s){let e,t,n,r,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,x,z,Q,se,re,te,w,A,P,$,q,I,B,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,xe,ae=s[11]&&Ri(s),le=s[10]&&ji(s),oe=s[12]&&Li(s);function St(G){s[32](G)}function Ze(G){s[33](G)}function Le(G){s[34](G)}let $e={};return s[15]!==void 0&&($e.map=s[15]),s[0]!==void 0&&($e.data=s[0]),s[1]!==void 0&&($e.mapResult=s[1]),ve=new xo({props:$e}),ot.push(()=>at(ve,"map",St)),ot.push(()=>at(ve,"data",Ze)),ot.push(()=>at(ve,"mapResult",Le)),{c(){e=g("meta"),t=g("meta"),n=g("meta"),r=g("meta"),i=g("meta"),o=g("meta"),l=g("meta"),a=g("meta"),u=g("meta"),c=g("meta"),d=g("meta"),f=g("meta"),m=g("meta"),p=g("meta"),v=g("meta"),E=Z(),O=g("body"),T=g("div"),N=g("div"),R=g("button"),M=g("img"),L=Z(),x=g("button"),z=g("img"),se=Z(),re=g("button"),te=g("img"),A=Z(),P=g("div"),$=g("div"),q=g("p"),I=C(s[13]),B=Z(),F=g("button"),j=C(">"),ue=Z(),ae&&ae.c(),ne=Z(),le&&le.c(),me=Z(),oe&&oe.c(),Te=Z(),ts(ve.$$.fragment),be=Z(),de=g("footer"),pe=g("p"),qe=C("Created by: "),Se=g("a"),Re=C("Sleepy"),this.h()},l(G){const K=uo("svelte-1ot263w",document.head);e=y(K,"META",{charset:!0,class:!0}),t=y(K,"META",{name:!0,content:!0,class:!0}),n=y(K,"META",{property:!0,content:!0,class:!0}),r=y(K,"META",{property:!0,content:!0,class:!0}),i=y(K,"META",{name:!0,content:!0,class:!0}),o=y(K,"META",{name:!0,content:!0,class:!0}),l=y(K,"META",{property:!0,content:!0,class:!0}),a=y(K,"META",{property:!0,content:!0,class:!0}),u=y(K,"META",{name:!0,content:!0,class:!0}),c=y(K,"META",{name:!0,content:!0,class:!0}),d=y(K,"META",{property:!0,content:!0,class:!0}),f=y(K,"META",{name:!0,content:!0,class:!0}),m=y(K,"META",{property:!0,content:!0,class:!0}),p=y(K,"META",{property:!0,content:!0,class:!0}),v=y(K,"META",{name:!0,content:!0,class:!0}),K.forEach(b),E=X(G),O=y(G,"BODY",{class:!0});var Be=k(O);T=y(Be,"DIV",{class:!0});var Ne=k(T);N=y(Ne,"DIV",{class:!0});var Ye=k(N);R=y(Ye,"BUTTON",{class:!0});var ze=k(R);M=y(ze,"IMG",{src:!0,style:!0,alt:!0,class:!0}),ze.forEach(b),L=X(Ye),x=y(Ye,"BUTTON",{class:!0});var ht=k(x);z=y(ht,"IMG",{src:!0,style:!0,alt:!0,class:!0}),ht.forEach(b),se=X(Ye),re=y(Ye,"BUTTON",{class:!0});var He=k(re);te=y(He,"IMG",{src:!0,style:!0,alt:!0,class:!0}),He.forEach(b),Ye.forEach(b),A=X(Ne),P=y(Ne,"DIV",{class:!0,id:!0});var Me=k(P);$=y(Me,"DIV",{class:!0});var Ae=k($);q=y(Ae,"P",{style:!0,class:!0});var Ot=k(q);I=D(Ot,s[13]),Ot.forEach(b),B=X(Ae),F=y(Ae,"BUTTON",{class:!0,style:!0});var Xe=k(F);j=D(Xe,">"),Xe.forEach(b),Ae.forEach(b),ue=X(Me),ae&&ae.l(Me),ne=X(Me),le&&le.l(Me),me=X(Me),oe&&oe.l(Me),Me.forEach(b),Te=X(Ne),ns(ve.$$.fragment,Ne),Ne.forEach(b),be=X(Be),de=y(Be,"FOOTER",{style:!0,class:!0});var ke=k(de);pe=y(ke,"P",{style:!0,class:!0});var fe=k(pe);qe=D(fe,"Created by: "),Se=y(fe,"A",{href:!0,class:!0});var Ie=k(Se);Re=D(Ie,"Sleepy"),Ie.forEach(b),fe.forEach(b),ke.forEach(b),Be.forEach(b),this.h()},h(){document.title="Smash Mapping: Map",_(e,"charset","utf-8"),_(e,"class","svelte-h2ooe8"),_(t,"name","viewport"),_(t,"content","width=device-width,initial-scale=1"),_(t,"class","svelte-h2ooe8"),_(n,"property","og:locale"),_(n,"content","en_US"),_(n,"class","svelte-h2ooe8"),_(r,"property","og:type"),_(r,"content","website"),_(r,"class","svelte-h2ooe8"),_(i,"name","twitter:card"),_(i,"content","summary_large_image"),_(i,"class","svelte-h2ooe8"),_(o,"name","twitter:site"),_(o,"content","@ZedenZeder"),_(o,"class","svelte-h2ooe8"),_(l,"property","og:site_name"),_(l,"content","Smash Mapping - A New Way to Find Tournaments"),_(l,"class","svelte-h2ooe8"),_(a,"property","og:title"),_(a,"content","Smash Mapping - A New Way to Find Tournaments"),_(a,"class","svelte-h2ooe8"),_(u,"name","twitter:title"),_(u,"content","Smash Mapping - A New Way to Find Tournaments"),_(u,"class","svelte-h2ooe8"),_(c,"name","description"),_(c,"content","Showing where in-person e-sports are held."),_(c,"class","svelte-h2ooe8"),_(d,"property","og:description"),_(d,"content","Showing where in-person e-sports are held."),_(d,"class","svelte-h2ooe8"),_(f,"name","twitter:description"),_(f,"content","Showing where in-person e-sports are held."),_(f,"class","svelte-h2ooe8"),_(m,"property","og:url"),_(m,"content","https://www.smash-mapping.com/"),_(m,"class","svelte-h2ooe8"),_(p,"property","og:image"),_(p,"content","example.png"),_(p,"class","svelte-h2ooe8"),_(v,"name","twitter:image"),_(v,"content","example.png"),_(v,"class","svelte-h2ooe8"),ut(M.src,ee="filter.png")||_(M,"src",ee),We(M,"width","40px"),We(M,"height","45px"),_(M,"alt","filter-image"),_(M,"class","svelte-h2ooe8"),_(R,"class","svelte-h2ooe8"),tt(R,"sidebarSelected",s[10]),ut(z.src,Q="tournaments.png")||_(z,"src",Q),We(z,"width","40px"),We(z,"height","45px"),_(z,"alt","tournaments-image"),_(z,"class","svelte-h2ooe8"),_(x,"class","svelte-h2ooe8"),tt(x,"sidebarSelected",s[11]),ut(te.src,w="questionmark.png")||_(te,"src",w),We(te,"width","40px"),We(te,"height","40px"),_(te,"alt","tournaments-image"),_(te,"class","svelte-h2ooe8"),_(re,"class","svelte-h2ooe8"),tt(re,"sidebarSelected",s[12]),_(N,"class","sidebar-buttons svelte-h2ooe8"),We(q,"margin-left","auto"),_(q,"class","svelte-h2ooe8"),_(F,"class","tournaments-sidebar-close-button svelte-h2ooe8"),We(F,"cursor","pointer"),tt(F,"sidebarClosed",s[9]),_($,"class","tournaments-title svelte-h2ooe8"),_(P,"class","sidebar svelte-h2ooe8"),_(P,"id","tournaments-sidebar"),tt(P,"sidebarClosed",s[9]),_(T,"class","map svelte-h2ooe8"),_(Se,"href","https://twitter.com/ZedenZeder"),_(Se,"class","svelte-h2ooe8"),We(pe,"text-align","center"),We(pe,"color","white"),_(pe,"class","svelte-h2ooe8"),We(de,"height","30px"),We(de,"display","block"),_(de,"class","svelte-h2ooe8"),_(O,"class","svelte-h2ooe8")},m(G,K){h(document.head,e),h(document.head,t),h(document.head,n),h(document.head,r),h(document.head,i),h(document.head,o),h(document.head,l),h(document.head,a),h(document.head,u),h(document.head,c),h(document.head,d),h(document.head,f),h(document.head,m),h(document.head,p),h(document.head,v),De(G,E,K),De(G,O,K),h(O,T),h(T,N),h(N,R),h(R,M),h(N,L),h(N,x),h(x,z),h(N,se),h(N,re),h(re,te),h(T,A),h(T,P),h(P,$),h($,q),h(q,I),h($,B),h($,F),h(F,j),h(P,ue),ae&&ae.m(P,null),h(P,ne),le&&le.m(P,null),h(P,me),oe&&oe.m(P,null),h(T,Te),ss(ve,T,null),h(O,be),h(O,de),h(de,pe),h(pe,qe),h(pe,Se),h(Se,Re),je=!0,Ge||(xe=[Ke(R,"click",s[18]),Ke(x,"click",s[19]),Ke(re,"click",s[20]),Ke(F,"click",s[21])],Ge=!0)},p(G,K){(!je||K[0]&1024)&&tt(R,"sidebarSelected",G[10]),(!je||K[0]&2048)&&tt(x,"sidebarSelected",G[11]),(!je||K[0]&4096)&&tt(re,"sidebarSelected",G[12]),(!je||K[0]&8192)&&On(I,G[13]),(!je||K[0]&512)&&tt(F,"sidebarClosed",G[9]),G[11]?ae?(ae.p(G,K),K[0]&2048&&ge(ae,1)):(ae=Ri(G),ae.c(),ge(ae,1),ae.m(P,ne)):ae&&(Kt(),Ue(ae,1,1,()=>{ae=null}),Yt()),G[10]?le?(le.p(G,K),K[0]&1024&&ge(le,1)):(le=ji(G),le.c(),ge(le,1),le.m(P,me)):le&&(Kt(),Ue(le,1,1,()=>{le=null}),Yt()),G[12]?oe?(oe.p(G,K),K[0]&4096&&ge(oe,1)):(oe=Li(G),oe.c(),ge(oe,1),oe.m(P,null)):oe&&(Kt(),Ue(oe,1,1,()=>{oe=null}),Yt()),(!je||K[0]&512)&&tt(P,"sidebarClosed",G[9]);const Be={};!ye&&K[0]&32768&&(ye=!0,Be.map=G[15],lt(()=>ye=!1)),!Oe&&K[0]&1&&(Oe=!0,Be.data=G[0],lt(()=>Oe=!1)),!H&&K[0]&2&&(H=!0,Be.mapResult=G[1],lt(()=>H=!1)),ve.$set(Be)},i(G){je||(ge(ae),ge(le),ge(oe),ge(ve.$$.fragment,G),je=!0)},o(G){Ue(ae),Ue(le),Ue(oe),Ue(ve.$$.fragment,G),je=!1},d(G){b(e),b(t),b(n),b(r),b(i),b(o),b(l),b(a),b(u),b(c),b(d),b(f),b(m),b(p),b(v),G&&b(E),G&&b(O),ae&&ae.d(),le&&le.d(),oe&&oe.d(),rs(ve),Ge=!1,js(xe)}}}function Lc(s,e,t){let{data:n}=e,r,i,o,l,a=0,u,c,d=n.geolocated,f=!1,m=!0,p=!1,v=!1,E="Filters:",O,T,{tournaments:N}=n;function R(j){t(9,f=!1),t(10,m=j==="Filters:"),t(11,p=j==="Tournaments:"),t(12,v=j==="Help:"),t(13,E=j),(m||p||v)&&t(14,O=0)}const M=()=>R("Filters:"),ee=()=>R("Tournaments:"),L=()=>R("Help:"),x=()=>t(9,f=!f);function z(j){u=j,t(6,u)}function Q(j){N=j,t(16,N)}function se(j){n=j,t(0,n)}function re(j){d=j,t(8,d)}function te(j){r=j,t(1,r)}function w(j){i=j,t(2,i)}function A(j){o=j,t(3,o)}function P(j){l=j,t(4,l)}function $(j){a=j,t(5,a)}function q(j){c=j,t(7,c)}function I(j){T=j,t(15,T)}function B(j){n=j,t(0,n)}function F(j){r=j,t(1,r)}return s.$$set=j=>{"data"in j&&t(0,n=j.data)},[n,r,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,x,z,Q,se,re,te,w,A,P,$,q,I,B,F]}class $c extends jn{constructor(e){super(),Ln(this,e,Lc,jc,Mn,{data:0},null,[-1,-1])}}export{$c as component};
