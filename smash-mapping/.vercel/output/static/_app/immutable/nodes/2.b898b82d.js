import{S as xn,i as Rn,s as jn,k as g,l as y,m as k,h as b,n as _,p as We,b as De,J as zn,o as Di,K as Gs,q as C,a as Z,r as D,c as X,L as Ct,E as h,M as pn,N as Ut,O as Ye,P as Pi,Q as Zn,R as Xn,T as Rr,U as lr,D as tt,g as ge,v as Yt,d as Ue,f as Kt,V as Kn,W as ut,e as Wn,X as so,u as On,w as ot,Y as at,y as Qn,Z as io,z as er,A as tr,_ as lt,B as nr}from"../chunks/index.f2f7f558.js";import{_ as rr}from"../chunks/preload-helper.41c905a7.js";function oo(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var lo=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!r(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const zs=xi(lo),Hs=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],cr=1,wn=8;class jr{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const s=n>>4;if(s!==cr)throw new Error(`Got v${s} data when expected v${cr}.`);const i=Hs[n&15];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new jr(l,o,i,e)}constructor(e,t=64,n=Float64Array,s){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Hs.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-l%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,wn,e),this.coords=new this.ArrayType(this.data,wn+l+a,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(wn+o+l+a),this.ids=new this.IndexArrayType(this.data,wn,e),this.coords=new this.ArrayType(this.data,wn+l+a,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(cr<<4)+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Or(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:l}=this,a=[0,i.length-1,0],u=[];for(;a.length;){const c=a.pop()||0,d=a.pop()||0,f=a.pop()||0;if(d-f<=l){for(let E=f;E<=d;E++){const O=o[2*E],T=o[2*E+1];O>=e&&O<=n&&T>=t&&T<=s&&u.push(i[E])}continue}const m=f+d>>1,p=o[2*m],v=o[2*m+1];p>=e&&p<=n&&v>=t&&v<=s&&u.push(i[m]),(c===0?e<=p:t<=v)&&(a.push(f),a.push(m-1),a.push(1-c)),(c===0?n>=p:s>=v)&&(a.push(m+1),a.push(d),a.push(1-c))}return u}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:i,nodeSize:o}=this,l=[0,s.length-1,0],a=[],u=n*n;for(;l.length;){const c=l.pop()||0,d=l.pop()||0,f=l.pop()||0;if(d-f<=o){for(let E=f;E<=d;E++)Js(i[2*E],i[2*E+1],e,t)<=u&&a.push(s[E]);continue}const m=f+d>>1,p=i[2*m],v=i[2*m+1];Js(p,v,e,t)<=u&&a.push(s[m]),(c===0?e-n<=p:t-n<=v)&&(l.push(f),l.push(m-1),l.push(1-c)),(c===0?e+n>=p:t+n>=v)&&(l.push(m+1),l.push(d),l.push(1-c))}return a}}function Or(r,e,t,n,s,i){if(s-n<=t)return;const o=n+s>>1;Ri(r,e,o,n,s,i),Or(r,e,t,n,o-1,1-i),Or(r,e,t,o+1,s,1-i)}function Ri(r,e,t,n,s,i){for(;s>n;){if(s-n>600){const u=s-n+1,c=t-n+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(c-u/2<0?-1:1),p=Math.max(n,Math.floor(t-c*f/u+m)),v=Math.min(s,Math.floor(t+(u-c)*f/u+m));Ri(r,e,t,p,v,i)}const o=e[2*t+i];let l=n,a=s;for(En(r,e,n,t),e[2*s+i]>o&&En(r,e,n,s);l<a;){for(En(r,e,l,a),l++,a--;e[2*l+i]<o;)l++;for(;e[2*a+i]>o;)a--}e[2*n+i]===o?En(r,e,n,a):(a++,En(r,e,a,s)),a<=t&&(n=a+1),t<=a&&(s=a-1)}}function En(r,e,t,n){ur(r,t,n),ur(e,2*t,2*n),ur(e,2*t+1,2*n+1)}function ur(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function Js(r,e,t,n){const s=r-t,i=e-n;return s*s+i*i}const co={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},Ys=Math.fround||(r=>e=>(r[0]=+e,r[0]))(new Float32Array(1)),qt=2,Ft=3,hr=4,Lt=5,ji=6;class uo{constructor(e){this.options=Object.assign(Object.create(co),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:s}=this.options;t&&console.time("total time");const i=`prepare ${e.length} points`;t&&console.time(i),this.points=e;const o=[];for(let a=0;a<e.length;a++){const u=e[a];if(!u.geometry)continue;const[c,d]=u.geometry.coordinates,f=Ys(Mn(c)),m=Ys(Un(d));o.push(f,m,1/0,a,-1,1),this.options.reduce&&o.push(0)}let l=this.trees[s+1]=this._createTree(o);t&&console.timeEnd(i);for(let a=s;a>=n;a--){const u=+Date.now();l=this.trees[a]=this._createTree(this._cluster(l,a)),t&&console.log("z%d: %d clusters in %dms",a,l.numItems,+Date.now()-u)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const d=this.getClusters([n,s,180,o],t),f=this.getClusters([-180,s,i,o],t);return d.concat(f)}const l=this.trees[this._limitZoom(t)],a=l.range(Mn(n),Un(o),Mn(i),Un(s)),u=l.data,c=[];for(const d of a){const f=this.stride*d;c.push(u[f+Lt]>1?Ks(u,f,this.clusterProps):this.points[u[f+Ft]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),s="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(s);const o=i.data;if(t*this.stride>=o.length)throw new Error(s);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[t*this.stride],u=o[t*this.stride+1],c=i.within(a,u,l),d=[];for(const f of c){const m=f*this.stride;o[m+hr]===e&&d.push(o[m+Lt]>1?Ks(o,m,this.clusterProps):this.points[o[m+Ft]])}if(d.length===0)throw new Error(s);return d}getLeaves(e,t,n){t=t||10,n=n||0;const s=[];return this._appendLeaves(s,e,t,n,0),s}getTile(e,t,n){const s=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:l}=this.options,a=l/o,u=(n-a)/i,c=(n+1+a)/i,d={features:[]};return this._addTileFeatures(s.range((t-a)/i,u,(t+1+a)/i,c),s.data,t,n,i,d),t===0&&this._addTileFeatures(s.range(1-a/i,u,1,c),s.data,i,n,i,d),t===i-1&&this._addTileFeatures(s.range(0,u,a/i,c),s.data,-1,n,i,d),d.features.length?d:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,n.length!==1)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,s,i){const o=this.getChildren(t);for(const l of o){const a=l.properties;if(a&&a.cluster?i+a.point_count<=s?i+=a.point_count:i=this._appendLeaves(e,a.cluster_id,n,s,i):i<s?i++:e.push(l),e.length===n)break}return i}_createTree(e){const t=new jr(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,s,i,o){for(const l of e){const a=l*this.stride,u=t[a+Lt]>1;let c,d,f;if(u)c=Li(t,a,this.clusterProps),d=t[a],f=t[a+1];else{const v=this.points[t[a+Ft]];c=v.properties;const[E,O]=v.geometry.coordinates;d=Mn(E),f=Un(O)}const m={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(f*i-s))]],tags:c};let p;u||this.options.generateId?p=t[a+Ft]:p=this.points[t[a+Ft]].id,p!==void 0&&(m.id=p),o.features.push(m)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:s,reduce:i,minPoints:o}=this.options,l=n/(s*Math.pow(2,t)),a=e.data,u=[],c=this.stride;for(let d=0;d<a.length;d+=c){if(a[d+qt]<=t)continue;a[d+qt]=t;const f=a[d],m=a[d+1],p=e.within(a[d],a[d+1],l),v=a[d+Lt];let E=v;for(const O of p){const T=O*c;a[T+qt]>t&&(E+=a[T+Lt])}if(E>v&&E>=o){let O=f*v,T=m*v,N,R=-1;const M=((d/c|0)<<5)+(t+1)+this.points.length;for(const ee of p){const L=ee*c;if(a[L+qt]<=t)continue;a[L+qt]=t;const P=a[L+Lt];O+=a[L]*P,T+=a[L+1]*P,a[L+hr]=M,i&&(N||(N=this._map(a,d,!0),R=this.clusterProps.length,this.clusterProps.push(N)),i(N,this._map(a,L)))}a[d+hr]=M,u.push(O/E,T/E,1/0,M,-1,E),i&&u.push(R)}else{for(let O=0;O<c;O++)u.push(a[d+O]);if(E>1)for(const O of p){const T=O*c;if(!(a[T+qt]<=t)){a[T+qt]=t;for(let N=0;N<c;N++)u.push(a[T+N])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+Lt]>1){const o=this.clusterProps[e[t+ji]];return n?Object.assign({},o):o}const s=this.points[e[t+Ft]].properties,i=this.options.map(s);return n&&i===s?Object.assign({},i):i}}function Ks(r,e,t){return{type:"Feature",id:r[e+Ft],properties:Li(r,e,t),geometry:{type:"Point",coordinates:[ho(r[e]),fo(r[e+1])]}}}function Li(r,e,t){const n=r[e+Lt],s=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,i=r[e+ji],o=i===-1?{}:Object.assign({},t[i]);return Object.assign(o,{cluster:!0,cluster_id:r[e+Ft],point_count:n,point_count_abbreviated:s})}function Mn(r){return r/360+.5}function Un(r){const e=Math.sin(r*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function ho(r){return(r-.5)*360}function fo(r){const e=(180-r*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function po(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}class At{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class kr{constructor({markers:e,position:t}){this.markers=e,t&&(t instanceof google.maps.LatLng?this._position=t:this._position=new google.maps.LatLng(t))}get bounds(){if(this.markers.length===0&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(At.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>At.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(At.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class mo{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return vo(e)}}const vo=r=>r.map(t=>new kr({position:At.getPosition(t),markers:[t]}));class _o extends mo{constructor(e){var{maxZoom:t,radius:n=60}=e,s=po(e,["maxZoom","radius"]);super({maxZoom:t}),this.superCluster=new uo(Object.assign({maxZoom:this.maxZoom,radius:n},s)),this.state={zoom:null}}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!zs(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const s=this.markers.map(i=>{const o=At.getPosition(i);return{type:"Feature",geometry:{type:"Point",coordinates:[o.lng(),o.lat()]},properties:{marker:i}}});this.superCluster.load(s)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!zs(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(t=>this.transformCluster(t))}transformCluster({geometry:{coordinates:[e,t]},properties:n}){if(n.cluster)return new kr({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(i=>i.properties.marker),position:{lat:t,lng:e}});const s=n.marker;return new kr({markers:[s],position:At.getPosition(s)})}}class go{constructor(e,t){this.markers={sum:e.length};const n=t.map(i=>i.count),s=n.reduce((i,o)=>i+o,0);this.clusters={count:t.length,markers:{mean:s/t.length,sum:s,min:Math.min(...n),max:Math.max(...n)}}}}class yo{render({count:e,position:t},n,s){const o=`<svg fill="${e>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">${e}</text>
</svg>`,l=`Cluster of ${e} markers`,a=Number(google.maps.Marker.MAX_ZINDEX)+e;if(At.isAdvancedMarkerAvailable(s)){const c=document.createElement("div");c.innerHTML=o;const d=c.firstElementChild;d.setAttribute("transform","translate(0 25)");const f={map:s,position:t,zIndex:a,title:l,content:d};return new google.maps.marker.AdvancedMarkerElement(f)}const u={position:t,zIndex:a,title:l,icon:{url:`data:image/svg+xml;base64,${btoa(o)}`,anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}function bo(r,e){for(let t in e.prototype)r.prototype[t]=e.prototype[t]}class Lr{constructor(){bo(Lr,google.maps.OverlayView)}}var An;(function(r){r.CLUSTERING_BEGIN="clusteringbegin",r.CLUSTERING_END="clusteringend",r.CLUSTER_CLICK="click"})(An||(An={}));const wo=(r,e,t)=>{t.fitBounds(e.bounds)};class Eo extends Lr{constructor({map:e,markers:t=[],algorithmOptions:n={},algorithm:s=new _o(n),renderer:i=new yo,onClusterClick:o=wo}){super(),this.markers=[...t],this.clusters=[],this.algorithm=s,this.renderer=i,this.onClusterClick=o,e&&this.setMap(e)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(n=>{this.addMarker(n,!0)}),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return n===-1?!1:(At.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach(s=>{n=this.removeMarker(s,!0)||n}),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,An.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(n||n==null)&&(this.reset(),this.clusters=t,this.renderClusters()),google.maps.event.trigger(this,An.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>At.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new go(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),this.onClusterClick&&n.marker.addListener("click",s=>{google.maps.event.trigger(this,An.CLUSTER_CLICK,n),this.onClusterClick(s,n,t)})),At.setMap(n.marker,t)})}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function To(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})}var Oo=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!r(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!r(e[o],t[o]))return!1}return!0}return e!==e&&t!==t};const Ws="__googleMapsScriptId";var mn;(function(r){r[r.INITIALIZED=0]="INITIALIZED",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.FAILURE=3]="FAILURE"})(mn||(mn={}));class $t{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:s,id:i=Ws,language:o,libraries:l=[],mapIds:a,nonce:u,region:c,retries:d=3,url:f="https://maps.googleapis.com/maps/api/js",version:m}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=s,this.id=i||Ws,this.language=o,this.libraries=l,this.mapIds=a,this.nonce=u,this.region=c,this.retries=d,this.url=f,this.version=m,$t.instance){if(!Oo(this.options,$t.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify($t.instance.options)}`);return $t.instance}$t.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?mn.FAILURE:this.done?mn.SUCCESS:this.loading?mn.LOADING:mn.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,t)=>{this.loadCallback(n=>{n?t(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(i=>!n[i]&&delete n[i]),!((t=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||t===void 0)&&t.importLibrary||(i=>{let o,l,a,u="The Google Maps JavaScript API",c="google",d="importLibrary",f="__ib__",m=document,p=window;p=p[c]||(p[c]={});const v=p.maps||(p.maps={}),E=new Set,O=new URLSearchParams,T=()=>o||(o=new Promise((N,R)=>To(this,void 0,void 0,function*(){var M;yield l=m.createElement("script"),l.id=this.id,O.set("libraries",[...E]+"");for(a in i)O.set(a.replace(/[A-Z]/g,ee=>"_"+ee[0].toLowerCase()),i[a]);O.set("callback",c+".maps."+f),l.src=this.url+"?"+O,v[f]=N,l.onerror=()=>o=R(Error(u+" could not load.")),l.nonce=this.nonce||((M=m.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",m.head.append(l)})));v[d]?console.warn(u+" only loads once. Ignoring:",i):v[d]=(N,...R)=>E.add(N)&&T().then(()=>v[d](N,...R))})(n);const s=this.libraries.map(i=>this.importLibrary(i));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),i=>{const o=new ErrorEvent("error",{error:i});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},t)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}function ko(r){let e;return{c(){e=g("div"),this.h()},l(t){e=y(t,"DIV",{id:!0,style:!0,class:!0});var n=k(e);n.forEach(b),this.h()},h(){_(e,"id","map"),We(e,"height","100%"),We(e,"width","100%"),_(e,"class","svelte-1jw0l0w")},m(t,n){De(t,e,n)},p:zn,i:zn,o:zn,d(t){t&&b(e)}}}function Ao(r,e,t){let{data:n}=e,{map:s}=e,i=[],o,l=[],a,u,{mapResult:c}=e;const d=new $t({apiKey:n.GOOGLE_MAPS_API_KEY,version:"weekly"});Di(async()=>{d.load().then(async()=>{await google.maps.importLibrary("maps");let p={lat:43.73758865859436,lng:-79.50304080536894};u=new google.maps.InfoWindow,t(0,s=new google.maps.Map(document.getElementById("map"),{center:p,zoom:8,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"administrative.country",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"simplified"},{saturation:"-100"},{lightness:"30"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{gamma:"0.00"},{lightness:"74"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:"3"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]})),s.setOptions({minZoom:3,maxZoom:18,zoomControl:!0}),a=new Eo({map:s,markers:i,algorithmOptions:{maxZoom:7}})})});function f(){for(let p=0;p<i.length;p++)i[p].setMap(null);i.length=0}function m(p){f(),a.clearMarkers(),i=[],l=[];for(const v of p){o=new google.maps.Marker({position:new google.maps.LatLng(v.lat,v.lng),map:s,icon:"markers/red-marker.png"}),l.includes(o.position.toString())&&(o.setIcon("markers/yellow-marker.png"),o.setPosition(new google.maps.LatLng(p.lat+1e-4,p.lng+1e-4))),v.numAttendees>50&&o.setIcon("markers/green-marker.png"),v.numAttendees>100&&o.setIcon("markers/blue-marker.png"),v.numAttendees>500&&o.setIcon("markers/purple-marker.png"),v.state===3&&o.setIcon("markers/grey-marker.png"),i.push(o),l.push(o.getPosition().toString());const E=v.primaryContact.includes("@")?'<a href="mailto:'+v.primaryContact+'" target="_blank">'+v.primaryContact+"</a>":'<a href="'+v.primaryContact+'" target="_blank">'+v.primaryContact+"</a>";google.maps.event.addListener(o,"click",function(O,T){return function(){var N=`<div style="display: block;
        text-align: left"><h2>`+T.name+"</h2><p><strong>Address: </strong><a target='_blank' href='https://www.google.com/maps/place/"+T.venueAddress.replace(" ","+")+"'>"+T.venueAddress+"</a></p><p><strong>Date: </strong>"+T.startAt+"</p><p><strong>Attendees: </strong>"+T.numAttendees+"</p><p><strong>Contact Info: </strong>"+E+"</p><p><strong>Start.gg site: </strong><a target='_blank' href='"+T.url+"'>"+T.url+"</a></p></div>";u.setContent(N),u.open(s,O),google.maps.event.addListener(s,"click",function(R){u.close()}),google.maps.event.addListener(s,"drag",function(R){u.close()}),google.maps.event.addListener(a,"click",function(R){u.close()})}}(o,v))}a.addMarkers(i)}return r.$$set=p=>{"data"in p&&t(1,n=p.data),"map"in p&&t(0,s=p.map),"mapResult"in p&&t(2,c=p.mapResult)},r.$$.update=()=>{r.$$.dirty&4&&c&&m(c)},[s,n,c]}let Io=class extends xn{constructor(e){super(),Rn(this,e,Ao,ko,jn,{data:1,map:0,mapResult:2})}};function So(r){return--r*r*((1.70158+1)*r+1.70158)+1}function Mi(r){const e=r-1;return e*e*e+1}function Zs(r,{delay:e=0,duration:t=400,easing:n=Mi,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(r),a=+l.opacity,u=l.transform==="none"?"":l.transform,c=a*(1-o),[d,f]=Gs(s),[m,p]=Gs(i);return{delay:e,duration:t,easing:n,css:(v,E)=>`
			transform: ${u} translate(${(1-v)*d}${f}, ${(1-v)*m}${p});
			opacity: ${a-c*E}`}}function It(r,{delay:e=0,duration:t=400,easing:n=Mi,axis:s="y"}={}){const i=getComputedStyle(r),o=+i.opacity,l=s==="y"?"height":"width",a=parseFloat(i[l]),u=s==="y"?["top","bottom"]:["left","right"],c=u.map(O=>`${O[0].toUpperCase()}${O.slice(1)}`),d=parseFloat(i[`padding${c[0]}`]),f=parseFloat(i[`padding${c[1]}`]),m=parseFloat(i[`margin${c[0]}`]),p=parseFloat(i[`margin${c[1]}`]),v=parseFloat(i[`border${c[0]}Width`]),E=parseFloat(i[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:O=>`overflow: hidden;opacity: ${Math.min(O*20,1)*o};${l}: ${O*a}px;padding-${u[0]}: ${O*d}px;padding-${u[1]}: ${O*f}px;margin-${u[0]}: ${O*m}px;margin-${u[1]}: ${O*p}px;border-${u[0]}-width: ${O*v}px;border-${u[1]}-width: ${O*E}px;`}}const Mr=JSON,No=r=>r.toUpperCase(),Co=r=>{const e={};return r.forEach((t,n)=>{e[n]=t}),e},Do=(r,e,t)=>r.document?r:{document:r,variables:e,requestHeaders:t,signal:void 0},Po=(r,e,t)=>r.query?r:{query:r,variables:e,requestHeaders:t,signal:void 0},xo=(r,e)=>r.documents?r:{documents:r,requestHeaders:e,signal:void 0};function Hn(r,e){if(!!!r)throw new Error(e)}function Ro(r){return typeof r=="object"&&r!==null}function jo(r,e){if(!!!r)throw new Error(e??"Unexpected invariant triggered.")}const Lo=/\r\n|[\n\r]/g;function Ar(r,e){let t=0,n=1;for(const s of r.body.matchAll(Lo)){if(typeof s.index=="number"||jo(!1),s.index>=e)break;t=s.index+s[0].length,n+=1}return{line:n,column:e+1-t}}function Mo(r){return Ui(r.source,Ar(r.source,r.start))}function Ui(r,e){const t=r.locationOffset.column-1,n="".padStart(t)+r.body,s=e.line-1,i=r.locationOffset.line-1,o=e.line+i,l=e.line===1?t:0,a=e.column+l,u=`${r.name}:${o}:${a}
`,c=n.split(/\r\n|[\n\r]/g),d=c[s];if(d.length>120){const f=Math.floor(a/80),m=a%80,p=[];for(let v=0;v<d.length;v+=80)p.push(d.slice(v,v+80));return u+Xs([[`${o} |`,p[0]],...p.slice(1,f+1).map(v=>["|",v]),["|","^".padStart(m)],["|",p[f+1]]])}return u+Xs([[`${o-1} |`,c[s-1]],[`${o} |`,d],["|","^".padStart(a)],[`${o+1} |`,c[s+1]]])}function Xs(r){const e=r.filter(([n,s])=>s!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,s])=>n.padStart(t)+(s?" "+s:"")).join(`
`)}function Uo(r){const e=r[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:r[1],positions:r[2],path:r[3],originalError:r[4],extensions:r[5]}:e}class Ur extends Error{constructor(e,...t){var n,s,i;const{nodes:o,source:l,positions:a,path:u,originalError:c,extensions:d}=Uo(t);super(e),this.name="GraphQLError",this.path=u??void 0,this.originalError=c??void 0,this.nodes=Qs(Array.isArray(o)?o:o?[o]:void 0);const f=Qs((n=this.nodes)===null||n===void 0?void 0:n.map(p=>p.loc).filter(p=>p!=null));this.source=l??(f==null||(s=f[0])===null||s===void 0?void 0:s.source),this.positions=a??(f==null?void 0:f.map(p=>p.start)),this.locations=a&&l?a.map(p=>Ar(l,p)):f==null?void 0:f.map(p=>Ar(p.source,p.start));const m=Ro(c==null?void 0:c.extensions)?c==null?void 0:c.extensions:void 0;this.extensions=(i=d??m)!==null&&i!==void 0?i:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ur):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+Mo(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Ui(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function Qs(r){return r===void 0||r.length===0?void 0:r}function Fe(r,e,t){return new Ur(`Syntax Error: ${t}`,{source:r,positions:[e]})}class Fo{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Fi{constructor(e,t,n,s,i,o){this.kind=e,this.start=t,this.end=n,this.line=s,this.column=i,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const Bi={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Bo=new Set(Object.keys(Bi));function ei(r){const e=r==null?void 0:r.kind;return typeof e=="string"&&Bo.has(e)}var vn;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(vn||(vn={}));var Ir;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Ir||(Ir={}));var J;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(J||(J={}));function Sr(r){return r===9||r===32}function Cn(r){return r>=48&&r<=57}function $i(r){return r>=97&&r<=122||r>=65&&r<=90}function Vi(r){return $i(r)||r===95}function $o(r){return $i(r)||Cn(r)||r===95}function Vo(r){var e;let t=Number.MAX_SAFE_INTEGER,n=null,s=-1;for(let o=0;o<r.length;++o){var i;const l=r[o],a=qo(l);a!==l.length&&(n=(i=n)!==null&&i!==void 0?i:o,s=o,o!==0&&a<t&&(t=a))}return r.map((o,l)=>l===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,s+1)}function qo(r){let e=0;for(;e<r.length&&Sr(r.charCodeAt(e));)++e;return e}function Go(r,e){const t=r.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),s=n.length===1,i=n.length>1&&n.slice(1).every(m=>m.length===0||Sr(m.charCodeAt(0))),o=t.endsWith('\\"""'),l=r.endsWith('"')&&!o,a=r.endsWith("\\"),u=l||a,c=!(e!=null&&e.minimize)&&(!s||r.length>70||u||i||o);let d="";const f=s&&Sr(r.charCodeAt(0));return(c&&!f||i)&&(d+=`
`),d+=t,(c||u)&&(d+=`
`),'"""'+d+'"""'}var S;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(S||(S={}));class zo{constructor(e){const t=new Fi(S.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==S.EOF)do if(e.next)e=e.next;else{const t=Jo(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===S.COMMENT);return e}}function Ho(r){return r===S.BANG||r===S.DOLLAR||r===S.AMP||r===S.PAREN_L||r===S.PAREN_R||r===S.SPREAD||r===S.COLON||r===S.EQUALS||r===S.AT||r===S.BRACKET_L||r===S.BRACKET_R||r===S.BRACE_L||r===S.PIPE||r===S.BRACE_R}function gn(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function sr(r,e){return qi(r.charCodeAt(e))&&Gi(r.charCodeAt(e+1))}function qi(r){return r>=55296&&r<=56319}function Gi(r){return r>=56320&&r<=57343}function Wt(r,e){const t=r.source.body.codePointAt(e);if(t===void 0)return S.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Ce(r,e,t,n,s){const i=r.line,o=1+t-r.lineStart;return new Fi(e,t,n,i,o,s)}function Jo(r,e){const t=r.source.body,n=t.length;let s=e;for(;s<n;){const i=t.charCodeAt(s);switch(i){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++r.line,r.lineStart=s;continue;case 13:t.charCodeAt(s+1)===10?s+=2:++s,++r.line,r.lineStart=s;continue;case 35:return Yo(r,s);case 33:return Ce(r,S.BANG,s,s+1);case 36:return Ce(r,S.DOLLAR,s,s+1);case 38:return Ce(r,S.AMP,s,s+1);case 40:return Ce(r,S.PAREN_L,s,s+1);case 41:return Ce(r,S.PAREN_R,s,s+1);case 46:if(t.charCodeAt(s+1)===46&&t.charCodeAt(s+2)===46)return Ce(r,S.SPREAD,s,s+3);break;case 58:return Ce(r,S.COLON,s,s+1);case 61:return Ce(r,S.EQUALS,s,s+1);case 64:return Ce(r,S.AT,s,s+1);case 91:return Ce(r,S.BRACKET_L,s,s+1);case 93:return Ce(r,S.BRACKET_R,s,s+1);case 123:return Ce(r,S.BRACE_L,s,s+1);case 124:return Ce(r,S.PIPE,s,s+1);case 125:return Ce(r,S.BRACE_R,s,s+1);case 34:return t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34?ea(r,s):Wo(r,s)}if(Cn(i)||i===45)return Ko(r,s,i);if(Vi(i))return ta(r,s);throw Fe(r.source,s,i===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:gn(i)||sr(t,s)?`Unexpected character: ${Wt(r,s)}.`:`Invalid character: ${Wt(r,s)}.`)}return Ce(r,S.EOF,n,n)}function Yo(r,e){const t=r.source.body,n=t.length;let s=e+1;for(;s<n;){const i=t.charCodeAt(s);if(i===10||i===13)break;if(gn(i))++s;else if(sr(t,s))s+=2;else break}return Ce(r,S.COMMENT,e,s,t.slice(e+1,s))}function Ko(r,e,t){const n=r.source.body;let s=e,i=t,o=!1;if(i===45&&(i=n.charCodeAt(++s)),i===48){if(i=n.charCodeAt(++s),Cn(i))throw Fe(r.source,s,`Invalid number, unexpected digit after 0: ${Wt(r,s)}.`)}else s=dr(r,s,i),i=n.charCodeAt(s);if(i===46&&(o=!0,i=n.charCodeAt(++s),s=dr(r,s,i),i=n.charCodeAt(s)),(i===69||i===101)&&(o=!0,i=n.charCodeAt(++s),(i===43||i===45)&&(i=n.charCodeAt(++s)),s=dr(r,s,i),i=n.charCodeAt(s)),i===46||Vi(i))throw Fe(r.source,s,`Invalid number, expected digit but got: ${Wt(r,s)}.`);return Ce(r,o?S.FLOAT:S.INT,e,s,n.slice(e,s))}function dr(r,e,t){if(!Cn(t))throw Fe(r.source,e,`Invalid number, expected digit but got: ${Wt(r,e)}.`);const n=r.source.body;let s=e+1;for(;Cn(n.charCodeAt(s));)++s;return s}function Wo(r,e){const t=r.source.body,n=t.length;let s=e+1,i=s,o="";for(;s<n;){const l=t.charCodeAt(s);if(l===34)return o+=t.slice(i,s),Ce(r,S.STRING,e,s+1,o);if(l===92){o+=t.slice(i,s);const a=t.charCodeAt(s+1)===117?t.charCodeAt(s+2)===123?Zo(r,s):Xo(r,s):Qo(r,s);o+=a.value,s+=a.size,i=s;continue}if(l===10||l===13)break;if(gn(l))++s;else if(sr(t,s))s+=2;else throw Fe(r.source,s,`Invalid character within String: ${Wt(r,s)}.`)}throw Fe(r.source,s,"Unterminated string.")}function Zo(r,e){const t=r.source.body;let n=0,s=3;for(;s<12;){const i=t.charCodeAt(e+s++);if(i===125){if(s<5||!gn(n))break;return{value:String.fromCodePoint(n),size:s}}if(n=n<<4|kn(i),n<0)break}throw Fe(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+s)}".`)}function Xo(r,e){const t=r.source.body,n=ti(t,e+2);if(gn(n))return{value:String.fromCodePoint(n),size:6};if(qi(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const s=ti(t,e+8);if(Gi(s))return{value:String.fromCodePoint(n,s),size:12}}throw Fe(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function ti(r,e){return kn(r.charCodeAt(e))<<12|kn(r.charCodeAt(e+1))<<8|kn(r.charCodeAt(e+2))<<4|kn(r.charCodeAt(e+3))}function kn(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function Qo(r,e){const t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Fe(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function ea(r,e){const t=r.source.body,n=t.length;let s=r.lineStart,i=e+3,o=i,l="";const a=[];for(;i<n;){const u=t.charCodeAt(i);if(u===34&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34){l+=t.slice(o,i),a.push(l);const c=Ce(r,S.BLOCK_STRING,e,i+3,Vo(a).join(`
`));return r.line+=a.length-1,r.lineStart=s,c}if(u===92&&t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34&&t.charCodeAt(i+3)===34){l+=t.slice(o,i),o=i+1,i+=4;continue}if(u===10||u===13){l+=t.slice(o,i),a.push(l),u===13&&t.charCodeAt(i+1)===10?i+=2:++i,l="",o=i,s=i;continue}if(gn(u))++i;else if(sr(t,i))i+=2;else throw Fe(r.source,i,`Invalid character within String: ${Wt(r,i)}.`)}throw Fe(r.source,i,"Unterminated string.")}function ta(r,e){const t=r.source.body,n=t.length;let s=e+1;for(;s<n;){const i=t.charCodeAt(s);if($o(i))++s;else break}return Ce(r,S.NAME,e,s,t.slice(e,s))}const na=10,zi=2;function Hi(r){return ir(r,[])}function ir(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return ra(r,e);default:return String(r)}}function ra(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";const t=[...e,r];if(sa(r)){const n=r.toJSON();if(n!==r)return typeof n=="string"?n:ir(n,t)}else if(Array.isArray(r))return oa(r,t);return ia(r,t)}function sa(r){return typeof r.toJSON=="function"}function ia(r,e){const t=Object.entries(r);return t.length===0?"{}":e.length>zi?"["+aa(r)+"]":"{ "+t.map(([s,i])=>s+": "+ir(i,e)).join(", ")+" }"}function oa(r,e){if(r.length===0)return"[]";if(e.length>zi)return"[Array]";const t=Math.min(na,r.length),n=r.length-t,s=[];for(let i=0;i<t;++i)s.push(ir(r[i],e));return n===1?s.push("... 1 more item"):n>1&&s.push(`... ${n} more items`),"["+s.join(", ")+"]"}function aa(r){const e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){const t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const la=function(e,t){return e instanceof t};class Ji{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Hn(!1,`Body must be a string. Received: ${Hi(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Hn(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Hn(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function ca(r){return la(r,Ji)}function ua(r,e){return new ha(r,e).parseDocument()}class ha{constructor(e,t={}){const n=ca(e)?e:new Ji(e);this._lexer=new zo(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(S.NAME);return this.node(e,{kind:J.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:J.DOCUMENT,definitions:this.many(S.SOF,this.parseDefinition,S.EOF)})}parseDefinition(){if(this.peek(S.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===S.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Fe(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(S.BRACE_L))return this.node(e,{kind:J.OPERATION_DEFINITION,operation:vn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(S.NAME)&&(n=this.parseName()),this.node(e,{kind:J.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(S.NAME);switch(e.value){case"query":return vn.QUERY;case"mutation":return vn.MUTATION;case"subscription":return vn.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(S.PAREN_L,this.parseVariableDefinition,S.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:J.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(S.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(S.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(S.DOLLAR),this.node(e,{kind:J.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:J.SELECTION_SET,selections:this.many(S.BRACE_L,this.parseSelection,S.BRACE_R)})}parseSelection(){return this.peek(S.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,s;return this.expectOptionalToken(S.COLON)?(n=t,s=this.parseName()):s=t,this.node(e,{kind:J.FIELD,alias:n,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(S.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(S.PAREN_L,t,S.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(S.COLON),this.node(t,{kind:J.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(S.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(S.NAME)?this.node(e,{kind:J.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:J.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:J.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case S.BRACKET_L:return this.parseList(e);case S.BRACE_L:return this.parseObject(e);case S.INT:return this.advanceLexer(),this.node(t,{kind:J.INT,value:t.value});case S.FLOAT:return this.advanceLexer(),this.node(t,{kind:J.FLOAT,value:t.value});case S.STRING:case S.BLOCK_STRING:return this.parseStringLiteral();case S.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:J.BOOLEAN,value:!0});case"false":return this.node(t,{kind:J.BOOLEAN,value:!1});case"null":return this.node(t,{kind:J.NULL});default:return this.node(t,{kind:J.ENUM,value:t.value})}case S.DOLLAR:if(e)if(this.expectToken(S.DOLLAR),this._lexer.token.kind===S.NAME){const n=this._lexer.token.value;throw Fe(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:J.STRING,value:e.value,block:e.kind===S.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:J.LIST,values:this.any(S.BRACKET_L,t,S.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:J.OBJECT,fields:this.any(S.BRACE_L,t,S.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(S.COLON),this.node(t,{kind:J.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(S.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(S.AT),this.node(t,{kind:J.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(S.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(S.BRACKET_R),t=this.node(e,{kind:J.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(S.BANG)?this.node(e,{kind:J.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:J.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(S.STRING)||this.peek(S.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),s=this.many(S.BRACE_L,this.parseOperationTypeDefinition,S.BRACE_R);return this.node(e,{kind:J.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:s})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(S.COLON);const n=this.parseNamedType();return this.node(e,{kind:J.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),s=this.parseConstDirectives();return this.node(e,{kind:J.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:s})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:J.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:s,directives:i,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(S.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(S.BRACE_L,this.parseFieldDefinition,S.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),s=this.parseArgumentDefs();this.expectToken(S.COLON);const i=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:J.FIELD_DEFINITION,description:t,name:n,arguments:s,type:i,directives:o})}parseArgumentDefs(){return this.optionalMany(S.PAREN_L,this.parseInputValueDef,S.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(S.COLON);const s=this.parseTypeReference();let i;this.expectOptionalToken(S.EQUALS)&&(i=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:J.INPUT_VALUE_DEFINITION,description:t,name:n,type:s,defaultValue:i,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),s=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:J.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:s,directives:i,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),s=this.parseConstDirectives(),i=this.parseUnionMemberTypes();return this.node(e,{kind:J.UNION_TYPE_DEFINITION,description:t,name:n,directives:s,types:i})}parseUnionMemberTypes(){return this.expectOptionalToken(S.EQUALS)?this.delimitedMany(S.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),s=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();return this.node(e,{kind:J.ENUM_TYPE_DEFINITION,description:t,name:n,directives:s,values:i})}parseEnumValuesDefinition(){return this.optionalMany(S.BRACE_L,this.parseEnumValueDefinition,S.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),s=this.parseConstDirectives();return this.node(e,{kind:J.ENUM_VALUE_DEFINITION,description:t,name:n,directives:s})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Fe(this._lexer.source,this._lexer.token.start,`${Fn(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),s=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();return this.node(e,{kind:J.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:s,fields:i})}parseInputFieldsDefinition(){return this.optionalMany(S.BRACE_L,this.parseInputValueDef,S.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===S.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(S.BRACE_L,this.parseOperationTypeDefinition,S.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:J.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:J.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(n.length===0&&s.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:J.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:s,fields:i})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),i=this.parseFieldsDefinition();if(n.length===0&&s.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:J.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:s,fields:i})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),s=this.parseUnionMemberTypes();if(n.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:J.UNION_TYPE_EXTENSION,name:t,directives:n,types:s})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();if(n.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:J.ENUM_TYPE_EXTENSION,name:t,directives:n,values:s})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();if(n.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:J.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:s})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(S.AT);const n=this.parseName(),s=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:J.DIRECTIVE_DEFINITION,description:t,name:n,arguments:s,repeatable:i,locations:o})}parseDirectiveLocations(){return this.delimitedMany(S.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Ir,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new Fo(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Fe(this._lexer.source,t.start,`Expected ${Yi(e)}, found ${Fn(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===S.NAME&&t.value===e)this.advanceLexer();else throw Fe(this._lexer.source,t.start,`Expected "${e}", found ${Fn(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===S.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return Fe(this._lexer.source,t.start,`Unexpected ${Fn(t)}.`)}any(e,t,n){this.expectToken(e);const s=[];for(;!this.expectOptionalToken(n);)s.push(t.call(this));return s}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const s=[];do s.push(t.call(this));while(!this.expectOptionalToken(n));return s}return[]}many(e,t,n){this.expectToken(e);const s=[];do s.push(t.call(this));while(!this.expectOptionalToken(n));return s}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==S.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw Fe(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Fn(r){const e=r.value;return Yi(r.kind)+(e!=null?` "${e}"`:"")}function Yi(r){return Ho(r)?`"${r}"`:r}function da(r){return`"${r.replace(fa,pa)}"`}const fa=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function pa(r){return ma[r.charCodeAt(0)]}const ma=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],va=Object.freeze({});function _a(r,e,t=Bi){const n=new Map;for(const O of Object.values(J))n.set(O,ga(e,O));let s,i=Array.isArray(r),o=[r],l=-1,a=[],u=r,c,d;const f=[],m=[];do{l++;const O=l===o.length,T=O&&a.length!==0;if(O){if(c=m.length===0?void 0:f[f.length-1],u=d,d=m.pop(),T)if(i){u=u.slice();let R=0;for(const[M,ee]of a){const L=M-R;ee===null?(u.splice(L,1),R++):u[L]=ee}}else{u=Object.defineProperties({},Object.getOwnPropertyDescriptors(u));for(const[R,M]of a)u[R]=M}l=s.index,o=s.keys,a=s.edits,i=s.inArray,s=s.prev}else if(d){if(c=i?l:o[l],u=d[c],u==null)continue;f.push(c)}let N;if(!Array.isArray(u)){var p,v;ei(u)||Hn(!1,`Invalid AST Node: ${Hi(u)}.`);const R=O?(p=n.get(u.kind))===null||p===void 0?void 0:p.leave:(v=n.get(u.kind))===null||v===void 0?void 0:v.enter;if(N=R==null?void 0:R.call(e,u,c,d,f,m),N===va)break;if(N===!1){if(!O){f.pop();continue}}else if(N!==void 0&&(a.push([c,N]),!O))if(ei(N))u=N;else{f.pop();continue}}if(N===void 0&&T&&a.push([c,u]),O)f.pop();else{var E;s={inArray:i,index:l,keys:o,edits:a,prev:s},i=Array.isArray(u),o=i?u:(E=t[u.kind])!==null&&E!==void 0?E:[],l=-1,a=[],d&&m.push(d),d=u}}while(s!==void 0);return a.length!==0?a[a.length-1][1]:r}function ga(r,e){const t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function ya(r){return _a(r,wa)}const ba=80,wa={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>U(r.definitions,`

`)},OperationDefinition:{leave(r){const e=ie("(",U(r.variableDefinitions,", "),")"),t=U([r.operation,U([r.name,e]),U(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:n})=>r+": "+e+ie(" = ",t)+ie(" ",U(n," "))},SelectionSet:{leave:({selections:r})=>Et(r)},Field:{leave({alias:r,name:e,arguments:t,directives:n,selectionSet:s}){const i=ie("",r,": ")+e;let o=i+ie("(",U(t,", "),")");return o.length>ba&&(o=i+ie(`(
`,Jn(U(t,`
`)),`
)`)),U([o,U(n," "),s]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+ie(" ",U(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>U(["...",ie("on ",r),U(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:s})=>`fragment ${r}${ie("(",U(t,", "),")")} on ${e} ${ie("",U(n," ")," ")}`+s},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?Go(r):da(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+U(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+U(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+ie("(",U(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>ie("",r,`
`)+U(["schema",U(e," "),Et(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>ie("",r,`
`)+U(["scalar",e,U(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:s})=>ie("",r,`
`)+U(["type",e,ie("implements ",U(t," & ")),U(n," "),Et(s)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:n,directives:s})=>ie("",r,`
`)+e+(ni(t)?ie(`(
`,Jn(U(t,`
`)),`
)`):ie("(",U(t,", "),")"))+": "+n+ie(" ",U(s," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:n,directives:s})=>ie("",r,`
`)+U([e+": "+t,ie("= ",n),U(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:s})=>ie("",r,`
`)+U(["interface",e,ie("implements ",U(t," & ")),U(n," "),Et(s)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:n})=>ie("",r,`
`)+U(["union",e,U(t," "),ie("= ",U(n," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:n})=>ie("",r,`
`)+U(["enum",e,U(t," "),Et(n)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>ie("",r,`
`)+U([e,U(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:n})=>ie("",r,`
`)+U(["input",e,U(t," "),Et(n)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:n,locations:s})=>ie("",r,`
`)+"directive @"+e+(ni(t)?ie(`(
`,Jn(U(t,`
`)),`
)`):ie("(",U(t,", "),")"))+(n?" repeatable":"")+" on "+U(s," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>U(["extend schema",U(r," "),Et(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>U(["extend scalar",r,U(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>U(["extend type",r,ie("implements ",U(e," & ")),U(t," "),Et(n)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>U(["extend interface",r,ie("implements ",U(e," & ")),U(t," "),Et(n)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>U(["extend union",r,U(e," "),ie("= ",U(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>U(["extend enum",r,U(e," "),Et(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>U(["extend input",r,U(e," "),Et(t)]," ")}};function U(r,e=""){var t;return(t=r==null?void 0:r.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function Et(r){return ie(`{
`,Jn(U(r,`
`)),`
}`)}function ie(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Jn(r){return ie("  ",r.replace(/\n/g,`
  `))}function ni(r){var e;return(e=r==null?void 0:r.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}const ri=r=>{var n,s;let e;const t=r.definitions.filter(i=>i.kind==="OperationDefinition");return t.length===1&&(e=(s=(n=t[0])==null?void 0:n.name)==null?void 0:s.value),e},fr=r=>{if(typeof r=="string"){let t;try{const n=ua(r);t=ri(n)}catch{}return{query:r,operationName:t}}const e=ri(r);return{query:ya(r),operationName:e}};class In extends Error{constructor(e,t){const n=`${In.extractMessage(e)}: ${JSON.stringify({response:e,request:t})}`;super(n),Object.setPrototypeOf(this,In.prototype),this.response=e,this.request=t,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,In)}static extractMessage(e){var t,n;return((n=(t=e.errors)==null?void 0:t[0])==null?void 0:n.message)??`GraphQL Error (Code: ${e.status})`}}var Nr={exports:{}};(function(r,e){var t=typeof self<"u"?self:ao,n=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var l={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function a(w){return w&&DataView.prototype.isPrototypeOf(w)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(w){return w&&u.indexOf(Object.prototype.toString.call(w))>-1};function d(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(w))throw new TypeError("Invalid character in header field name");return w.toLowerCase()}function f(w){return typeof w!="string"&&(w=String(w)),w}function m(w){var A={next:function(){var x=w.shift();return{done:x===void 0,value:x}}};return l.iterable&&(A[Symbol.iterator]=function(){return A}),A}function p(w){this.map={},w instanceof p?w.forEach(function(A,x){this.append(x,A)},this):Array.isArray(w)?w.forEach(function(A){this.append(A[0],A[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(A){this.append(A,w[A])},this)}p.prototype.append=function(w,A){w=d(w),A=f(A);var x=this.map[w];this.map[w]=x?x+", "+A:A},p.prototype.delete=function(w){delete this.map[d(w)]},p.prototype.get=function(w){return w=d(w),this.has(w)?this.map[w]:null},p.prototype.has=function(w){return this.map.hasOwnProperty(d(w))},p.prototype.set=function(w,A){this.map[d(w)]=f(A)},p.prototype.forEach=function(w,A){for(var x in this.map)this.map.hasOwnProperty(x)&&w.call(A,this.map[x],x,this)},p.prototype.keys=function(){var w=[];return this.forEach(function(A,x){w.push(x)}),m(w)},p.prototype.values=function(){var w=[];return this.forEach(function(A){w.push(A)}),m(w)},p.prototype.entries=function(){var w=[];return this.forEach(function(A,x){w.push([x,A])}),m(w)},l.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function v(w){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}function E(w){return new Promise(function(A,x){w.onload=function(){A(w.result)},w.onerror=function(){x(w.error)}})}function O(w){var A=new FileReader,x=E(A);return A.readAsArrayBuffer(w),x}function T(w){var A=new FileReader,x=E(A);return A.readAsText(w),x}function N(w){for(var A=new Uint8Array(w),x=new Array(A.length),B=0;B<A.length;B++)x[B]=String.fromCharCode(A[B]);return x.join("")}function R(w){if(w.slice)return w.slice(0);var A=new Uint8Array(w.byteLength);return A.set(new Uint8Array(w)),A.buffer}function M(){return this.bodyUsed=!1,this._initBody=function(w){this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:l.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:l.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():l.arrayBuffer&&l.blob&&a(w)?(this._bodyArrayBuffer=R(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||c(w))?this._bodyArrayBuffer=R(w):this._bodyText=w=Object.prototype.toString.call(w):this._bodyText="",this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var w=v(this);if(w)return w;if(this._bodyBlob)return T(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var ee=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function L(w){var A=w.toUpperCase();return ee.indexOf(A)>-1?A:w}function P(w,A){A=A||{};var x=A.body;if(w instanceof P){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,A.headers||(this.headers=new p(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!x&&w._bodyInit!=null&&(x=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new p(A.headers)),this.method=L(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&x)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(x)}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function z(w){var A=new FormData;return w.trim().split("&").forEach(function(x){if(x){var B=x.split("="),q=B.shift().replace(/\+/g," "),I=B.join("=").replace(/\+/g," ");A.append(decodeURIComponent(q),decodeURIComponent(I))}}),A}function Q(w){var A=new p,x=w.replace(/\r?\n[\t ]+/g," ");return x.split(/\r?\n/).forEach(function(B){var q=B.split(":"),I=q.shift().trim();if(I){var $=q.join(":").trim();A.append(I,$)}}),A}M.call(P.prototype);function re(w,A){A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in A?A.statusText:"OK",this.headers=new p(A.headers),this.url=A.url||"",this._initBody(w)}M.call(re.prototype),re.prototype.clone=function(){return new re(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},re.error=function(){var w=new re(null,{status:0,statusText:""});return w.type="error",w};var se=[301,302,303,307,308];re.redirect=function(w,A){if(se.indexOf(A)===-1)throw new RangeError("Invalid status code");return new re(null,{status:A,headers:{location:w}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(A,x){this.message=A,this.name=x;var B=Error(A);this.stack=B.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function te(w,A){return new Promise(function(x,B){var q=new P(w,A);if(q.signal&&q.signal.aborted)return B(new o.DOMException("Aborted","AbortError"));var I=new XMLHttpRequest;function $(){I.abort()}I.onload=function(){var F={status:I.status,statusText:I.statusText,headers:Q(I.getAllResponseHeaders()||"")};F.url="responseURL"in I?I.responseURL:F.headers.get("X-Request-URL");var j="response"in I?I.response:I.responseText;x(new re(j,F))},I.onerror=function(){B(new TypeError("Network request failed"))},I.ontimeout=function(){B(new TypeError("Network request failed"))},I.onabort=function(){B(new o.DOMException("Aborted","AbortError"))},I.open(q.method,q.url,!0),q.credentials==="include"?I.withCredentials=!0:q.credentials==="omit"&&(I.withCredentials=!1),"responseType"in I&&l.blob&&(I.responseType="blob"),q.headers.forEach(function(F,j){I.setRequestHeader(j,F)}),q.signal&&(q.signal.addEventListener("abort",$),I.onreadystatechange=function(){I.readyState===4&&q.signal.removeEventListener("abort",$)}),I.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return te.polyfill=!0,i.fetch||(i.fetch=te,i.Headers=p,i.Request=P,i.Response=re),o.Headers=p,o.Request=P,o.Response=re,o.fetch=te,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Nr,Nr.exports);var Dn=Nr.exports;const _n=xi(Dn),Ln=oo({__proto__:null,default:_n},[Dn]),un=r=>{let e={};return r&&(typeof Headers<"u"&&r instanceof Headers||Ln&&Dn.Headers&&r instanceof Dn.Headers?e=Co(r):Array.isArray(r)?r.forEach(([t,n])=>{t&&n!==void 0&&(e[t]=n)}):e=r),e},si=r=>r.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),Ea=r=>{if(!Array.isArray(r.query)){const n=r,s=[`query=${encodeURIComponent(si(n.query))}`];return r.variables&&s.push(`variables=${encodeURIComponent(n.jsonSerializer.stringify(n.variables))}`),n.operationName&&s.push(`operationName=${encodeURIComponent(n.operationName)}`),s.join("&")}if(typeof r.variables<"u"&&!Array.isArray(r.variables))throw new Error("Cannot create query with given variable type, array expected");const e=r,t=r.query.reduce((n,s,i)=>(n.push({query:si(s),variables:e.variables?e.jsonSerializer.stringify(e.variables[i]):void 0}),n),[]);return`query=${encodeURIComponent(e.jsonSerializer.stringify(t))}`},Ta=r=>async e=>{const{url:t,query:n,variables:s,operationName:i,fetch:o,fetchOptions:l,middleware:a}=e,u={...e.headers};let c="",d;r==="POST"?(d=ka(n,s,i,l.jsonSerializer),typeof d=="string"&&(u["Content-Type"]="application/json")):c=Ea({query:n,variables:s,operationName:i,jsonSerializer:l.jsonSerializer??Mr});const f={method:r,headers:u,body:d,...l};let m=t,p=f;if(a){const v=await Promise.resolve(a({...f,url:t,operationName:i,variables:s})),{url:E,...O}=v;m=E,p=O}return c&&(m=`${m}?${c}`),await o(m,p)};class Oa{constructor(e,t={}){this.url=e,this.requestConfig=t,this.rawRequest=async(...n)=>{const[s,i,o]=n,l=Po(s,i,o),{headers:a,fetch:u=_n,method:c="POST",requestMiddleware:d,responseMiddleware:f,...m}=this.requestConfig,{url:p}=this;l.signal!==void 0&&(m.signal=l.signal);const{operationName:v}=fr(l.query);return pr({url:p,query:l.query,variables:l.variables,headers:{...un(mr(a)),...un(l.requestHeaders)},operationName:v,fetch:u,method:c,fetchOptions:m,middleware:d}).then(E=>(f&&f(E),E)).catch(E=>{throw f&&f(E),E})}}async request(e,...t){const[n,s]=t,i=Do(e,n,s),{headers:o,fetch:l=_n,method:a="POST",requestMiddleware:u,responseMiddleware:c,...d}=this.requestConfig,{url:f}=this;i.signal!==void 0&&(d.signal=i.signal);const{query:m,operationName:p}=fr(i.document);return pr({url:f,query:m,variables:i.variables,headers:{...un(mr(o)),...un(i.requestHeaders)},operationName:p,fetch:l,method:a,fetchOptions:d,middleware:u}).then(v=>(c&&c(v),v.data)).catch(v=>{throw c&&c(v),v})}batchRequests(e,t){const n=xo(e,t),{headers:s,...i}=this.requestConfig;n.signal!==void 0&&(i.signal=n.signal);const o=n.documents.map(({document:a})=>fr(a).query),l=n.documents.map(({variables:a})=>a);return pr({url:this.url,query:o,variables:l,headers:{...un(mr(s)),...un(n.requestHeaders)},operationName:void 0,fetch:this.requestConfig.fetch??_n,method:this.requestConfig.method||"POST",fetchOptions:i,middleware:this.requestConfig.requestMiddleware}).then(a=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a.data)).catch(a=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(a),a})}setHeaders(e){return this.requestConfig.headers=e,this}setHeader(e,t){const{headers:n}=this.requestConfig;return n?n[e]=t:this.requestConfig.headers={[e]:t},this}setEndpoint(e){return this.url=e,this}}const pr=async r=>{const{query:e,variables:t,fetchOptions:n}=r,s=Ta(No(r.method??"post")),i=Array.isArray(r.query),o=await s(r),l=await Aa(o,n.jsonSerializer??Mr),a=Array.isArray(l)?!l.some(({data:c})=>!c):!!l.data,u=Array.isArray(l)||!l.errors||Array.isArray(l.errors)&&!l.errors.length||n.errorPolicy==="all"||n.errorPolicy==="ignore";if(o.ok&&u&&a){const{errors:c,...d}=(Array.isArray(l),l),f=n.errorPolicy==="ignore"?d:l;return{...i?{data:f}:f,headers:o.headers,status:o.status}}else{const c=typeof l=="string"?{error:l}:l;throw new In({...c,status:o.status,headers:o.headers},{query:e,variables:t})}},ka=(r,e,t,n)=>{const s=n??Mr;if(!Array.isArray(r))return s.stringify({query:r,variables:e,operationName:t});if(typeof e<"u"&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");const i=r.reduce((o,l,a)=>(o.push({query:l,variables:e?e[a]:void 0}),o),[]);return s.stringify(i)},Aa=async(r,e)=>{let t;return r.headers.forEach((n,s)=>{s.toLowerCase()==="content-type"&&(t=n)}),t&&(t.toLowerCase().startsWith("application/json")||t.toLowerCase().startsWith("application/graphql+json")||t.toLowerCase().startsWith("application/graphql-response+json"))?e.parse(await r.text()):r.text()},mr=r=>typeof r=="function"?r():r;var Ia=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const Sa=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ia(void 0,void 0,void 0,function*(){return yield(yield rr(()=>Promise.resolve().then(()=>Ln),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class Fr extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Na extends Fr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ca extends Fr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Da extends Fr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Pa=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};class xa{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=Sa(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Pa(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=t;let l={},a;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",a=o):typeof o=="string"?(l["Content-Type"]="text/plain",a=o):typeof FormData<"u"&&o instanceof FormData?a=o:(l["Content-Type"]="application/json",a=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:a}).catch(m=>{throw new Na(m)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new Ca(u);if(!u.ok)throw new Da(u);let d=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return d==="application/json"?f=yield u.json():d==="application/octet-stream"?f=yield u.blob():d==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}class Ra{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=_n:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,a;let u=null,c=null,d=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const O=await i.text();O===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=O:c=JSON.parse(O))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&E&&E.length>1&&(d=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(c=[],u=null,f=200,m="OK")}catch{i.status===404&&v===""?(f=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((a=u==null?void 0:u.details)===null||a===void 0)&&a.includes("Results contain 0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,a;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(a=i==null?void 0:i.code)!==null&&a!==void 0?a:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}}class ja extends Ra{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${a}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class fn extends ja{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class La{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new fn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,a)=>l.concat(Object.keys(a)),[]);if(o.length>0){const l=[...new Set(o)].map(a=>`"${a}"`);this.url.searchParams.set("columns",l.join(","))}}return new fn({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new fn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new fn({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new fn({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ma="1.7.1",Ua={"X-Client-Info":`postgrest-js/${Ma}`};class Fa{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ua),t),this.schema=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new La(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:s}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let l;n?(i="HEAD",Object.entries(t).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(i="POST",l=t);const a=Object.assign({},this.headers);return s&&(a.Prefer=`count=${s}`),new fn({method:i,url:o,headers:a,schema:this.schema,body:l,fetch:this.fetch,allowEmpty:!1})}}var vr,ii;function Ba(){if(ii)return vr;ii=1;var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return vr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}(),vr}const $a="websocket",Va="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",qa=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ga="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",za=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Ha="1.0.34",Ja={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Ya="https://github.com/theturtle32/WebSocket-Node",Ka={node:">=4.0.0"},Wa={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Za={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Xa={verbose:!1},Qa={test:"tape test/unit/*.js",gulp:"gulp"},el="index",tl={lib:"./lib"},nl="lib/browser.js",rl="Apache-2.0",sl={name:$a,description:Va,keywords:qa,author:Ga,contributors:za,version:Ha,repository:Ja,homepage:Ya,engines:Ka,dependencies:Wa,devDependencies:Za,config:Xa,scripts:Qa,main:el,directories:tl,browser:nl,license:rl};var il=sl.version,zt;if(typeof globalThis=="object")zt=globalThis;else try{zt=Ba()}catch{}finally{if(!zt&&typeof window<"u"&&(zt=window),!zt)throw new Error("Could not determine global this")}var Pn=zt.WebSocket||zt.MozWebSocket,ol=il;function Ki(r,e){var t;return e?t=new Pn(r,e):t=new Pn(r),t}Pn&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(Ki,r,{get:function(){return Pn[r]}})});var al={w3cwebsocket:Pn?Ki:null,version:ol};const ll="2.7.3",cl={"X-Client-Info":`realtime-js/${ll}`},ul="1.0.0",Wi=1e4,hl=1e3;var Sn;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Sn||(Sn={}));var it;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(it||(it={}));var Tt;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Tt||(Tt={}));var Cr;(function(r){r.websocket="websocket"})(Cr||(Cr={}));var Ht;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ht||(Ht={}));class Zi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class dl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const a=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:a,payload:u}}}class _r{constructor(e,t,n={},s=Wi){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var oi;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(oi||(oi={}));class Nn{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(a=>{this.state=Nn.syncDiff(this.state,a,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Nn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),l={},a={};return this.map(i,(u,c)=>{o[u]||(a[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const f=c.map(E=>E.presence_ref),m=d.map(E=>E.presence_ref),p=c.filter(E=>m.indexOf(E.presence_ref)<0),v=d.filter(E=>f.indexOf(E.presence_ref)<0);p.length>0&&(l[u]=p),v.length>0&&(a[u]=v)}else l[u]=c}),this.syncDiff(i,{joins:l,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,a)=>{var u;const c=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(a),c.length>0){const d=e[l].map(m=>m.presence_ref),f=c.filter(m=>d.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,c,a)}),this.map(o,(l,a)=>{let u=e[l];if(!u)return;const c=a.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[l]=u,s(l,u,a),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _e;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(_e||(_e={}));const ai=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=fl(o,r,e,s),i),{})},fl=(r,e,t,n)=>{const s=e.find(l=>l.name===r),i=s==null?void 0:s.type,o=t[r];return i&&!n.includes(i)?Xi(i,o):Dr(o)},Xi=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return _l(e,t)}switch(r){case _e.bool:return pl(e);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return ml(e);case _e.json:case _e.jsonb:return vl(e);case _e.timestamp:return gl(e);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return Dr(e);default:return Dr(e)}},Dr=r=>r,pl=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ml=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},vl=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},_l=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Xi(e,l))}return r},gl=r=>typeof r=="string"?r.replace(" ","T"):r;var li=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})},ci;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ci||(ci={}));var ui;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(ui||(ui={}));var hi;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(hi||(hi={}));class Br{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new _r(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new Zi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Nn(this)}subscribe(e,t=this.timeout){var n,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const l={},a={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[]};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const d=this.bindings.postgres_changes,f=(c=d==null?void 0:d.length)!==null&&c!==void 0?c:0,m=[];for(let p=0;p<f;p++){const v=d[p],{filter:{event:E,schema:O,table:T,filter:N}}=v,R=u&&u[p];if(R&&R.event===E&&R.schema===O&&R.table===T&&R.filter===N)m.push(Object.assign(Object.assign({},v),{id:R.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return li(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return li(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this._on(e,t,n)}send(e,t={}){return new Promise(n=>{var s,i,o;const l=this._push(e.type,e,t.timeout||this.timeout);l.rateLimited&&n("rate limited"),e.type==="broadcast"&&!(!((o=(i=(s=this.params)===null||s===void 0?void 0:s.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.ack)&&n("ok"),l.receive("ok",()=>n("ok")),l.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=it.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new _r(this,Tt.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new _r(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:a,leave:u,join:c}=Tt;if(n&&[l,a,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,v,E;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(v=m.filter)===null||v===void 0?void 0:v.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,E,O,T,N;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const R=m.id,M=(p=m.filter)===null||p===void 0?void 0:p.event;return R&&((v=t.ids)===null||v===void 0?void 0:v.includes(R))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const R=(T=(O=m==null?void 0:m.filter)===null||O===void 0?void 0:O.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return R==="*"||R===((N=t==null?void 0:t.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:E,commit_timestamp:O,type:T,errors:N}=p;f=Object.assign(Object.assign({},{schema:v,table:E,commit_timestamp:O,eventType:T,new:{},old:{},errors:N}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Br.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tt.close,{},e)}_onError(e){this._on(Tt.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ai(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ai(e.columns,e.old_record)),t}}var gr=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const yl=()=>{};class bl{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=cl,this.params={},this.timeout=Wi,this.transport=al.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=yl,this.conn=null,this.sendBuffer=[],this.serializer=new dl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Cr.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.eventsPerSecond;s&&(this.eventsPerSecondLimitMs=Math.floor(1e3/s)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,o)=>o(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Zi(()=>gr(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return gr(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return gr(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Sn.connecting:return Ht.Connecting;case Sn.open:return Ht.Open;case Sn.closing:return Ht.Closing;default:return Ht.Closed}}isConnected(){return this.connectionState()===Ht.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new Br(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e;let o=()=>{this.encode(e,l=>{var a;(a=this.conn)===null||a===void 0||a.send(l)})};if(this.log("push",`${t} ${n} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Tt.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ul}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:i,ref:o}=t;(o&&o===this.pendingHeartbeatRef||s===(i==null?void 0:i.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tt.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(hl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class $r extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Je(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class wl extends $r{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class di extends $r{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Qi=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const eo=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Qi(void 0,void 0,void 0,function*(){return yield(yield rr(()=>Promise.resolve().then(()=>Ln),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},El=()=>Qi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rr(()=>Promise.resolve().then(()=>Ln),void 0,import.meta.url)).Response:Response});var yn=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const yr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Tl=(r,e)=>yn(void 0,void 0,void 0,function*(){const t=yield El();r instanceof t?r.json().then(n=>{e(new wl(yr(n),r.status||500))}).catch(n=>{e(new di(yr(n),n))}):e(new di(yr(r),r))}),Ol=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function or(r,e,t,n,s,i){return yn(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Ol(e,n,s,i)).then(a=>{if(!a.ok)throw a;return n!=null&&n.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Tl(a,l))})})}function Pr(r,e,t,n){return yn(this,void 0,void 0,function*(){return or(r,"GET",e,t,n)})}function Bt(r,e,t,n,s){return yn(this,void 0,void 0,function*(){return or(r,"POST",e,n,s,t)})}function kl(r,e,t,n,s){return yn(this,void 0,void 0,function*(){return or(r,"PUT",e,n,s,t)})}function to(r,e,t,n,s){return yn(this,void 0,void 0,function*(){return or(r,"DELETE",e,n,s,t)})}var ct=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const Al={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Il{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=eo(s)}uploadOrUpdate(e,t,n,s){return ct(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},fi),s),l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl)):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType);const a=this._removeEmptyFolders(t),u=this._getFinalPath(a),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return c.ok?{data:{path:a},error:null}:{data:null,error:yield c.json()}}catch(i){if(Je(i))return{data:null,error:i};throw i}})}upload(e,t,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return ct(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let a;const u=Object.assign({upsert:fi.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",u.cacheControl)):(a=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(l.toString(),{method:"PUT",body:a,headers:c});return d.ok?{data:{path:i},error:null}:{data:null,error:yield d.json()}}catch(a){if(Je(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e){return ct(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const n=yield Bt(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:this.headers}),s=new URL(this.url+n.url),i=s.searchParams.get("token");if(!i)throw new $r("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:i},error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}update(e,t,n){return ct(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return ct(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}copy(e,t){return ct(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return ct(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Bt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return ct(this,void 0,void 0,function*(){try{const s=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}download(e,t){return ct(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Pr(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Je(l))return{data:null,error:l};throw l}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});a!==""&&s.push(a);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return ct(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}list(e,t,n){return ct(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Al),t),{prefix:e||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Je(s))return{data:null,error:s};throw s}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Sl="2.5.1",Nl={"X-Client-Info":`storage-js/${Sl}`};var hn=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};class Cl{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Nl),t),this.fetch=eo(n)}listBuckets(){return hn(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Je(e))return{data:null,error:e};throw e}})}getBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return hn(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return hn(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}})}emptyBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}deleteBucket(e){return hn(this,void 0,void 0,function*(){try{return{data:yield to(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}})}}class Dl extends Cl{constructor(e,t={},n){super(e,t,n)}from(e){return new Il(this.url,this.headers,e,this.fetch)}}const Pl="2.25.0",xl={"X-Client-Info":`supabase-js/${Pl}`};var Rl=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const jl=r=>{let e;return r?e=r:typeof fetch>"u"?e=_n:e=fetch,(...t)=>e(...t)},Ll=()=>typeof Headers>"u"?Dn.Headers:Headers,Ml=(r,e,t)=>{const n=jl(t),s=Ll();return(i,o)=>Rl(void 0,void 0,void 0,function*(){var l;const a=(l=yield e())!==null&&l!==void 0?l:r;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};function Ul(r){return r.replace(/\/$/,"")}function Fl(r,e){const{db:t,auth:n,realtime:s,global:i}=r,{db:o,auth:l,realtime:a,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},a),s),global:Object.assign(Object.assign({},u),i)}}var Zt=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};function Bl(r){return Math.round(Date.now()/1e3)+r}function $l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Mt=()=>typeof document<"u",Gt={tested:!1,writable:!1},Yn=()=>{if(!Mt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gt.tested)return Gt.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Gt.tested=!0,Gt.writable=!0}catch{Gt.tested=!0,Gt.writable=!1}return Gt.writable};function et(r,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),s=n.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const no=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Zt(void 0,void 0,void 0,function*(){return yield(yield rr(()=>Promise.resolve().then(()=>Ln),void 0,import.meta.url)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Vl=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Tn=(r,e,t)=>Zt(void 0,void 0,void 0,function*(){yield r.setItem(e,JSON.stringify(t))}),Bn=(r,e)=>Zt(void 0,void 0,void 0,function*(){const t=yield r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),br=(r,e)=>Zt(void 0,void 0,void 0,function*(){yield r.removeItem(e)});function ql(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,i,o,l,a,u,c=0;for(r=r.replace("-","+").replace("_","/");c<r.length;)o=e.indexOf(r.charAt(c++)),l=e.indexOf(r.charAt(c++)),a=e.indexOf(r.charAt(c++)),u=e.indexOf(r.charAt(c++)),n=o<<2|l>>4,s=(l&15)<<4|a>>2,i=(a&3)<<6|u,t=t+String.fromCharCode(n),a!=64&&s!=0&&(t=t+String.fromCharCode(s)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class ar{constructor(){this.promise=new ar.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ar.promiseConstructor=Promise;function pi(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(ql(n))}function Gl(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}function zl(r,e){return new Promise((n,s)=>{Zt(this,void 0,void 0,function*(){for(let i=0;i<1/0;i++)try{const o=yield r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})})}function Hl(r){return("0"+r.toString(16)).substr(-2)}function $n(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Hl).join("")}function Jl(r){return Zt(this,void 0,void 0,function*(){const t=new TextEncoder().encode(r),n=yield crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")})}function Yl(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Vn(r){return Zt(this,void 0,void 0,function*(){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const e=yield Jl(r);return Yl(e)})}class Vr extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function ce(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Kl extends Vr{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Wl(r){return ce(r)&&r.name==="AuthApiError"}class ro extends Vr{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class bn extends Vr{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dn extends bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class wr extends bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class qn extends bn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Nt extends bn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Er extends bn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xr extends bn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var qr=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})},Zl=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const Gn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Xl=(r,e)=>qr(void 0,void 0,void 0,function*(){const t=[502,503,504];Vl(r)?t.includes(r.status)?e(new xr(Gn(r),r.status)):r.json().then(n=>{e(new Kl(Gn(n),r.status||500))}).catch(n=>{e(new ro(Gn(n),n))}):e(new xr(Gn(r),0))}),Ql=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};function he(r,e,t,n){var s;return qr(this,void 0,void 0,function*(){const i=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",a=yield ec(r,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(a):{data:Object.assign({},a),error:null}})}function ec(r,e,t,n,s,i){return qr(this,void 0,void 0,function*(){return new Promise((o,l)=>{r(t,Ql(e,n,s,i)).then(a=>{if(!a.ok)throw a;return n!=null&&n.noResolveJson?a:a.json()}).then(a=>o(a)).catch(a=>Xl(a,l))})})}function jt(r){var e;let t=null;sc(r)&&(t=Object.assign({},r),t.expires_at=Bl(r.expires_in));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Jt(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function tc(r){return{data:r,error:null}}function nc(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=Zl(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},a=Object.assign({},o);return{data:{properties:l,user:a},error:null}}function rc(r){return r}function sc(r){return r.access_token&&r.refresh_token&&r.expires_in}var kt=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})},ic=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class oc{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=no(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return kt(this,void 0,void 0,function*(){try{const{options:t}=e,n=ic(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),yield he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:nc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ce(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Jt})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,n,s,i,o,l,a;return kt(this,void 0,void 0,function*(){try{const u={nextPage:null,lastPage:0,total:0},c=yield he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:rc});if(c.error)throw c.error;const d=yield c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(a=(l=c.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&a!==void 0?a:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ce(u))return{data:{users:[]},error:u};throw u}})}getUserById(e){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Jt})}catch(t){if(ce(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}deleteUser(e,t=!1){return kt(this,void 0,void 0,function*(){try{return yield he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Jt})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}_listFactors(e){return kt(this,void 0,void 0,function*(){try{const{data:t,error:n}=yield he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return kt(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ce(t))return{data:null,error:t};throw t}})}}const ac="2.31.0",lc="http://localhost:9999",cc="supabase.auth.token",uc={"X-Client-Info":`gotrue-js/${ac}`},hc=10,mi={getItem:r=>Yn()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Yn()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Yn()&&globalThis.localStorage.removeItem(r)}};function dc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var K=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};dc();const fc={url:lc,storageKey:cc,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uc,flowType:"implicit"},Tr=30*1e3,pc=3;class mc{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const n=Object.assign(Object.assign({},fc),e);if(this.inMemorySession=null,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.persistSession=n.persistSession,this.storage=n.storage||mi,this.admin=new oc({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=no(n.fetch),this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===mi&&!Yn()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),Mt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",s=>K(this,void 0,void 0,function*(){yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}))}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return K(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const e=Mt()?yield this._isPKCEFlow():!1;if(e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:n}=yield this._getSessionFromUrl(e);if(n)return yield this._removeSession(),{error:n};const{session:s,redirectType:i}=t;return yield this._saveSession(s),setTimeout(()=>K(this,void 0,void 0,function*(){i==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",s):yield this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return ce(e)?{error:e}:{error:new ro("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,n,s;return K(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:c,password:d,options:f}=e;let m=null,p=null;if(this.flowType==="pkce"){const v=$n();yield Tn(this.storage,`${this.storageKey}-code-verifier`,v),m=yield Vn(v),p=v===m?"plain":"s256"}i=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:jt})}else if("phone"in e){const{phone:c,password:d,options:f}=e;i=yield he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:jt})}else throw new qn("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const a=o.session,u=o.user;return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(ce(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){return K(this,void 0,void 0,function*(){try{yield this._removeSession();let t;if("email"in e){const{email:i,password:o,options:l}=e;t=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:jt})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=yield he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:jt})}else throw new qn("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wr}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:{user:n.user,session:n.session},error:s})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOAuth(e){var t,n,s,i;return K(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})})}exchangeCodeForSession(e){return K(this,void 0,void 0,function*(){const t=yield Bn(this.storage,`${this.storageKey}-code-verifier`),{data:n,error:s}=yield he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:jt});return yield br(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wr}:(n.session&&(yield this._saveSession(n.session),yield this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:n,error:s})})}signInWithIdToken(e){return K(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:n,token:s,nonce:i}=e,o=yield he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,nonce:i,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:jt}),{data:l,error:a}=o;return a?{data:{user:null,session:null},error:a}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wr}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:a})}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,n,s,i,o;return K(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:l,options:a}=e;let u=null,c=null;if(this.flowType==="pkce"){const f=$n();yield Tn(this.storage,`${this.storageKey}-code-verifier`,f),u=yield Vn(f),c=f===u?"plain":"s256"}const{error:d}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(n=a==null?void 0:a.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:l,options:a}=e,{data:u,error:c}=yield he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=a==null?void 0:a.data)!==null&&s!==void 0?s:{},create_user:(i=a==null?void 0:a.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken},channel:(o=a==null?void 0:a.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new qn("You must provide either an email or phone number.")}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){var t,n;return K(this,void 0,void 0,function*(){try{e.type!=="email_change"&&e.type!=="phone_change"&&(yield this._removeSession());const{data:s,error:i}=yield he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,xform:jt});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,l=s.user;return o!=null&&o.access_token&&(yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){var t,n,s;return K(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:tc})}catch(i){if(ce(i))return{data:null,error:i};throw i}})}reauthenticate(){return K(this,void 0,void 0,function*(){try{const{data:{session:e},error:t}=yield this.getSession();if(t)throw t;if(!e)throw new dn;const{error:n}=yield he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return K(this,void 0,void 0,function*(){try{yield this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=yield he(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=yield he(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new qn("You must provide either an email or phone number and a type")}catch(t){if(ce(t))return{data:{user:null,session:null},error:t};throw t}})}getSession(){return K(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const i=yield Bn(this.storage,this.storageKey);i!==null&&(this._isValidSession(i)?e=i:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:n,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:n},error:null}})}getUser(e){var t,n;return K(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:i}=yield this.getSession();if(i)throw i;e=(n=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0}return yield he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Jt})}catch(s){if(ce(s))return{data:{user:null},error:s};throw s}})}updateUser(e,t={}){return K(this,void 0,void 0,function*(){try{const{data:n,error:s}=yield this.getSession();if(s)throw s;if(!n.session)throw new dn;const i=n.session,{data:o,error:l}=yield he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:i.access_token,xform:Jt});if(l)throw l;return i.user=o.user,yield this._saveSession(i),yield this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}})}_decodeJWT(e){return pi(e)}setSession(e){return K(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new dn;const t=Date.now()/1e3;let n=t,s=!0,i=null;const o=pi(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:l,error:a}=yield this._callRefreshToken(e.refresh_token);if(a)return{data:{user:null,session:null},error:a};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:a}=yield this.getUser(e.access_token);if(a)throw a;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},yield this._saveSession(i),yield this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(ce(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return K(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:o}=yield this.getSession();if(o)throw o;e=(t=i.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new dn;const{session:n,error:s}=yield this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromUrl(e){return K(this,void 0,void 0,function*(){try{if(!Mt())throw new Nt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Nt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Er("Not a valid PKCE flow url.");if(e){const E=et("code");if(!E)throw new Er("No code detected.");const{data:O,error:T}=yield this.exchangeCodeForSession(E);if(T)throw T;if(!O.session)throw new Er("No session detected.");let N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:O.session,redirectType:null},error:null}}const t=et("error_description");if(t){const E=et("error_code");if(!E)throw new Nt("No error_code detected.");const O=et("error");throw O?new Nt(t,{error:O,code:E}):new Nt("No error detected.")}const n=et("provider_token"),s=et("provider_refresh_token"),i=et("access_token");if(!i)throw new Nt("No access_token detected.");const o=et("expires_in");if(!o)throw new Nt("No expires_in detected.");const l=et("refresh_token");if(!l)throw new Nt("No refresh_token detected.");const a=et("token_type");if(!a)throw new Nt("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(o),{data:d,error:f}=yield this.getUser(i);if(f)throw f;const m=d.user,p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:parseInt(o),expires_at:c,refresh_token:l,token_type:a,user:m},v=et("type");return window.location.hash="",{data:{session:p,redirectType:v},error:null}}catch(t){if(ce(t))return{data:{session:null,redirectType:null},error:t};throw t}})}_isImplicitGrantFlow(){return Mt()&&(!!et("access_token")||!!et("error_description"))}_isPKCEFlow(){return K(this,void 0,void 0,function*(){const e=yield Bn(this.storage,`${this.storageKey}-code-verifier`);return!!et("code")&&!!e})}signOut(){var e;return K(this,void 0,void 0,function*(){const{data:t,error:n}=yield this.getSession();if(n)return{error:n};const s=(e=t.session)===null||e===void 0?void 0:e.access_token;if(s){const{error:i}=yield this.admin.signOut(s);if(i&&!(Wl(i)&&(i.status===404||i.status===401)))return{error:i}}return yield this._removeSession(),yield br(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=$l(),n={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),this.emitInitialSession(t),{data:{subscription:n}}}emitInitialSession(e){var t,n;return K(this,void 0,void 0,function*(){try{const{data:{session:s},error:i}=yield this.getSession();if(i)throw i;yield(t=this.stateChangeEmitters.get(e))===null||t===void 0?void 0:t.callback("INITIAL_SESSION",s)}catch(s){yield(n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null),console.error(s)}})}resetPasswordForEmail(e,t={}){return K(this,void 0,void 0,function*(){let n=null,s=null;if(this.flowType==="pkce"){const i=$n();yield Tn(this.storage,`${this.storageKey}-code-verifier`,i),n=yield Vn(i),s=i===n?"plain":"s256"}try{return yield he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(ce(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return K(this,void 0,void 0,function*(){try{const t=Date.now();return yield zl(n=>K(this,void 0,void 0,function*(){return yield Gl(n*200),yield he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:jt})}),(n,s,i)=>i&&i.error&&i.error instanceof xr&&Date.now()+(n+1)*200-t<Tr)}catch(t){if(ce(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return K(this,void 0,void 0,function*(){const n=yield this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return Mt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}})}_recoverAndRefresh(){var e;return K(this,void 0,void 0,function*(){try{const t=yield Bn(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const n=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<n+hc){if(this.autoRefreshToken&&t.refresh_token){const{error:s}=yield this._callRefreshToken(t.refresh_token);s&&(console.log(s.message),yield this._removeSession())}}else this.persistSession&&(yield this._saveSession(t)),yield this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,n;return K(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new ar,!e)throw new dn;const{data:s,error:i}=yield this._refreshAccessToken(e);if(i)throw i;if(!s.session)throw new dn;yield this._saveSession(s.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(ce(s)){const i={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(i),i}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,n=!0){return K(this,void 0,void 0,function*(){this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(o=>K(this,void 0,void 0,function*(){try{yield o.callback(e,t)}catch(l){s.push(l)}}));if(yield Promise.all(i),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}})}_saveSession(e){return K(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Tn(this.storage,this.storageKey,e)}_removeSession(){return K(this,void 0,void 0,function*(){this.persistSession?yield br(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Mt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return K(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),Tr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return K(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return K(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return K(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return K(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/Tr)<pc&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return K(this,void 0,void 0,function*(){if(!Mt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>K(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return K(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){return K(this,void 0,void 0,function*(){const n=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=$n();yield Tn(this.storage,`${this.storageKey}-code-verifier`,s);const i=yield Vn(s),o=s===i?"plain":"s256",l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);n.push(s.toString())}return`${this.url}/authorize?${n.join("&")}`})}_unenroll(e){var t;return K(this,void 0,void 0,function*(){try{const{data:n,error:s}=yield this.getSession();return s?{data:null,error:s}:yield he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_enroll(e){var t,n;return K(this,void 0,void 0,function*(){try{const{data:s,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:o,error:l}=yield he(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=s==null?void 0:s.session)===null||t===void 0?void 0:t.access_token});return l?{data:null,error:l}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(s){if(ce(s))return{data:null,error:s};throw s}})}_verify(e){var t;return K(this,void 0,void 0,function*(){try{const{data:n,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:i,error:o}=yield he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_challenge(e){var t;return K(this,void 0,void 0,function*(){try{const{data:n,error:s}=yield this.getSession();return s?{data:null,error:s}:yield he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}_challengeAndVerify(e){return K(this,void 0,void 0,function*(){const{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return K(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:n,totp:s},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return K(this,void 0,void 0,function*(){const{data:{session:n},error:s}=yield this.getSession();if(s)return{data:null,error:s};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}})}}class vc extends mc{constructor(e){super(e)}}var _c=globalThis&&globalThis.__awaiter||function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{u(n.next(c))}catch(d){o(d)}}function a(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(l,a)}u((n=n.apply(r,e||[])).next())})};const gc={headers:xl},yc={schema:"public"},bc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},wc={};class Ec{constructor(e,t,n){var s,i,o,l,a,u,c,d;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=Ul(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:yc,realtime:wc,auth:Object.assign(Object.assign({},bc),{storageKey:m}),global:gc},v=Fl(n??{},p);this.storageKey=(i=(s=v.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(l=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,(u=v.global)===null||u===void 0?void 0:u.fetch),this.fetch=Ml(t,this._getAccessToken.bind(this),(c=v.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Fa(`${f}/rest/v1`,{headers:this.headers,schema:(d=v.db)===null||d===void 0?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new xa(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Dl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return _c(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o},l,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vc({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:o,fetch:a})}_initRealtimeClient(e){return new bl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,n==null?void 0:n.access_token,"CLIENT")})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tc=(r,e,t)=>new Ec(r,e,t),vi=Tc("https://mifvquxknwmbszdrqwio.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZnZxdXhrbndtYnN6ZHJxd2lvIiwicm9sZSI6ImFub24iLCJpYXQiOjE2ODcyMjMxNTQsImV4cCI6MjAwMjc5OTE1NH0.mukAyCyXroPUWSkPx8lAiLwDBHvtMBoW334LPwsbCsg");function _i(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,P,z,Q,re,se,te,w,A,x,B,q,I,$,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,Pe,ae,le,oe,St,Ze,Le,Be,G,Y,$e,Ne,Ke,ze,ht,He,Me,Ae,Ot,Xe,ke,fe,Ie,we,xe,Ee,Qe,W,Dt,dt,Pt,ft,Xt,pt,xt,mt,Ve,vt,Qt,_t,en,gt,tn,yt,nn,bt,rn,wt,sn,nt,on,rt,an,st,ln,cn,Gr;return{c(){e=g("div"),t=g("label"),n=C("State:"),s=Z(),i=g("select"),o=g("option"),l=C("Alabama"),a=g("option"),u=C("Alaska"),c=g("option"),d=C("Arizona"),f=g("option"),m=C("Arkansas"),p=g("option"),v=C("California"),E=g("option"),O=C("Colorado"),T=g("option"),N=C("Connecticut"),R=g("option"),M=C("Delaware"),ee=g("option"),L=C("District Of Columbia"),P=g("option"),z=C("Florida"),Q=g("option"),re=C("Georgia"),se=g("option"),te=C("Hawaii"),w=g("option"),A=C("Idaho"),x=g("option"),B=C("Illinois"),q=g("option"),I=C("Indiana"),$=g("option"),F=C("Iowa"),j=g("option"),ue=C("Kansas"),ne=g("option"),me=C("Kentucky"),Te=g("option"),ve=C("Louisiana"),ye=g("option"),Oe=C("Maine"),H=g("option"),be=C("Maryland"),de=g("option"),pe=C("Massachusetts"),qe=g("option"),Se=C("Michigan"),Re=g("option"),je=C("Minnesota"),Ge=g("option"),Pe=C("Mississippi"),ae=g("option"),le=C("Missouri"),oe=g("option"),St=C("Montana"),Ze=g("option"),Le=C("Nebraska"),Be=g("option"),G=C("Nevada"),Y=g("option"),$e=C("New Hampshire"),Ne=g("option"),Ke=C("New Jersey"),ze=g("option"),ht=C("New Mexico"),He=g("option"),Me=C("New York"),Ae=g("option"),Ot=C("North Carolina"),Xe=g("option"),ke=C("North Dakota"),fe=g("option"),Ie=C("Ohio"),we=g("option"),xe=C("Oklahoma"),Ee=g("option"),Qe=C("Oregon"),W=g("option"),Dt=C("Pennsylvania"),dt=g("option"),Pt=C("Rhode Island"),ft=g("option"),Xt=C("South Carolina"),pt=g("option"),xt=C("South Dakota"),mt=g("option"),Ve=C("Tennessee"),vt=g("option"),Qt=C("Texas"),_t=g("option"),en=C("Utah"),gt=g("option"),tn=C("Vermont"),yt=g("option"),nn=C("Virginia"),bt=g("option"),rn=C("Washington"),wt=g("option"),sn=C("West Virginia"),nt=g("option"),on=C("Wisconsin"),rt=g("option"),an=C("Wyoming"),st=g("option"),ln=C("All"),this.h()},l(Vt){e=y(Vt,"DIV",{class:!0});var Rt=k(e);t=y(Rt,"LABEL",{});var zr=k(t);n=D(zr,"State:"),zr.forEach(b),s=X(Rt),i=y(Rt,"SELECT",{name:!0,class:!0});var V=k(i);o=y(V,"OPTION",{});var Hr=k(o);l=D(Hr,"Alabama"),Hr.forEach(b),a=y(V,"OPTION",{});var Jr=k(a);u=D(Jr,"Alaska"),Jr.forEach(b),c=y(V,"OPTION",{});var Yr=k(c);d=D(Yr,"Arizona"),Yr.forEach(b),f=y(V,"OPTION",{});var Kr=k(f);m=D(Kr,"Arkansas"),Kr.forEach(b),p=y(V,"OPTION",{});var Wr=k(p);v=D(Wr,"California"),Wr.forEach(b),E=y(V,"OPTION",{});var Zr=k(E);O=D(Zr,"Colorado"),Zr.forEach(b),T=y(V,"OPTION",{});var Xr=k(T);N=D(Xr,"Connecticut"),Xr.forEach(b),R=y(V,"OPTION",{});var Qr=k(R);M=D(Qr,"Delaware"),Qr.forEach(b),ee=y(V,"OPTION",{});var es=k(ee);L=D(es,"District Of Columbia"),es.forEach(b),P=y(V,"OPTION",{});var ts=k(P);z=D(ts,"Florida"),ts.forEach(b),Q=y(V,"OPTION",{});var ns=k(Q);re=D(ns,"Georgia"),ns.forEach(b),se=y(V,"OPTION",{});var rs=k(se);te=D(rs,"Hawaii"),rs.forEach(b),w=y(V,"OPTION",{});var ss=k(w);A=D(ss,"Idaho"),ss.forEach(b),x=y(V,"OPTION",{});var is=k(x);B=D(is,"Illinois"),is.forEach(b),q=y(V,"OPTION",{});var os=k(q);I=D(os,"Indiana"),os.forEach(b),$=y(V,"OPTION",{});var as=k($);F=D(as,"Iowa"),as.forEach(b),j=y(V,"OPTION",{});var ls=k(j);ue=D(ls,"Kansas"),ls.forEach(b),ne=y(V,"OPTION",{});var cs=k(ne);me=D(cs,"Kentucky"),cs.forEach(b),Te=y(V,"OPTION",{});var us=k(Te);ve=D(us,"Louisiana"),us.forEach(b),ye=y(V,"OPTION",{});var hs=k(ye);Oe=D(hs,"Maine"),hs.forEach(b),H=y(V,"OPTION",{});var ds=k(H);be=D(ds,"Maryland"),ds.forEach(b),de=y(V,"OPTION",{});var fs=k(de);pe=D(fs,"Massachusetts"),fs.forEach(b),qe=y(V,"OPTION",{});var ps=k(qe);Se=D(ps,"Michigan"),ps.forEach(b),Re=y(V,"OPTION",{});var ms=k(Re);je=D(ms,"Minnesota"),ms.forEach(b),Ge=y(V,"OPTION",{});var vs=k(Ge);Pe=D(vs,"Mississippi"),vs.forEach(b),ae=y(V,"OPTION",{});var _s=k(ae);le=D(_s,"Missouri"),_s.forEach(b),oe=y(V,"OPTION",{});var gs=k(oe);St=D(gs,"Montana"),gs.forEach(b),Ze=y(V,"OPTION",{});var ys=k(Ze);Le=D(ys,"Nebraska"),ys.forEach(b),Be=y(V,"OPTION",{});var bs=k(Be);G=D(bs,"Nevada"),bs.forEach(b),Y=y(V,"OPTION",{});var ws=k(Y);$e=D(ws,"New Hampshire"),ws.forEach(b),Ne=y(V,"OPTION",{});var Es=k(Ne);Ke=D(Es,"New Jersey"),Es.forEach(b),ze=y(V,"OPTION",{});var Ts=k(ze);ht=D(Ts,"New Mexico"),Ts.forEach(b),He=y(V,"OPTION",{});var Os=k(He);Me=D(Os,"New York"),Os.forEach(b),Ae=y(V,"OPTION",{});var ks=k(Ae);Ot=D(ks,"North Carolina"),ks.forEach(b),Xe=y(V,"OPTION",{});var As=k(Xe);ke=D(As,"North Dakota"),As.forEach(b),fe=y(V,"OPTION",{});var Is=k(fe);Ie=D(Is,"Ohio"),Is.forEach(b),we=y(V,"OPTION",{});var Ss=k(we);xe=D(Ss,"Oklahoma"),Ss.forEach(b),Ee=y(V,"OPTION",{});var Ns=k(Ee);Qe=D(Ns,"Oregon"),Ns.forEach(b),W=y(V,"OPTION",{});var Cs=k(W);Dt=D(Cs,"Pennsylvania"),Cs.forEach(b),dt=y(V,"OPTION",{});var Ds=k(dt);Pt=D(Ds,"Rhode Island"),Ds.forEach(b),ft=y(V,"OPTION",{});var Ps=k(ft);Xt=D(Ps,"South Carolina"),Ps.forEach(b),pt=y(V,"OPTION",{});var xs=k(pt);xt=D(xs,"South Dakota"),xs.forEach(b),mt=y(V,"OPTION",{});var Rs=k(mt);Ve=D(Rs,"Tennessee"),Rs.forEach(b),vt=y(V,"OPTION",{});var js=k(vt);Qt=D(js,"Texas"),js.forEach(b),_t=y(V,"OPTION",{});var Ls=k(_t);en=D(Ls,"Utah"),Ls.forEach(b),gt=y(V,"OPTION",{});var Ms=k(gt);tn=D(Ms,"Vermont"),Ms.forEach(b),yt=y(V,"OPTION",{});var Us=k(yt);nn=D(Us,"Virginia"),Us.forEach(b),bt=y(V,"OPTION",{});var Fs=k(bt);rn=D(Fs,"Washington"),Fs.forEach(b),wt=y(V,"OPTION",{});var Bs=k(wt);sn=D(Bs,"West Virginia"),Bs.forEach(b),nt=y(V,"OPTION",{});var $s=k(nt);on=D($s,"Wisconsin"),$s.forEach(b),rt=y(V,"OPTION",{});var Vs=k(rt);an=D(Vs,"Wyoming"),Vs.forEach(b),st=y(V,"OPTION",{});var qs=k(st);ln=D(qs,"All"),qs.forEach(b),V.forEach(b),Rt.forEach(b),this.h()},h(){o.__value="AL",o.value=o.__value,a.__value="AK",a.value=a.__value,c.__value="AZ",c.value=c.__value,f.__value="AR",f.value=f.__value,p.__value="CA",p.value=p.__value,E.__value="CO",E.value=E.__value,T.__value="CT",T.value=T.__value,R.__value="DE",R.value=R.__value,ee.__value="DC",ee.value=ee.__value,P.__value="FL",P.value=P.__value,Q.__value="GA",Q.value=Q.__value,se.__value="HI",se.value=se.__value,w.__value="ID",w.value=w.__value,x.__value="IL",x.value=x.__value,q.__value="IN",q.value=q.__value,$.__value="IA",$.value=$.__value,j.__value="KS",j.value=j.__value,ne.__value="KY",ne.value=ne.__value,Te.__value="LA",Te.value=Te.__value,ye.__value="ME",ye.value=ye.__value,H.__value="MD",H.value=H.__value,de.__value="MA",de.value=de.__value,qe.__value="MI",qe.value=qe.__value,Re.__value="MN",Re.value=Re.__value,Ge.__value="MS",Ge.value=Ge.__value,ae.__value="MO",ae.value=ae.__value,oe.__value="MT",oe.value=oe.__value,Ze.__value="NE",Ze.value=Ze.__value,Be.__value="NV",Be.value=Be.__value,Y.__value="NH",Y.value=Y.__value,Ne.__value="NJ",Ne.value=Ne.__value,ze.__value="NM",ze.value=ze.__value,He.__value="NY",He.value=He.__value,Ae.__value="NC",Ae.value=Ae.__value,Xe.__value="ND",Xe.value=Xe.__value,fe.__value="OH",fe.value=fe.__value,we.__value="OK",we.value=we.__value,Ee.__value="OR",Ee.value=Ee.__value,W.__value="PA",W.value=W.__value,dt.__value="RI",dt.value=dt.__value,ft.__value="SC",ft.value=ft.__value,pt.__value="SD",pt.value=pt.__value,mt.__value="TN",mt.value=mt.__value,vt.__value="TX",vt.value=vt.__value,_t.__value="UT",_t.value=_t.__value,gt.__value="VT",gt.value=gt.__value,yt.__value="VA",yt.value=yt.__value,bt.__value="WA",bt.value=bt.__value,wt.__value="WV",wt.value=wt.__value,nt.__value="WI",nt.value=nt.__value,rt.__value="WY",rt.value=rt.__value,st.__value="all",st.value=st.__value,i.required=!0,_(i,"name","state"),_(i,"class","svelte-wl73y9"),r[4]===void 0&&Ct(()=>r[21].call(i)),_(e,"class","filter-item svelte-wl73y9")},m(Vt,Rt){De(Vt,e,Rt),h(e,t),h(t,n),h(e,s),h(e,i),h(i,o),h(o,l),h(i,a),h(a,u),h(i,c),h(c,d),h(i,f),h(f,m),h(i,p),h(p,v),h(i,E),h(E,O),h(i,T),h(T,N),h(i,R),h(R,M),h(i,ee),h(ee,L),h(i,P),h(P,z),h(i,Q),h(Q,re),h(i,se),h(se,te),h(i,w),h(w,A),h(i,x),h(x,B),h(i,q),h(q,I),h(i,$),h($,F),h(i,j),h(j,ue),h(i,ne),h(ne,me),h(i,Te),h(Te,ve),h(i,ye),h(ye,Oe),h(i,H),h(H,be),h(i,de),h(de,pe),h(i,qe),h(qe,Se),h(i,Re),h(Re,je),h(i,Ge),h(Ge,Pe),h(i,ae),h(ae,le),h(i,oe),h(oe,St),h(i,Ze),h(Ze,Le),h(i,Be),h(Be,G),h(i,Y),h(Y,$e),h(i,Ne),h(Ne,Ke),h(i,ze),h(ze,ht),h(i,He),h(He,Me),h(i,Ae),h(Ae,Ot),h(i,Xe),h(Xe,ke),h(i,fe),h(fe,Ie),h(i,we),h(we,xe),h(i,Ee),h(Ee,Qe),h(i,W),h(W,Dt),h(i,dt),h(dt,Pt),h(i,ft),h(ft,Xt),h(i,pt),h(pt,xt),h(i,mt),h(mt,Ve),h(i,vt),h(vt,Qt),h(i,_t),h(_t,en),h(i,gt),h(gt,tn),h(i,yt),h(yt,nn),h(i,bt),h(bt,rn),h(i,wt),h(wt,sn),h(i,nt),h(nt,on),h(i,rt),h(rt,an),h(i,st),h(st,ln),pn(i,r[4],!0),cn||(Gr=Ye(i,"change",r[21]),cn=!0)},p(Vt,Rt){Rt[0]&16&&pn(i,Vt[4])},d(Vt){Vt&&b(e),cn=!1,Gr()}}}function gi(r){let e,t,n,s,i,o,l;return{c(){e=g("button"),t=C("Cancel"),n=Z(),s=g("p"),i=C("Loading..."),this.h()},l(a){e=y(a,"BUTTON",{class:!0});var u=k(e);t=D(u,"Cancel"),u.forEach(b),n=X(a),s=y(a,"P",{});var c=k(s);i=D(c,"Loading..."),c.forEach(b),this.h()},h(){_(e,"class","svelte-wl73y9")},m(a,u){De(a,e,u),h(e,t),De(a,n,u),De(a,s,u),h(s,i),o||(l=Ye(e,"click",r[26]),o=!0)},p:zn,d(a){a&&b(e),a&&b(n),a&&b(s),o=!1,l()}}}function yi(r){let e,t;return{c(){e=g("p"),t=C("There was an error loading the map"),this.h()},l(n){e=y(n,"P",{class:!0});var s=k(e);t=D(s,"There was an error loading the map"),s.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,s){De(n,e,s),h(e,t)},d(n){n&&b(e)}}}function bi(r){let e,t;return{c(){e=g("p"),t=C("No tournaments found"),this.h()},l(n){e=y(n,"P",{class:!0});var s=k(e);t=D(s,"No tournaments found"),s.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,s){De(n,e,s),h(e,t)},d(n){n&&b(e)}}}function wi(r){let e,t;return{c(){e=g("p"),t=C("You cannot search for more than 150 tournaments."),this.h()},l(n){e=y(n,"P",{class:!0});var s=k(e);t=D(s,"You cannot search for more than 150 tournaments."),s.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,s){De(n,e,s),h(e,t)},d(n){n&&b(e)}}}function Ei(r){let e,t;return{c(){e=g("p"),t=C("Request cancelled"),this.h()},l(n){e=y(n,"P",{class:!0});var s=k(e);t=D(s,"Request cancelled"),s.forEach(b),this.h()},h(){_(e,"class","error svelte-wl73y9")},m(n,s){De(n,e,s),h(e,t)},d(n){n&&b(e)}}}function Oc(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,P,z,Q,re,se,te,w,A,x,B,q,I,$,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,Pe,ae,le,oe,St,Ze,Le,Be,G,Y,$e,Ne,Ke,ze,ht,He,Me,Ae,Ot,Xe,ke=r[2]==="US"&&_i(r),fe=r[9]&&gi(r),Ie=r[10]&&yi(),we=r[11]&&bi(),xe=r[8]&&wi(),Ee=r[12]&&Ei();return{c(){e=g("aside"),t=g("div"),n=g("label"),s=C("Game:"),i=Z(),o=g("select"),l=g("option"),a=C("Ultimate"),u=g("option"),c=C("Melee"),d=g("option"),f=C("Both"),m=Z(),p=g("div"),v=g("label"),E=C("Country:"),O=Z(),T=g("select"),N=g("option"),R=C("Canada"),M=g("option"),ee=C("USA"),L=g("option"),P=C("Mexico"),z=g("option"),Q=C("Japan"),re=g("option"),se=C("France"),te=g("option"),w=C("United Kingdom"),A=g("option"),x=C("Germany"),B=g("option"),q=C("Italy"),I=g("option"),$=C("Spain"),F=g("option"),j=C("Switzerland"),ue=g("option"),ne=C("Netherlands"),me=g("option"),Te=C("Australia"),ve=Z(),ke&&ke.c(),ye=Z(),Oe=g("div"),H=g("label"),be=C("From:"),de=Z(),pe=g("input"),qe=Z(),Se=g("div"),Re=g("label"),je=C("To:"),Ge=Z(),Pe=g("input"),ae=Z(),le=g("div"),oe=g("label"),St=C("Attendees:"),Ze=Z(),Le=g("input"),Be=Z(),G=g("button"),Y=C("Search"),$e=Z(),fe&&fe.c(),Ne=Z(),Ie&&Ie.c(),Ke=Z(),we&&we.c(),ze=Z(),xe&&xe.c(),ht=Z(),Ee&&Ee.c(),this.h()},l(Qe){e=y(Qe,"ASIDE",{class:!0});var W=k(e);t=y(W,"DIV",{class:!0});var Dt=k(t);n=y(Dt,"LABEL",{});var dt=k(n);s=D(dt,"Game:"),dt.forEach(b),i=X(Dt),o=y(Dt,"SELECT",{name:!0,class:!0});var Pt=k(o);l=y(Pt,"OPTION",{});var ft=k(l);a=D(ft,"Ultimate"),ft.forEach(b),u=y(Pt,"OPTION",{});var Xt=k(u);c=D(Xt,"Melee"),Xt.forEach(b),d=y(Pt,"OPTION",{});var pt=k(d);f=D(pt,"Both"),pt.forEach(b),Pt.forEach(b),Dt.forEach(b),m=X(W),p=y(W,"DIV",{class:!0});var xt=k(p);v=y(xt,"LABEL",{});var mt=k(v);E=D(mt,"Country:"),mt.forEach(b),O=X(xt),T=y(xt,"SELECT",{name:!0,class:!0});var Ve=k(T);N=y(Ve,"OPTION",{});var vt=k(N);R=D(vt,"Canada"),vt.forEach(b),M=y(Ve,"OPTION",{});var Qt=k(M);ee=D(Qt,"USA"),Qt.forEach(b),L=y(Ve,"OPTION",{});var _t=k(L);P=D(_t,"Mexico"),_t.forEach(b),z=y(Ve,"OPTION",{});var en=k(z);Q=D(en,"Japan"),en.forEach(b),re=y(Ve,"OPTION",{});var gt=k(re);se=D(gt,"France"),gt.forEach(b),te=y(Ve,"OPTION",{});var tn=k(te);w=D(tn,"United Kingdom"),tn.forEach(b),A=y(Ve,"OPTION",{});var yt=k(A);x=D(yt,"Germany"),yt.forEach(b),B=y(Ve,"OPTION",{});var nn=k(B);q=D(nn,"Italy"),nn.forEach(b),I=y(Ve,"OPTION",{});var bt=k(I);$=D(bt,"Spain"),bt.forEach(b),F=y(Ve,"OPTION",{});var rn=k(F);j=D(rn,"Switzerland"),rn.forEach(b),ue=y(Ve,"OPTION",{});var wt=k(ue);ne=D(wt,"Netherlands"),wt.forEach(b),me=y(Ve,"OPTION",{});var sn=k(me);Te=D(sn,"Australia"),sn.forEach(b),Ve.forEach(b),xt.forEach(b),ve=X(W),ke&&ke.l(W),ye=X(W),Oe=y(W,"DIV",{class:!0});var nt=k(Oe);H=y(nt,"LABEL",{});var on=k(H);be=D(on,"From:"),on.forEach(b),de=X(nt),pe=y(nt,"INPUT",{name:!0,min:!0,type:!0,class:!0}),nt.forEach(b),qe=X(W),Se=y(W,"DIV",{class:!0});var rt=k(Se);Re=y(rt,"LABEL",{});var an=k(Re);je=D(an,"To:"),an.forEach(b),Ge=X(rt),Pe=y(rt,"INPUT",{name:!0,min:!0,type:!0,class:!0}),rt.forEach(b),ae=X(W),le=y(W,"DIV",{class:!0});var st=k(le);oe=y(st,"LABEL",{});var ln=k(oe);St=D(ln,"Attendees:"),ln.forEach(b),Ze=X(st),Le=y(st,"INPUT",{name:!0,type:!0,min:!0,class:!0}),st.forEach(b),Be=X(W),G=y(W,"BUTTON",{class:!0});var cn=k(G);Y=D(cn,"Search"),cn.forEach(b),$e=X(W),fe&&fe.l(W),Ne=X(W),Ie&&Ie.l(W),Ke=X(W),we&&we.l(W),ze=X(W),xe&&xe.l(W),ht=X(W),Ee&&Ee.l(W),W.forEach(b),this.h()},h(){l.__value="1386",l.value=l.__value,u.__value="1",u.value=u.__value,d.__value="1 1386",d.value=d.__value,o.required=!0,_(o,"name","game"),_(o,"class","svelte-wl73y9"),r[5]===void 0&&Ct(()=>r[19].call(o)),_(t,"class","filter-item svelte-wl73y9"),N.__value="CA",N.value=N.__value,M.__value="US",M.value=M.__value,L.__value="MX",L.value=L.__value,z.__value="JP",z.value=z.__value,re.__value="FR",re.value=re.__value,te.__value="GB",te.value=te.__value,A.__value="DE",A.value=A.__value,B.__value="IT",B.value=B.__value,I.__value="ES",I.value=I.__value,F.__value="CH",F.value=F.__value,ue.__value="NL",ue.value=ue.__value,me.__value="AU",me.value=me.__value,T.required=!0,_(T,"name","country"),_(T,"class","svelte-wl73y9"),r[2]===void 0&&Ct(()=>r[20].call(T)),_(p,"class","filter-item svelte-wl73y9"),pe.required=!0,_(pe,"name","startDate"),_(pe,"min",r[7]),_(pe,"type","date"),_(pe,"class","svelte-wl73y9"),_(Oe,"class","filter-item svelte-wl73y9"),Pe.required=!0,_(Pe,"name","endDate"),_(Pe,"min",r[0]),_(Pe,"type","date"),_(Pe,"class","svelte-wl73y9"),_(Se,"class","filter-item svelte-wl73y9"),Le.required=!0,_(Le,"name","attendees"),_(Le,"type","number"),_(Le,"min","0"),_(Le,"class","svelte-wl73y9"),_(le,"class","filter-item svelte-wl73y9"),G.disabled=r[9],_(G,"class","svelte-wl73y9"),_(e,"class","svelte-wl73y9")},m(Qe,W){De(Qe,e,W),h(e,t),h(t,n),h(n,s),h(t,i),h(t,o),h(o,l),h(l,a),h(o,u),h(u,c),h(o,d),h(d,f),pn(o,r[5],!0),h(e,m),h(e,p),h(p,v),h(v,E),h(p,O),h(p,T),h(T,N),h(N,R),h(T,M),h(M,ee),h(T,L),h(L,P),h(T,z),h(z,Q),h(T,re),h(re,se),h(T,te),h(te,w),h(T,A),h(A,x),h(T,B),h(B,q),h(T,I),h(I,$),h(T,F),h(F,j),h(T,ue),h(ue,ne),h(T,me),h(me,Te),pn(T,r[2],!0),h(e,ve),ke&&ke.m(e,null),h(e,ye),h(e,Oe),h(Oe,H),h(H,be),h(Oe,de),h(Oe,pe),Ut(pe,r[0]),h(e,qe),h(e,Se),h(Se,Re),h(Re,je),h(Se,Ge),h(Se,Pe),Ut(Pe,r[1]),h(e,ae),h(e,le),h(le,oe),h(oe,St),h(le,Ze),h(le,Le),Ut(Le,r[3]),h(e,Be),h(e,G),h(G,Y),h(e,$e),fe&&fe.m(e,null),h(e,Ne),Ie&&Ie.m(e,null),h(e,Ke),we&&we.m(e,null),h(e,ze),xe&&xe.m(e,null),h(e,ht),Ee&&Ee.m(e,null),Ae=!0,Ot||(Xe=[Ye(o,"change",r[19]),Ye(T,"change",r[20]),Ye(pe,"input",r[22]),Ye(Pe,"input",r[23]),Ye(Le,"input",r[24]),Ye(G,"click",r[25])],Ot=!0)},p(Qe,W){r=Qe,W[0]&32&&pn(o,r[5]),W[0]&4&&pn(T,r[2]),r[2]==="US"?ke?ke.p(r,W):(ke=_i(r),ke.c(),ke.m(e,ye)):ke&&(ke.d(1),ke=null),(!Ae||W[0]&128)&&_(pe,"min",r[7]),W[0]&1&&Ut(pe,r[0]),(!Ae||W[0]&1)&&_(Pe,"min",r[0]),W[0]&2&&Ut(Pe,r[1]),W[0]&8&&Pi(Le.value)!==r[3]&&Ut(Le,r[3]),(!Ae||W[0]&512)&&(G.disabled=r[9]),r[9]?fe?fe.p(r,W):(fe=gi(r),fe.c(),fe.m(e,Ne)):fe&&(fe.d(1),fe=null),r[10]?Ie||(Ie=yi(),Ie.c(),Ie.m(e,Ke)):Ie&&(Ie.d(1),Ie=null),r[11]?we||(we=bi(),we.c(),we.m(e,ze)):we&&(we.d(1),we=null),r[8]?xe||(xe=wi(),xe.c(),xe.m(e,ht)):xe&&(xe.d(1),xe=null),r[12]?Ee||(Ee=Ei(),Ee.c(),Ee.m(e,null)):Ee&&(Ee.d(1),Ee=null)},i(Qe){Ae||(Ct(()=>{Ae&&(Me&&Me.end(1),He=Zn(e,It,{delay:450,duration:350,axis:"x",easing:So}),He.start())}),Ae=!0)},o(Qe){He&&He.invalidate(),Me=Xn(e,It,{duration:350,axis:"x"}),Ae=!1},d(Qe){Qe&&b(e),ke&&ke.d(),fe&&fe.d(),Ie&&Ie.d(),we&&we.d(),xe&&xe.d(),Ee&&Ee.d(),Qe&&Me&&Me.end(),Ot=!1,Rr(Xe)}}}function kc(r,e,t){let n=new Date;n.setDate(n.getDate()-14),n=n.toISOString().split("T")[0];let{startDate:s=new Date().toISOString().split("T")[0]}=e,{data:i}=e,{tournaments:o}=e,l=o.map(({venue_address:I})=>I),{endDate:a}=e,{country:u}=e,{minAttendees:c=0}=e,{state:d}=e,{game:f}=e,{geolocated:m}=e,{mapResult:p}=e,{showShareDialog:v=!1}=e,E=!1,O=!1,T=!1,N=!1,R=!1,M=!1,{delay:ee}=e,L;const P=new $t({apiKey:i.GOOGLE_MAPS_API_KEY,version:"weekly"});Di(async()=>{P.load().then(async()=>{L=new google.maps.Geocoder})});async function z(I){if(l.includes(I.venueAddress)){let $=o.find(({venue_address:F})=>F===I.venueAddress);return console.log("Found tournament in list"),{lat:$.lat,lng:$.lng}}else try{console.log("Geocoding address");let F=(await L.geocode({address:I.venueAddress})).results[0].geometry.location;const{error:j}=await vi.from("tournaments").insert({name:I.name,lat:F.lat(),lng:F.lng(),start_at:I.startAt,primary_contact:I.primaryContact,url:I.url,num_attendees:I.numAttendees,state:I.state,venue_address:I.venueAddress});return j&&console.log("Error inserting into database:",j),{lat:F.lat(),lng:F.lng()}}catch($){console.log("Error geocoding address:",$);return}}async function Q(){if(s>a){alert("Start date must be before end date");return}if(a===void 0){alert("Please enter an end date");return}try{t(8,O=!1),t(10,N=!1),t(9,T=!0),t(11,R=!1),t(12,M=!1),E=!1;let I,$=new Date(s.replace(/-/g,"/").replace("T"," ")),F=new Date(a.replace(/-/g,"/").replace("T"," "));F.setHours(23,59,59),$=Math.floor($.getTime()/1e3),F=Math.floor(F.getTime()/1e3);let j=f.split(" ");const ne="https://api.start.gg/gql/"+"alpha",me=new Oa(ne,{headers:{Authorization:"Bearer "+i.SMASH_GG_API_KEY}});let Te=`
            query TournamentsByCountry($cCode: String!, $perPage: Int!, $after: Timestamp!, $before: Timestamp, $state: String
            $game: [ID]) {
              tournaments(query: {
                perPage: $perPage
                filter: {
                  countryCode: $cCode
                  afterDate: $after
                  beforeDate: $before
                  videogameIds: $game
                  addrState: $state
                }
              }) {
                nodes {
                  name
                  venueAddress
                  startAt
                  primaryContact
                  url
                  numAttendees
                  state
                }
              }
            }`;const ve={cCode:u,perPage:151,after:$,before:F,state:d,game:j};(d==="all"||u!=="US")&&(delete ve.state,Te=Te.replace(/addrState: \$state,?/,"").replace(", $state: String",""));let ye=await me.request(Te,ve),Oe=[];I=ye.tournaments.nodes;for(let H of ye.tournaments.nodes){const be=H.startAt,de=new Date(be*1e3);H.startAt=de.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}if(I=I.filter(function(H){return c<=H.numAttendees}),I.length===0){t(9,T=!1),t(11,R=!0);return}if(I.length>150){t(9,T=!1),t(8,O=!0);return}c!==0?I=I.filter(H=>H.numAttendees!==null&&H.numAttendees!==void 0):I=I.map(H=>((H.numAttendees===null||H.numAttendees===void 0)&&(H.numAttendees="unknown"),H));for(let H of I){let be;if(M){t(9,T=!1);return}try{be=await z(H)}catch(pe){console.log(pe);continue}let de="https://start.gg"+H.url;be!==void 0&&Oe.push({name:H.name,lat:be.lat,lng:be.lng,primaryContact:H.primaryContact,venueAddress:H.venueAddress,url:de,startAt:H.startAt,numAttendees:H.numAttendees,state:H.state})}await vi.from("tournaments").select().then(H=>{t(13,o=H.data),l=H.data.map(({venue_address:be})=>be)}).catch(H=>{console.log(H)}),t(14,p=Oe),console.log(p)}catch(I){t(10,N=!0),t(9,T=!1),console.error("Error:",I)}t(9,T=!1)}function re(){f=lr(this),t(5,f)}function se(){u=lr(this),t(2,u)}function te(){d=lr(this),t(4,d)}function w(){s=this.value,t(0,s)}function A(){a=this.value,t(1,a)}function x(){c=Pi(this.value),t(3,c)}const B=async()=>await Q(),q=()=>t(12,M=!0);return r.$$set=I=>{"startDate"in I&&t(0,s=I.startDate),"data"in I&&t(15,i=I.data),"tournaments"in I&&t(13,o=I.tournaments),"endDate"in I&&t(1,a=I.endDate),"country"in I&&t(2,u=I.country),"minAttendees"in I&&t(3,c=I.minAttendees),"state"in I&&t(4,d=I.state),"game"in I&&t(5,f=I.game),"geolocated"in I&&t(16,m=I.geolocated),"mapResult"in I&&t(14,p=I.mapResult),"showShareDialog"in I&&t(17,v=I.showShareDialog),"delay"in I&&t(18,ee=I.delay)},[s,a,u,c,d,f,Q,n,O,T,N,R,M,o,p,i,m,v,ee,re,se,te,w,A,x,B,q]}class Ac extends xn{constructor(e){super(),Rn(this,e,kc,Oc,jn,{startDate:0,data:15,tournaments:13,endDate:1,country:2,minAttendees:3,state:4,game:5,geolocated:16,mapResult:14,showShareDialog:17,delay:18,updateMap:6},null,[-1,-1])}get updateMap(){return this.$$.ctx[6]}}function Ti(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E;return{c(){e=g("p"),t=C("To use, click the filter icon on the sidebar to the left. "),n=g("br"),s=g("br"),i=C(`

            Select a start and end date, and any other filters
            and click "search". All the tournaments will be shown on the map. `),o=g("br"),l=g("br"),a=C(`

            Clicking on a marker will show all the tournament information. Additonally, clicking on the tournmanet
            icon on the sidebar will show you a list view of the tournaments. You can click on the tournament to pan
            the camera to that tournament.`),u=g("br"),c=g("br"),d=C(`


            Found a bug? `),f=g("a"),m=C("Contact"),p=C(" me"),this.h()},l(O){e=y(O,"P",{class:!0});var T=k(e);t=D(T,"To use, click the filter icon on the sidebar to the left. "),n=y(T,"BR",{}),s=y(T,"BR",{}),i=D(T,`

            Select a start and end date, and any other filters
            and click "search". All the tournaments will be shown on the map. `),o=y(T,"BR",{}),l=y(T,"BR",{}),a=D(T,`

            Clicking on a marker will show all the tournament information. Additonally, clicking on the tournmanet
            icon on the sidebar will show you a list view of the tournaments. You can click on the tournament to pan
            the camera to that tournament.`),u=y(T,"BR",{}),c=y(T,"BR",{}),d=D(T,`


            Found a bug? `),f=y(T,"A",{style:!0,href:!0});var N=k(f);m=D(N,"Contact"),N.forEach(b),p=D(T," me"),T.forEach(b),this.h()},h(){We(f,"cursor","pointer"),_(f,"href","/contact"),_(e,"class","content svelte-vz1jks")},m(O,T){De(O,e,T),h(e,t),h(e,n),h(e,s),h(e,i),h(e,o),h(e,l),h(e,a),h(e,u),h(e,c),h(e,d),h(e,f),h(f,m),h(e,p),E=!0},i(O){E||(Ct(()=>{E&&(v||(v=Kn(e,It,{y:200,duration:500},!0)),v.run(1))}),E=!0)},o(O){v||(v=Kn(e,It,{y:200,duration:500},!1)),v.run(0),E=!1},d(O){O&&b(e),O&&v&&v.end()}}}function Oi(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,P,z,Q,re,se,te,w,A,x,B,q,I,$,F,j;return{c(){e=g("aside"),t=g("p"),n=C("In Smash Mapping, marker colours mean different things."),s=Z(),i=g("p"),o=C("The markers and their meanings are:"),l=Z(),a=g("div"),u=g("img"),d=C(` Below 50
                attendees`),f=Z(),m=g("div"),p=g("img"),E=C(` Between 51
                and
                100 attendees`),O=Z(),T=g("div"),N=g("img"),M=C(` Between 101
                and
                500 attendees`),ee=Z(),L=g("div"),P=g("img"),Q=C(` Over 500
                attendees`),re=Z(),se=g("div"),te=g("img"),A=C(`
                 Another marker is on top of this one`),x=Z(),B=g("div"),q=g("img"),$=C(" Tournament has ended"),this.h()},l(ue){e=y(ue,"ASIDE",{class:!0});var ne=k(e);t=y(ne,"P",{class:!0});var me=k(t);n=D(me,"In Smash Mapping, marker colours mean different things."),me.forEach(b),s=X(ne),i=y(ne,"P",{class:!0});var Te=k(i);o=D(Te,"The markers and their meanings are:"),Te.forEach(b),l=X(ne),a=y(ne,"DIV",{class:!0});var ve=k(a);u=y(ve,"IMG",{src:!0,alt:!0,class:!0}),d=D(ve,` Below 50
                attendees`),ve.forEach(b),f=X(ne),m=y(ne,"DIV",{class:!0});var ye=k(m);p=y(ye,"IMG",{src:!0,alt:!0,class:!0}),E=D(ye,` Between 51
                and
                100 attendees`),ye.forEach(b),O=X(ne),T=y(ne,"DIV",{class:!0});var Oe=k(T);N=y(Oe,"IMG",{src:!0,alt:!0,class:!0}),M=D(Oe,` Between 101
                and
                500 attendees`),Oe.forEach(b),ee=X(ne),L=y(ne,"DIV",{class:!0});var H=k(L);P=y(H,"IMG",{src:!0,alt:!0,class:!0}),Q=D(H,` Over 500
                attendees`),H.forEach(b),re=X(ne),se=y(ne,"DIV",{class:!0});var be=k(se);te=y(be,"IMG",{src:!0,alt:!0,class:!0}),A=D(be,`
                 Another marker is on top of this one`),be.forEach(b),x=X(ne),B=y(ne,"DIV",{class:!0});var de=k(B);q=y(de,"IMG",{src:!0,alt:!0,class:!0}),$=D(de," Tournament has ended"),de.forEach(b),ne.forEach(b),this.h()},h(){_(t,"class","svelte-vz1jks"),_(i,"class","svelte-vz1jks"),ut(u.src,c="markers/red-marker.png")||_(u,"src",c),_(u,"alt","red-pointer"),_(u,"class","svelte-vz1jks"),_(a,"class","marker svelte-vz1jks"),ut(p.src,v="markers/green-marker.png")||_(p,"src",v),_(p,"alt","green-pointer"),_(p,"class","svelte-vz1jks"),_(m,"class","marker svelte-vz1jks"),ut(N.src,R="markers/blue-marker.png")||_(N,"src",R),_(N,"alt","blue-pointer"),_(N,"class","svelte-vz1jks"),_(T,"class","marker svelte-vz1jks"),ut(P.src,z="markers/purple-marker.png")||_(P,"src",z),_(P,"alt","purple-pointer"),_(P,"class","svelte-vz1jks"),_(L,"class","marker svelte-vz1jks"),ut(te.src,w="markers/yellow-marker.png")||_(te,"src",w),_(te,"alt","yellow-pointer"),_(te,"class","svelte-vz1jks"),_(se,"class","marker svelte-vz1jks"),ut(q.src,I="markers/grey-marker.png")||_(q,"src",I),_(q,"alt","grey-pointer"),_(q,"class","svelte-vz1jks"),_(B,"class","marker svelte-vz1jks"),_(e,"class","content svelte-vz1jks")},m(ue,ne){De(ue,e,ne),h(e,t),h(t,n),h(e,s),h(e,i),h(i,o),h(e,l),h(e,a),h(a,u),h(a,d),h(e,f),h(e,m),h(m,p),h(m,E),h(e,O),h(e,T),h(T,N),h(T,M),h(e,ee),h(e,L),h(L,P),h(L,Q),h(e,re),h(e,se),h(se,te),h(se,A),h(e,x),h(e,B),h(B,q),h(B,$),j=!0},i(ue){j||(Ct(()=>{j&&(F||(F=Kn(e,It,{y:200,duration:500},!0)),F.run(1))}),j=!0)},o(ue){F||(F=Kn(e,It,{y:200,duration:500},!1)),F.run(0),j=!1},d(ue){ue&&b(e),ue&&F&&F.end()}}}function Ic(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E=r[0]&&Ti(),O=r[1]&&Oi();return{c(){e=g("div"),t=g("div"),n=g("div"),s=C(`
        Guide`),i=Z(),E&&E.c(),o=Z(),l=g("div"),a=g("div"),u=C(`
        Legend`),c=Z(),O&&O.c(),this.h()},l(T){e=y(T,"DIV",{class:!0});var N=k(e);t=y(N,"DIV",{class:!0});var R=k(t);n=y(R,"DIV",{class:!0}),k(n).forEach(b),s=D(R,`
        Guide`),R.forEach(b),i=X(N),E&&E.l(N),o=X(N),l=y(N,"DIV",{class:!0});var M=k(l);a=y(M,"DIV",{class:!0}),k(a).forEach(b),u=D(M,`
        Legend`),M.forEach(b),c=X(N),O&&O.l(N),N.forEach(b),this.h()},h(){_(n,"class","arrow-right svelte-vz1jks"),tt(n,"guideOpen",r[0]),_(t,"class","title svelte-vz1jks"),_(a,"class","arrow-right svelte-vz1jks"),tt(a,"legendOpen",r[1]),_(l,"class","title svelte-vz1jks"),_(e,"class","svelte-vz1jks")},m(T,N){De(T,e,N),h(e,t),h(t,n),h(t,s),h(e,i),E&&E.m(e,null),h(e,o),h(e,l),h(l,a),h(l,u),h(e,c),O&&O.m(e,null),m=!0,p||(v=[Ye(t,"click",r[3]),Ye(l,"click",r[4])],p=!0)},p(T,[N]){(!m||N&1)&&tt(n,"guideOpen",T[0]),T[0]?E?N&1&&ge(E,1):(E=Ti(),E.c(),ge(E,1),E.m(e,o)):E&&(Yt(),Ue(E,1,1,()=>{E=null}),Kt()),(!m||N&2)&&tt(a,"legendOpen",T[1]),T[1]?O?N&2&&ge(O,1):(O=Oi(),O.c(),ge(O,1),O.m(e,null)):O&&(Yt(),Ue(O,1,1,()=>{O=null}),Kt())},i(T){m||(ge(E),ge(O),Ct(()=>{m&&(f&&f.end(1),d=Zn(e,Zs,{y:150,duration:400,delay:400}),d.start())}),m=!0)},o(T){Ue(E),Ue(O),d&&d.invalidate(),f=Xn(e,Zs,{y:100,duration:400}),m=!1},d(T){T&&b(e),E&&E.d(),O&&O.d(),T&&f&&f.end(),p=!1,Rr(v)}}}function Sc(r,e,t){let n=!1,s=!1,{delay:i}=e;const o=()=>t(0,n=!n),l=()=>t(1,s=!s);return r.$$set=a=>{"delay"in a&&t(2,i=a.delay)},[n,s,i,o,l]}class Nc extends xn{constructor(e){super(),Rn(this,e,Sc,Ic,jn,{delay:2})}}function ki(r,e,t){const n=r.slice();return n[7]=e[t],n}function Ai(r){let e,t,n,s,i,o,l,a,u,c=r[0].filter(r[5]),d=[];for(let m=0;m<c.length;m+=1)d[m]=Ii(ki(r,c,m));const f=m=>Ue(d[m],1,1,()=>{d[m]=null});return{c(){e=g("div"),t=g("input"),i=Z();for(let m=0;m<d.length;m+=1)d[m].c();o=Wn(),this.h()},l(m){e=y(m,"DIV",{class:!0});var p=k(e);t=y(p,"INPUT",{type:!0,placeholder:!0}),p.forEach(b),i=X(m);for(let v=0;v<d.length;v+=1)d[v].l(m);o=Wn(),this.h()},h(){_(t,"type","text"),_(t,"placeholder","Search tournament"),_(e,"class","search svelte-j6mz0c")},m(m,p){De(m,e,p),h(e,t),Ut(t,r[1]),De(m,i,p);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(m,p);De(m,o,p),l=!0,a||(u=Ye(t,"input",r[4]),a=!0)},p(m,p){if(p&2&&t.value!==m[1]&&Ut(t,m[1]),p&7){c=m[0].filter(m[5]);let v;for(v=0;v<c.length;v+=1){const E=ki(m,c,v);d[v]?(d[v].p(E,p),ge(d[v],1)):(d[v]=Ii(E),d[v].c(),ge(d[v],1),d[v].m(o.parentNode,o))}for(Yt(),v=c.length;v<d.length;v+=1)f(v);Kt()}},i(m){if(!l){Ct(()=>{l&&(s&&s.end(1),n=Zn(e,It,{y:200,duration:700}),n.start())});for(let p=0;p<c.length;p+=1)ge(d[p]);l=!0}},o(m){n&&n.invalidate(),s=Xn(e,It,{y:200,duration:500}),d=d.filter(Boolean);for(let p=0;p<d.length;p+=1)Ue(d[p]);l=!1},d(m){m&&b(e),m&&s&&s.end(),m&&b(i),so(d,m),m&&b(o),a=!1,u()}}}function Ii(r){let e,t,n=r[7].name+"",s,i,o,l,a,u,c,d=r[7].venueAddress+"",f,m,p,v,E,O,T,N=r[7].numAttendees+"",R,M,ee,L,P,z,Q=r[7].startAt+"",re,se,te,w,A,x,B;function q(){return r[6](r[7])}return{c(){e=g("div"),t=g("a"),s=C(n),o=Z(),l=g("p"),a=g("img"),c=Z(),f=C(d),m=Z(),p=g("div"),v=g("p"),E=g("img"),T=Z(),R=C(N),M=Z(),ee=g("p"),L=g("img"),z=Z(),re=C(Q),se=Z(),this.h()},l(I){e=y(I,"DIV",{class:!0});var $=k(e);t=y($,"A",{href:!0,target:!0,class:!0});var F=k(t);s=D(F,n),F.forEach(b),o=X($),l=y($,"P",{class:!0});var j=k(l);a=y(j,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),c=X(j),f=D(j,d),j.forEach(b),m=X($),p=y($,"DIV",{class:!0});var ue=k(p);v=y(ue,"P",{class:!0});var ne=k(v);E=y(ne,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),T=X(ne),R=D(ne,N),ne.forEach(b),M=X(ue),ee=y(ue,"P",{class:!0});var me=k(ee);L=y(me,"IMG",{width:!0,height:!0,src:!0,alt:!0,class:!0}),z=X(me),re=D(me,Q),me.forEach(b),ue.forEach(b),se=X($),$.forEach(b),this.h()},h(){_(t,"href",i=r[7].url),_(t,"target","_blank"),_(t,"class","svelte-j6mz0c"),_(a,"width","30px"),_(a,"height","30px"),ut(a.src,u="tournament-card-icons/map-marker.png")||_(a,"src",u),_(a,"alt","map-marker"),_(a,"class","svelte-j6mz0c"),_(l,"class","address svelte-j6mz0c"),_(E,"width","30px"),_(E,"height","30px"),ut(E.src,O="tournament-card-icons/people.png")||_(E,"src",O),_(E,"alt","people"),_(E,"class","svelte-j6mz0c"),_(v,"class","attendees svelte-j6mz0c"),_(L,"width","30px"),_(L,"height","30px"),ut(L.src,P="tournament-card-icons/clock.png")||_(L,"src",P),_(L,"alt","clock"),_(L,"class","svelte-j6mz0c"),_(ee,"class","clock svelte-j6mz0c"),_(p,"class","attendees-clock svelte-j6mz0c"),_(e,"class","tournament svelte-j6mz0c")},m(I,$){De(I,e,$),h(e,t),h(t,s),h(e,o),h(e,l),h(l,a),h(l,c),h(l,f),h(e,m),h(e,p),h(p,v),h(v,E),h(v,T),h(v,R),h(p,M),h(p,ee),h(ee,L),h(ee,z),h(ee,re),h(e,se),A=!0,x||(B=Ye(e,"click",q),x=!0)},p(I,$){r=I,(!A||$&3)&&n!==(n=r[7].name+"")&&On(s,n),(!A||$&3&&i!==(i=r[7].url))&&_(t,"href",i),(!A||$&3)&&d!==(d=r[7].venueAddress+"")&&On(f,d),(!A||$&3)&&N!==(N=r[7].numAttendees+"")&&On(R,N),(!A||$&3)&&Q!==(Q=r[7].startAt+"")&&On(re,Q)},i(I){A||(Ct(()=>{A&&(w&&w.end(1),te=Zn(e,It,{y:200,duration:700}),te.start())}),A=!0)},o(I){te&&te.invalidate(),w=Xn(e,It,{y:200,duration:500}),A=!1},d(I){I&&b(e),I&&w&&w.end(),x=!1,B()}}}function Cc(r){let e,t,n=r[0]!==void 0&&Ai(r);return{c(){n&&n.c(),e=Wn()},l(s){n&&n.l(s),e=Wn()},m(s,i){n&&n.m(s,i),De(s,e,i),t=!0},p(s,[i]){s[0]!==void 0?n?(n.p(s,i),i&1&&ge(n,1)):(n=Ai(s),n.c(),ge(n,1),n.m(e.parentNode,e)):n&&(Yt(),Ue(n,1,1,()=>{n=null}),Kt())},i(s){t||(ge(n),t=!0)},o(s){Ue(n),t=!1},d(s){n&&n.d(s),s&&b(e)}}}function Dc(r,e,t){let{mapResult:n}=e,{map:s}=e,i="";function o(c,d){s.panTo({lat:c,lng:d}),s.setZoom(10)}function l(){i=this.value,t(1,i)}const a=c=>c.name.toLowerCase().includes(i.trimStart().toLowerCase())||c.venueAddress.toLowerCase().includes(i.trimStart().toLowerCase()),u=c=>o(c.lat,c.lng);return r.$$set=c=>{"mapResult"in c&&t(0,n=c.mapResult),"map"in c&&t(3,s=c.map)},[n,i,o,s,l,a,u]}class Pc extends xn{constructor(e){super(),Rn(this,e,Dc,Cc,jn,{mapResult:0,map:3})}}function Si(r){let e,t;return e=new Pc({props:{mapResult:r[1],map:r[15]}}),{c(){Qn(e.$$.fragment)},l(n){er(e.$$.fragment,n)},m(n,s){tr(e,n,s),t=!0},p(n,s){const i={};s[0]&2&&(i.mapResult=n[1]),s[0]&32768&&(i.map=n[15]),e.$set(i)},i(n){t||(ge(e.$$.fragment,n),t=!0)},o(n){Ue(e.$$.fragment,n),t=!1},d(n){nr(e,n)}}}function Ni(r){let e,t,n,s,i,o,l,a,u,c,d,f;function m(P){r[22](P)}function p(P){r[23](P)}function v(P){r[24](P)}function E(P){r[25](P)}function O(P){r[26](P)}function T(P){r[27](P)}function N(P){r[28](P)}function R(P){r[29](P)}function M(P){r[30](P)}function ee(P){r[31](P)}let L={delay:r[14]};return r[6]!==void 0&&(L.state=r[6]),r[16]!==void 0&&(L.tournaments=r[16]),r[0]!==void 0&&(L.data=r[0]),r[8]!==void 0&&(L.geolocated=r[8]),r[1]!==void 0&&(L.mapResult=r[1]),r[2]!==void 0&&(L.startDate=r[2]),r[3]!==void 0&&(L.endDate=r[3]),r[4]!==void 0&&(L.country=r[4]),r[5]!==void 0&&(L.minAttendees=r[5]),r[7]!==void 0&&(L.showShareDialog=r[7]),e=new Ac({props:L}),ot.push(()=>at(e,"state",m)),ot.push(()=>at(e,"tournaments",p)),ot.push(()=>at(e,"data",v)),ot.push(()=>at(e,"geolocated",E)),ot.push(()=>at(e,"mapResult",O)),ot.push(()=>at(e,"startDate",T)),ot.push(()=>at(e,"endDate",N)),ot.push(()=>at(e,"country",R)),ot.push(()=>at(e,"minAttendees",M)),ot.push(()=>at(e,"showShareDialog",ee)),{c(){Qn(e.$$.fragment)},l(P){er(e.$$.fragment,P)},m(P,z){tr(e,P,z),f=!0},p(P,z){const Q={};z[0]&16384&&(Q.delay=P[14]),!t&&z[0]&64&&(t=!0,Q.state=P[6],lt(()=>t=!1)),!n&&z[0]&65536&&(n=!0,Q.tournaments=P[16],lt(()=>n=!1)),!s&&z[0]&1&&(s=!0,Q.data=P[0],lt(()=>s=!1)),!i&&z[0]&256&&(i=!0,Q.geolocated=P[8],lt(()=>i=!1)),!o&&z[0]&2&&(o=!0,Q.mapResult=P[1],lt(()=>o=!1)),!l&&z[0]&4&&(l=!0,Q.startDate=P[2],lt(()=>l=!1)),!a&&z[0]&8&&(a=!0,Q.endDate=P[3],lt(()=>a=!1)),!u&&z[0]&16&&(u=!0,Q.country=P[4],lt(()=>u=!1)),!c&&z[0]&32&&(c=!0,Q.minAttendees=P[5],lt(()=>c=!1)),!d&&z[0]&128&&(d=!0,Q.showShareDialog=P[7],lt(()=>d=!1)),e.$set(Q)},i(P){f||(ge(e.$$.fragment,P),f=!0)},o(P){Ue(e.$$.fragment,P),f=!1},d(P){nr(e,P)}}}function Ci(r){let e,t;return e=new Nc({props:{delay:r[14]}}),{c(){Qn(e.$$.fragment)},l(n){er(e.$$.fragment,n)},m(n,s){tr(e,n,s),t=!0},p(n,s){const i={};s[0]&16384&&(i.delay=n[14]),e.$set(i)},i(n){t||(ge(e.$$.fragment,n),t=!0)},o(n){Ue(e.$$.fragment,n),t=!1},d(n){nr(e,n)}}}function xc(r){let e,t,n,s,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,P,z,Q,re,se,te,w,A,x,B,q,I,$,F,j,ue,ne,me,Te,ve,ye,Oe,H,be,de,pe,qe,Se,Re,je,Ge,Pe,ae=r[11]&&Si(r),le=r[10]&&Ni(r),oe=r[12]&&Ci(r);function St(G){r[32](G)}function Ze(G){r[33](G)}function Le(G){r[34](G)}let Be={};return r[15]!==void 0&&(Be.map=r[15]),r[0]!==void 0&&(Be.data=r[0]),r[1]!==void 0&&(Be.mapResult=r[1]),ve=new Io({props:Be}),ot.push(()=>at(ve,"map",St)),ot.push(()=>at(ve,"data",Ze)),ot.push(()=>at(ve,"mapResult",Le)),{c(){e=g("meta"),t=g("meta"),n=g("meta"),s=g("meta"),i=g("meta"),o=g("meta"),l=g("meta"),a=g("meta"),u=g("meta"),c=g("meta"),d=g("meta"),f=g("meta"),m=g("meta"),p=g("meta"),v=g("meta"),E=Z(),O=g("body"),T=g("div"),N=g("div"),R=g("button"),M=g("img"),L=Z(),P=g("button"),z=g("img"),re=Z(),se=g("button"),te=g("img"),A=Z(),x=g("div"),B=g("div"),q=g("p"),I=C(r[13]),$=Z(),F=g("button"),j=C(">"),ue=Z(),ae&&ae.c(),ne=Z(),le&&le.c(),me=Z(),oe&&oe.c(),Te=Z(),Qn(ve.$$.fragment),be=Z(),de=g("footer"),pe=g("p"),qe=C("Created by: "),Se=g("a"),Re=C("Sleepy"),this.h()},l(G){const Y=io("svelte-1ot263w",document.head);e=y(Y,"META",{charset:!0,class:!0}),t=y(Y,"META",{name:!0,content:!0,class:!0}),n=y(Y,"META",{property:!0,content:!0,class:!0}),s=y(Y,"META",{property:!0,content:!0,class:!0}),i=y(Y,"META",{name:!0,content:!0,class:!0}),o=y(Y,"META",{name:!0,content:!0,class:!0}),l=y(Y,"META",{property:!0,content:!0,class:!0}),a=y(Y,"META",{property:!0,content:!0,class:!0}),u=y(Y,"META",{name:!0,content:!0,class:!0}),c=y(Y,"META",{name:!0,content:!0,class:!0}),d=y(Y,"META",{property:!0,content:!0,class:!0}),f=y(Y,"META",{name:!0,content:!0,class:!0}),m=y(Y,"META",{property:!0,content:!0,class:!0}),p=y(Y,"META",{property:!0,content:!0,class:!0}),v=y(Y,"META",{name:!0,content:!0,class:!0}),Y.forEach(b),E=X(G),O=y(G,"BODY",{class:!0});var $e=k(O);T=y($e,"DIV",{class:!0});var Ne=k(T);N=y(Ne,"DIV",{class:!0});var Ke=k(N);R=y(Ke,"BUTTON",{class:!0});var ze=k(R);M=y(ze,"IMG",{src:!0,style:!0,alt:!0,class:!0}),ze.forEach(b),L=X(Ke),P=y(Ke,"BUTTON",{class:!0});var ht=k(P);z=y(ht,"IMG",{src:!0,style:!0,alt:!0,class:!0}),ht.forEach(b),re=X(Ke),se=y(Ke,"BUTTON",{class:!0});var He=k(se);te=y(He,"IMG",{src:!0,style:!0,alt:!0,class:!0}),He.forEach(b),Ke.forEach(b),A=X(Ne),x=y(Ne,"DIV",{class:!0,id:!0});var Me=k(x);B=y(Me,"DIV",{class:!0});var Ae=k(B);q=y(Ae,"P",{style:!0,class:!0});var Ot=k(q);I=D(Ot,r[13]),Ot.forEach(b),$=X(Ae),F=y(Ae,"BUTTON",{class:!0,style:!0});var Xe=k(F);j=D(Xe,">"),Xe.forEach(b),Ae.forEach(b),ue=X(Me),ae&&ae.l(Me),ne=X(Me),le&&le.l(Me),me=X(Me),oe&&oe.l(Me),Me.forEach(b),Te=X(Ne),er(ve.$$.fragment,Ne),Ne.forEach(b),be=X($e),de=y($e,"FOOTER",{style:!0,class:!0});var ke=k(de);pe=y(ke,"P",{style:!0,class:!0});var fe=k(pe);qe=D(fe,"Created by: "),Se=y(fe,"A",{href:!0,class:!0});var Ie=k(Se);Re=D(Ie,"Sleepy"),Ie.forEach(b),fe.forEach(b),ke.forEach(b),$e.forEach(b),this.h()},h(){document.title="Smash Mapping: Map",_(e,"charset","utf-8"),_(e,"class","svelte-h2ooe8"),_(t,"name","viewport"),_(t,"content","width=device-width,initial-scale=1"),_(t,"class","svelte-h2ooe8"),_(n,"property","og:locale"),_(n,"content","en_US"),_(n,"class","svelte-h2ooe8"),_(s,"property","og:type"),_(s,"content","website"),_(s,"class","svelte-h2ooe8"),_(i,"name","twitter:card"),_(i,"content","summary_large_image"),_(i,"class","svelte-h2ooe8"),_(o,"name","twitter:site"),_(o,"content","@ZedenZeder"),_(o,"class","svelte-h2ooe8"),_(l,"property","og:site_name"),_(l,"content","Smash Mapping - A New Way to Find Tournaments"),_(l,"class","svelte-h2ooe8"),_(a,"property","og:title"),_(a,"content","Smash Mapping - A New Way to Find Tournaments"),_(a,"class","svelte-h2ooe8"),_(u,"name","twitter:title"),_(u,"content","Smash Mapping - A New Way to Find Tournaments"),_(u,"class","svelte-h2ooe8"),_(c,"name","description"),_(c,"content","Showing where in-person e-sports are held."),_(c,"class","svelte-h2ooe8"),_(d,"property","og:description"),_(d,"content","Showing where in-person e-sports are held."),_(d,"class","svelte-h2ooe8"),_(f,"name","twitter:description"),_(f,"content","Showing where in-person e-sports are held."),_(f,"class","svelte-h2ooe8"),_(m,"property","og:url"),_(m,"content","https://www.smash-mapping.com/"),_(m,"class","svelte-h2ooe8"),_(p,"property","og:image"),_(p,"content","example.png"),_(p,"class","svelte-h2ooe8"),_(v,"name","twitter:image"),_(v,"content","example.png"),_(v,"class","svelte-h2ooe8"),ut(M.src,ee="filter.png")||_(M,"src",ee),We(M,"width","40px"),We(M,"height","45px"),_(M,"alt","filter-image"),_(M,"class","svelte-h2ooe8"),_(R,"class","svelte-h2ooe8"),tt(R,"sidebarSelected",r[10]),ut(z.src,Q="tournaments.png")||_(z,"src",Q),We(z,"width","40px"),We(z,"height","45px"),_(z,"alt","tournaments-image"),_(z,"class","svelte-h2ooe8"),_(P,"class","svelte-h2ooe8"),tt(P,"sidebarSelected",r[11]),ut(te.src,w="questionmark.png")||_(te,"src",w),We(te,"width","40px"),We(te,"height","40px"),_(te,"alt","tournaments-image"),_(te,"class","svelte-h2ooe8"),_(se,"class","svelte-h2ooe8"),tt(se,"sidebarSelected",r[12]),_(N,"class","sidebar-buttons svelte-h2ooe8"),We(q,"margin-left","auto"),_(q,"class","svelte-h2ooe8"),_(F,"class","tournaments-sidebar-close-button svelte-h2ooe8"),We(F,"cursor","pointer"),tt(F,"sidebarClosed",r[9]),_(B,"class","tournaments-title svelte-h2ooe8"),_(x,"class","sidebar svelte-h2ooe8"),_(x,"id","tournaments-sidebar"),tt(x,"sidebarClosed",r[9]),_(T,"class","map svelte-h2ooe8"),_(Se,"href","https://twitter.com/ZedenZeder"),_(Se,"class","svelte-h2ooe8"),We(pe,"text-align","center"),We(pe,"color","white"),_(pe,"class","svelte-h2ooe8"),We(de,"height","30px"),We(de,"display","block"),_(de,"class","svelte-h2ooe8"),_(O,"class","svelte-h2ooe8")},m(G,Y){h(document.head,e),h(document.head,t),h(document.head,n),h(document.head,s),h(document.head,i),h(document.head,o),h(document.head,l),h(document.head,a),h(document.head,u),h(document.head,c),h(document.head,d),h(document.head,f),h(document.head,m),h(document.head,p),h(document.head,v),De(G,E,Y),De(G,O,Y),h(O,T),h(T,N),h(N,R),h(R,M),h(N,L),h(N,P),h(P,z),h(N,re),h(N,se),h(se,te),h(T,A),h(T,x),h(x,B),h(B,q),h(q,I),h(B,$),h(B,F),h(F,j),h(x,ue),ae&&ae.m(x,null),h(x,ne),le&&le.m(x,null),h(x,me),oe&&oe.m(x,null),h(T,Te),tr(ve,T,null),h(O,be),h(O,de),h(de,pe),h(pe,qe),h(pe,Se),h(Se,Re),je=!0,Ge||(Pe=[Ye(R,"click",r[18]),Ye(P,"click",r[19]),Ye(se,"click",r[20]),Ye(F,"click",r[21])],Ge=!0)},p(G,Y){(!je||Y[0]&1024)&&tt(R,"sidebarSelected",G[10]),(!je||Y[0]&2048)&&tt(P,"sidebarSelected",G[11]),(!je||Y[0]&4096)&&tt(se,"sidebarSelected",G[12]),(!je||Y[0]&8192)&&On(I,G[13]),(!je||Y[0]&512)&&tt(F,"sidebarClosed",G[9]),G[11]?ae?(ae.p(G,Y),Y[0]&2048&&ge(ae,1)):(ae=Si(G),ae.c(),ge(ae,1),ae.m(x,ne)):ae&&(Yt(),Ue(ae,1,1,()=>{ae=null}),Kt()),G[10]?le?(le.p(G,Y),Y[0]&1024&&ge(le,1)):(le=Ni(G),le.c(),ge(le,1),le.m(x,me)):le&&(Yt(),Ue(le,1,1,()=>{le=null}),Kt()),G[12]?oe?(oe.p(G,Y),Y[0]&4096&&ge(oe,1)):(oe=Ci(G),oe.c(),ge(oe,1),oe.m(x,null)):oe&&(Yt(),Ue(oe,1,1,()=>{oe=null}),Kt()),(!je||Y[0]&512)&&tt(x,"sidebarClosed",G[9]);const $e={};!ye&&Y[0]&32768&&(ye=!0,$e.map=G[15],lt(()=>ye=!1)),!Oe&&Y[0]&1&&(Oe=!0,$e.data=G[0],lt(()=>Oe=!1)),!H&&Y[0]&2&&(H=!0,$e.mapResult=G[1],lt(()=>H=!1)),ve.$set($e)},i(G){je||(ge(ae),ge(le),ge(oe),ge(ve.$$.fragment,G),je=!0)},o(G){Ue(ae),Ue(le),Ue(oe),Ue(ve.$$.fragment,G),je=!1},d(G){b(e),b(t),b(n),b(s),b(i),b(o),b(l),b(a),b(u),b(c),b(d),b(f),b(m),b(p),b(v),G&&b(E),G&&b(O),ae&&ae.d(),le&&le.d(),oe&&oe.d(),nr(ve),Ge=!1,Rr(Pe)}}}function Rc(r,e,t){let{data:n}=e,s,i,o,l,a=0,u,c,d=n.geolocated,f=!1,m=!0,p=!1,v=!1,E="Filters:",O,T,{tournaments:N}=n;function R(j){t(9,f=!1),t(10,m=j==="Filters:"),t(11,p=j==="Tournaments:"),t(12,v=j==="Help:"),t(13,E=j),(m||p||v)&&t(14,O=0)}const M=()=>R("Filters:"),ee=()=>R("Tournaments:"),L=()=>R("Help:"),P=()=>t(9,f=!f);function z(j){u=j,t(6,u)}function Q(j){N=j,t(16,N)}function re(j){n=j,t(0,n)}function se(j){d=j,t(8,d)}function te(j){s=j,t(1,s)}function w(j){i=j,t(2,i)}function A(j){o=j,t(3,o)}function x(j){l=j,t(4,l)}function B(j){a=j,t(5,a)}function q(j){c=j,t(7,c)}function I(j){T=j,t(15,T)}function $(j){n=j,t(0,n)}function F(j){s=j,t(1,s)}return r.$$set=j=>{"data"in j&&t(0,n=j.data)},[n,s,i,o,l,a,u,c,d,f,m,p,v,E,O,T,N,R,M,ee,L,P,z,Q,re,se,te,w,A,x,B,q,I,$,F]}class Uc extends xn{constructor(e){super(),Rn(this,e,Rc,xc,jn,{data:0},null,[-1,-1])}}export{Uc as component};
